/*
* Copyright (c) 2013 - Andrey Boomer - andrey.boomer at gmail.com
* icq: 454169
* Licensed under the MIT license:
*   http://www.opensource.org/licenses/mit-license.php
* Part of IWS system
*/
jQuery.uiBackCompat=!1;jQuery.jgrid.no_legacy_api=!0;
function browserDetectNav(m){var n=window.navigator.userAgent,r=/Version[ \/]+\w+\.\w+/i,s=/Safari\/\w+\.\w+/i,q=[],t=/[ \/\.]/i,r=n.match(r),a=n.match(/Firefox\/\w+\.\w+/i),b=n.match(/Chrome\/\w+\.\w+/i),d=n.match(/Version\/\w+\.\w+/i),s=n.match(s),f=n.match(/MSIE *\d+\.\w+/i),n=n.match(/Opera[ \/]+\w+\.\w+/i);""==!n&""==!r?q[0]=r[0].replace(/Version/,"Opera"):""==!n?q[0]=n[0]:""==!f?q[0]=f[0]:""==!a?q[0]=a[0]:""==!b?q[0]=b[0]:""==!d&&""==!s&&(q[0]=d[0].replace("Version","Safari"));var l;null!=q[0]&&
(l=q[0].split(t));return(null==m|0==m)&null!=l?(m=l[2].length,l[2]=l[2].substring(0,m),l):null!=m?(l[2]=l[2].substr(0,m),l):!1}function browserDetectJS(){var m=[];window.opera?(m[0]="Opera",m[1]=window.opera.version()):window.chrome?m[0]="Chrome":window.sidebar?m[0]="Firefox":window.external||"Opera"===m[0]?window.ActiveXObject&&(m[0]="MSIE",m[1]=window.navigator.userProfile?"6":window.Storage?"8":window.Storage||window.navigator.userProfile?"Unknown":"7"):m[0]="Safari";return m?m:!1}
function alert_browser_message(m){alert("\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u0432\u0430\u0448\u0430 \u0432\u0435\u0440\u0441\u0438\u044f \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0430:\r\n"+m+"\r\n\u0431\u043e\u043b\u044c\u0448\u0435 \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0438 \u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u0431\u0443\u0434\u0435\u0442 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u043d\u0435\u0441\u0442\u0430\u0431\u0438\u043b\u044c\u043d\u043e, \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u0435\u0441\u044c, \u043b\u0438\u0431\u043e \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u043a \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0443!");
throw new Exception_no_browser("error");}var browserNav=browserDetectNav(1),browserJS=browserDetectJS(),browser;browser=browserNav[0]==browserJS[0]?browserNav:browserNav[0]!=browserJS[0]?browserJS:!1;jQuery.browser={};
switch(browser[0]){case "Chrome":jQuery.browser.webkit=!0;23>browser[1]&&alert_browser_message(browser[0]+" (\u0432\u0435\u0440\u0441\u0438\u044f "+browser[1]+"."+browser[2]+")");break;case "Safari":jQuery.browser.safari=!0;5>browser[1]&&alert_browser_message(browser[0]+" (\u0432\u0435\u0440\u0441\u0438\u044f "+browser[1]+"."+browser[2]+")");break;case "MSIE":jQuery.browser.msie=!0;9>browser[1]&&alert_browser_message(browser[0]+" (\u0432\u0435\u0440\u0441\u0438\u044f "+browser[1]+"."+browser[2]+")");
break;case "Opera":jQuery.browser.opera=!0;13>browser[1]&&alert_browser_message(browser[0]+" (\u0432\u0435\u0440\u0441\u0438\u044f "+browser[1]+"."+browser[2]+")");break;case "Firefox":jQuery.browser.mozilla=!0,10>browser[1]&&alert_browser_message(browser[0]+" (\u0432\u0435\u0440\u0441\u0438\u044f "+browser[1]+"."+browser[2]+")")}var counttab=1,hidden_menu=!1;
$(function(){$("#tabs").tabs({collapsible:!1,heightStyle:"fill",activate:function(a,b){redraw_document(b.newPanel)}});custom_alert=function(a,b){is_modal=!1;b||(b="\u041e\u0448\u0438\u0431\u043a\u0430",is_modal=!0,st="ui-state-error");a||(a="");$("<div />").html(a).dialog({title:b,resizable:!1,minWidth:450,modal:is_modal,buttons:{"\u0417\u0430\u043a\u0440\u044b\u0442\u044c":function(){$(this).dialog("close")}},open:function(){$(this).parent().css("z-index",9999).parent().children(".ui-widget-overlay").css("z-index",
105);""!=st&&($(this).addClass(st),$(this).dialog({dialogClass:"alert"}))}})};$("#Menubar").menubar({menuIcon:!0}).css({"float":"left","text-align":"left",display:"block"});trim_text=function(a,b,d){var f="";if(a.length<b)return a;a=a.split(" ");for(b=0;b<a.length;b++)if(f=f+" "+a[b],b>d-2)return f+"..."};SetTab=function(a,b,d){if("false"!=d){var f=d;$("#"+f).empty();""!=a&&($("#ui-"+f).text(trim_text(a,40,3)),$("#ui-"+f).prop("title",a))}else f="tabs_"+counttab,$("#tabs").children(".ui-tabs-nav").append($("<li />").append($("<a />").attr({href:"#"+
f,title:a,id:"ui-"+f}).text(trim_text(a,40,3))).append('<span class="ui-icon ui-icon-close" style="float:left"></span>')),$("#tabs").append($("<div />").attr({id:f,style:"overflow:hide;width:"+($(window).width()-20)+"px"}));$("#"+f).append("<div class='loader_tab' style='overflow:hide'><div>");b=b+"&tabid="+f;$("#tabs").tabs("refresh");"false"==d&&$("#tabs").tabs("option","active",$("#tabs").children(".ui-tabs-nav li").length-1);$.ajax({url:b,type:"GET",success:function(b){0==$(b).find("div[window_login='logon']").length?
($("#"+f).empty().css("text-align","left").append(b),redraw_document($(".ui-tabs-panel[aria-expanded='true']"))):$("html").empty().append(b)}});counttab++};CloseTab=function(a){$("#ui-"+a).parent().closest("li").remove();$("#"+a).remove();$("#tabs").tabs("refresh");$(".ui-tabs-panel").css("overflow","hidden");redraw_document()};$(".help_button").button({icons:{primary:"ui-icon-help"},text:!0}).attr("style","float: right;").appendTo("#tabs .ui-tabs-nav").click(function(){SetTab("\u0418\u043d\u0434\u0435\u043a\u0441 \u0441\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u043e\u0433\u043e \u0440\u0430\u0437\u0434\u0435\u043b\u0430",
$(this).attr("url"),"false")});$("#tabs").children(".ui-tabs-nav").append($("<button>\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0432\u0441\u0435 \u0432\u043a\u043b\u0430\u0434\u043a\u0438</button>").attr({id:"close_all_tab",style:"float: right;margin: 0px 5px 3px 0px;"}).button({icons:{primary:"ui-icon-closethick"},text:!1}).click(function(){$.each($("#tabs .ui-tabs-nav li"),function(){CloseTab($(this).attr("aria-controls"))})}));redraw_document=function(a){var b=$(window).height(),d=$(window).width()-
2,f=$(".main_menu").height();$("#tabs").tabs().height(b-f-10);$("#tabs .ui-tabs-panel").height(b-f-10).width(d-20);$(".about_tabs").offset({top:b-50});$(".about_tabs_ver").offset({top:b-25});"undefined"===typeof a&&(a=$("body"));a.find(".navigation_header").height(30);$(".dialog_jqgrid_overlay,.ui-widget-overlay").height(b-f-85).width(d-24).offset({top:f+30+50,left:12});a.find(".tab_main_content").height(b-f-90).width(d-20);a.css("overflow","hidden");a.find(".help_content").height(b-f-90).width(d-
20).children(".ui-accordion-header").width(d-65).parent().children(".ui-accordion-content").height(b-f-150-2.05*$(".ui-accordion-header").height()*($(".help_content .ui-accordion-header").length-1)).width(d-87);$.each(a.find(".grid_resizer"),function(){var a=$(this).attr("percent"),k=d-27,a=90>a&&10<a||0<$(this).attr("percent_saved")?(b-f-93)/100*a:b-f-93,c="none"!=$(this).children(".ui-jqgrid").find(".ui-search-toolbar").css("display")&&"TREE_GRID_FORM_MASTER"!=$(this).attr("form_type")&&"TREE_GRID_FORM_DETAIL"!=
$(this).attr("form_type")&&"TREE_GRID_FORM"!=$(this).attr("form_type")?102:75;$(this).height(a).width(k);$(this).height(a).children(".ui-jqgrid").height(a-2).width(k).children(".ui-jqgrid-pager").height(25).width(k).parent().children(".ui-jqgrid-view").height(a-27).width(k).children(".ui-jqgrid-hdiv").width(k).parent().children(".ui-jqgrid-bdiv").height(a-c).width(k)});$.each(a.find(".grid_resizer_tabs"),function(){var a=d-48,k=$(this).attr("percent")-33/(b/100),k=(b-f-93)/100*k-23,c="none"!=$(this).children(".ui-jqgrid").find(".ui-search-toolbar").css("display")&&
"TREE_GRID_FORM_MASTER"!=$(this).attr("form_type")&&"TREE_GRID_FORM_DETAIL"!=$(this).attr("form_type")&&"TREE_GRID_FORM"!=$(this).attr("form_type")?82:55;$(this).height(k).width(a);$(this).height(k).children(".ui-jqgrid").height(k-2).width(a).children(".ui-jqgrid-pager").height(25).width(a).parent().children(".ui-jqgrid-view").height(k-27).width(a).children(".ui-jqgrid-hdiv").width(a).parent().children(".ui-jqgrid-bdiv").height(k-c).width(a)});6<$("#tabs").children(".ui-tabs-nav").children("li").length?
$.each($(".navigation_header"),function(){1!=$(this).children(".alert_button").length&&$(this).append("<div class='alert_button ui-state-error ui-corner-all' style='float:right;width:100px;margin: 6px 15px 5px 5px;' title='\u041e\u0442\u043a\u0440\u044b\u0442\u043e \u0431\u043e\u043b\u0435\u0435 7 \u0432\u043a\u043b\u0430\u0434\u043e\u043a \u043e\u0434\u043d\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e,\u044d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0441\u0438\u043b\u044c\u043d\u043e \u0437\u0430\u043c\u0435\u0434\u043b\u0438\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u0443 \u0441\u0438\u0441\u0442\u0435\u043c\u044b. \u041f\u043e \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438 \u0437\u0430\u043a\u0440\u043e\u0439\u0442\u0435 \u043e\u0434\u043d\u0443 \u0438\u043b\u0438 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0432\u043a\u043b\u0430\u0434\u043e\u043a.'><span class='ui-icon ui-icon-alert' style='float:left'></span>\u0412\u041d\u0418\u041c\u0410\u041d\u0418\u0415!</div>")}):
$.each($(".navigation_header .alert_button"),function(){$(this).remove()});$.each($(".grid_resizer[form_type$='_DETAIL'] div.ui-jqgrid-titlebar, .detail_tab .ui-tabs-nav"),function(){1>$(this).children("div[control='window']").length&&(button_htm_down=$("<span>").attr({style:"float:right;cursor: pointer","class":"ui-icon ui-icon-circle-triangle-n",title:"\u0420\u0430\u0441\u043f\u0430\u0445\u043d\u0443\u0442\u044c \u043d\u0430 \u0432\u0441\u0435 \u043e\u043a\u043d\u043e/\u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"}).click(function(){upper=
$(".ui-tabs-panel[aria-expanded='true'] .grid_resizer:first");downn=$(".ui-tabs-panel[aria-expanded='true'] .grid_resizer:last,.ui-tabs-panel[aria-expanded='true'] .grid_resizer_tabs");$(".ui-tabs-panel[aria-expanded='true'] .ui-icon-circle-triangle-s").show();0<upper.attr("percent_saved")?(upper.attr("percent",upper.attr("percent_saved")).removeAttr("percent_saved"),downn.attr("percent",downn.attr("percent_saved")).removeAttr("percent_saved"),downn.show(),$(this).parent().remove()):(upper.attr("percent_saved",
upper.attr("percent")).attr("percent",0),downn.attr("percent_saved",downn.attr("percent")).attr("percent",100),upper.hide(),$(this).hide());redraw_document($(".ui-tabs-panel[aria-expanded='true']"))}),button_htm_up=$("<span>").attr({style:"float:right;cursor: pointer","class":"ui-icon ui-icon-circle-triangle-s",title:"\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c/\u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"}).click(function(){upper=$(".ui-tabs-panel[aria-expanded='true'] .grid_resizer:first");
downn=$(".ui-tabs-panel[aria-expanded='true'] .grid_resizer:last,.ui-tabs-panel[aria-expanded='true'] .grid_resizer_tabs");$(".ui-tabs-panel[aria-expanded='true'] .ui-icon-circle-triangle-n").show();0<upper.attr("percent_saved")?(upper.attr("percent",upper.attr("percent_saved")).removeAttr("percent_saved"),downn.attr("percent",downn.attr("percent_saved")).removeAttr("percent_saved"),upper.show(),$(this).show()):(upper.attr("percent_saved",upper.attr("percent")).attr("percent",100),downn.attr("percent_saved",
downn.attr("percent")).attr("percent",0),downn.hide(),$(this).hide(),$(".ui-tabs-panel[aria-expanded='true'] div[control='window']").appendTo(upper.find(".ui-jqgrid-titlebar")));redraw_document($(".ui-tabs-panel[aria-expanded='true']"))}),$(this).append($('<div control="window" style="float:right;"></div>').append(button_htm_up,button_htm_down)))})};replace_select_opt_group=function(a){"undefined"===typeof a&&(a=$("body"));$.each($(a).find("select option[value='GROUP_START']"),function(){$(this).replaceWith("<optgroup label='"+
$(this).text()+"' >")});$.each($(a).find("select option[value='GROUP_END']"),function(){var b=$(this).parent(),a=b.children("option:selected");if("undefined"!==typeof b.html()){var f=$(b.html().split("</optgroup>").join("").split('<option value="GROUP_END"></option>').join("</optgroup>").split('<option role="option" value="GROUP_END"></option>').join("</optgroup>"));f.children('option[value="'+a.attr("value")+'"]').attr("selected","selected");b.empty().append(f)}})};auto_width_grid=function(a){var b=
$("#gview_"+a+" .ui-jqgrid-hdiv .ui-jqgrid-hbox table tr:first th:visible"),d=$("#gview_"+a+" .ui-jqgrid-bdiv div table tr:first td:visible"),f=0,l=0;$.each(b,function(){$(this).attr("id")==a+"_rn"&&(l=$(this).width());f+=$(this).width()});var k=$("#"+a).parent().width();if(f<k){var c=k/f;$.each(b,function(){var b=$(this).width();$(this).attr("id")!=a+"_rn"&&$(this).width(b*c)});$.each(d,function(){var b=$(this).width();$(this).width()!=l&&$(this).width(b*c)})}};set_resizers=function(){$(".has_resize_control").resizable({distance:30,
handles:"s",resize:function(a,b){var d=$(".main_menu").height(),d=$(window).height()-d-93,d=100+100*((b.size.height-d)/Math.abs(d)),f=100-d;10<d&&(95>d&&10<f&&95>f)&&($(this).attr("percent",d).parent().children("div[form_type='GRID_FORM_DETAIL']").attr("percent",f),$(this).attr("percent",d).parent().children("div[form_type='TREE_GRID_FORM_DETAIL']").attr("percent",f),$(this).attr("percent",d).parent().children("div[form_type='TABED_GRID_FORM']").attr("percent",f).children(".ui-tabs-panel").children(".grid_resizer_tabs").attr("percent",
f),$(this).attr("percent",d).parent().children("div[form_type='GRID_FORM']").attr("percent",f))},create:function(a,b){$(this).children(".ui-resizable-handle").height(5.3).attr("align","center").append($("<div />").addClass("ui-widget-header ui-state-hover ui-corner-all").height(2).width(150))}})};set_detail_tab=function(){$(".detail_tab").tabs({collapsible:!0,heightStyle:"fill",activate:function(a,b){"true"==$("#"+b.newTab.attr("aria-controls")).children(".grid_resizer_tabs").attr("need_update")&&
($("#"+$("#"+b.newTab.attr("aria-controls")).children(".grid_resizer_tabs").attr("for")).jqGrid().trigger("reloadGrid",!0),$("#"+b.newTab.attr("aria-controls")).children(".grid_resizer_tabs").attr("need_update","false"))}})};$(document).on("click","#tabs span.ui-icon-close",function(){CloseTab($(this).parent().attr("aria-controls"))});$(document).ready(function(){$.browser.msie&&$(".ui-menu-item a").append("&nbsp;&nbsp;&nbsp;&nbsp;");hidden_menu&&($("#Menubar").menubar("destroy"),$(".main_menu").height(0).hide(),
$("#tabs").children(".ui-tabs-nav").append($("<button>\u041c\u0435\u043d\u044e</button>").attr({id:"menu_hidden_tab",style:"float: left;margin: 0px 5px 3px 0px;"}).button({icons:{primary:"ui-icon-newwin",secondary:"ui-icon-triangle-1-s"},text:!0}).click(function(){var a=$("#hidden_menubar").show().position({my:"left top",at:"left bottom",of:this});$(document).one("click",function(){a.hide()});return!1})),$("body").append($("<ul />").attr({id:"hidden_menubar",style:"float:left;"}).append($("#Menubar").children("li").unwrap())),
$.each($("#hidden_menubar").children("li"),function(){$(this).children("a").append("<span class='ui-icon ui-icon-folder-collapsed'></span>").removeClass("ui-button-text-icon-secondary").children("b").removeAttr("style");$.browser.msie&&$(this).children("a").append("&nbsp;&nbsp;&nbsp;&nbsp;")}),$("#hidden_menubar").children("li:first").after("<li></li>"),$("#hidden_menubar").hide().menu());redraw_document();$("#loading").fadeOut(300)});$(window).resize(function(){redraw_document($(".ui-tabs-panel[aria-expanded='true']"))});
check_form=function(a){var b=!0;$.each(a.find("input[is_requred='true']"),function(){""==$.trim($(this).val())&&($(this).addClass("ui-state-error"),$("#clone_"+$(this).attr("id")).parent().addClass("ui-state-error"),$(this).parent().children(".ui-button").addClass("ui-state-error"),b=!1)});$.each(a.find("select[is_requred='true']"),function(){""==$.trim($(this).val())&&($(this).addClass("ui-state-error"),$(this).parent().children("button").addClass("ui-state-error"),b=!1)});$.each(a.find("textarea[is_requred='true']"),
function(){""==$.trim($(this).val())&&($(this).addClass("ui-state-error"),$(this).parent().children(".codemirror").addClass("ui-state-error"),b=!1)});if(b)return!0;custom_alert("\u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0432\u0441\u0435 \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0435 \u043f\u043e\u043b\u044f!");return!1};create_from_table_elemnts=function(a){$.each(a.find("input, select, textarea"),function(){var b=
$(this);b.width(b.attr("w"));switch(b.attr("i_type")){case "I":if(1>$("#clone_"+b.attr("id")).length){var a=$(this).clone().attr("id","clone_"+b.attr("id")).removeAttr("name").removeAttr("i_type");a.insertBefore(b.hide());a.spinner({change:function(a,d){b.val($(this).attr("aria-valuenow"))}}).removeClass("ui-widget-content ui-corner-all").calculator({useThemeRoller:!0,showAnim:"",showOn:"",onButton:function(b,f,c){a.spinner("value",f)}});$($("<button>\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440</button>").button({icons:{primary:"ui-icon-calculator"},
text:!1}).click(function(b){a.calculator("show")})).insertAfter(a.parent());"undefined"!==typeof b.attr("show_disabled")&&"false"!=b.attr("show_disabled")&&(a.spinner("option","disabled"),a.parent().parent().children(".ui-button").remove())}else $("#clone_"+b.attr("id")).spinner("value",b.val());break;case "N":1>$("#clone_"+b.attr("id")).length?(a=$(this).clone().attr("id","clone_"+b.attr("id")).removeAttr("name").removeAttr("i_type"),a.insertBefore(b.hide()),a.spinner({numberFormat:"n2",culture:"ru-RU",
step:0.01,change:function(a,d){b.val($(this).attr("aria-valuenow"))}}).removeClass("ui-widget-content ui-corner-all").calculator({useThemeRoller:!0,showAnim:"",showOn:"",layout:$.calculator.scientificLayout,onButton:function(b,f,c){a.spinner("value",f)}}),$($("<button>\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440</button>").button({icons:{primary:"ui-icon-calculator"},text:!1}).click(function(b){a.calculator("show")})).insertAfter(a.parent()),
"undefined"!==typeof b.attr("show_disabled")&&"false"!=b.attr("show_disabled")&&(a.spinner("option","disabled"),a.parent().parent().children(".ui-button").remove())):$("#clone_"+b.attr("id")).spinner("value",b.val());break;case "NL":1>$("#clone_"+b.attr("id")).length?(a=$(this).clone().attr("id","clone_"+b.attr("id")).removeAttr("name").removeAttr("i_type"),a.insertBefore(b.hide()),a.spinner({numberFormat:"n7",culture:"ru-RU",step:0.01,change:function(a,d){b.val($(this).attr("aria-valuenow"))}}).removeClass("ui-widget-content ui-corner-all").calculator({useThemeRoller:!0,
showAnim:"",showOn:"",layout:$.calculator.scientificLayout,onButton:function(b,f,c){a.spinner("value",f)}}),$($("<button>\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440</button>").button({icons:{primary:"ui-icon-calculator"},text:!1}).click(function(b){a.calculator("show")})).insertAfter(a.parent()),"undefined"!==typeof b.attr("show_disabled")&&"false"!=b.attr("show_disabled")&&(a.spinner("option","disabled"),a.parent().parent().children(".ui-button").remove())):
$("#clone_"+b.attr("id")).spinner("value",b.val());break;case "C":1>$("#clone_"+b.attr("id")).length?(a=$(this).clone().attr("id","clone_"+b.attr("id")).removeAttr("name").removeAttr("i_type"),a.insertBefore(b.hide()),a.spinner({numberFormat:"C",culture:"ru-RU",step:0.01,change:function(a,d){b.val($(this).attr("aria-valuenow"))}}).removeClass("ui-widget-content ui-corner-all").calculator({useThemeRoller:!0,showAnim:"",showOn:"",onButton:function(b,f,c){a.spinner("value",f)}}),$($("<button>\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440</button>").button({icons:{primary:"ui-icon-calculator"},
text:!1}).click(function(b){a.calculator("show")})).insertAfter(a.parent()),"undefined"!==typeof b.attr("show_disabled")&&"false"!=b.attr("show_disabled")&&(a.spinner("option","disabled"),a.parent().parent().children(".ui-button").remove())):$("#clone_"+b.attr("id")).spinner("value",b.val());break;case "P":b.attr("value","");break;case "B":1>b.parent().children('label[for="'+b.attr("id")+'"]').length&&(b.before('<label for="'+b.attr("id")+'">\u0412\u043a\u043b\u044e\u0447\u0435\u043d\u043e \u0438\u043b\u0438 \u0432\u044b\u043a\u043b\u044e\u0447\u0435\u043d\u043e</label>').button({icons:{primary:"ui-icon-check"},
text:!1}).click(function(){"checked"!=b.attr("checked")?b.attr("checked","checked").button({icons:{primary:"ui-icon-check"}}):b.removeAttr("checked").button({icons:{primary:"ui-icon-bullet"}})}),b.addClass("ui-helper-hidden-accessible"));"checked"==b.attr("checked")?b.attr("checked","checked").button({icons:{primary:"ui-icon-check"}}).button("refresh"):b.removeAttr("checked").button({icons:{primary:"ui-icon-bullet"}}).button("refresh");b.removeAttr("style");break;case "D":1>b.parent().children(".ui-datepicker-trigger").length?
(b.datepicker({showOn:"button",showWeek:!0,numberOfMonths:num_of_mounth,changeYear:!0,firstDay:1}).parent().children(".ui-datepicker-trigger").button({icons:{primary:"ui-icon-calendar"},text:!1}),"undefined"!==typeof b.attr("show_disabled")&&"false"!=b.attr("show_disabled")&&(b.datepicker("option","disabled",!0),b.parent().children(".ui-datepicker-trigger").remove())):b.datepicker("setDate",b.val());break;case "DT":1>b.parent().children(".ui-datepicker-trigger").length?(b.datetimepicker({showWeek:!0,
numberOfMonths:num_of_mounth,changeYear:!0,firstDay:1,timeFormat:"HH:mm:ss",showOn:"button",controlType:{create:function(a,b,d,f,h,g,v){$('<input class="ui-timepicker-input" value="'+f+'" style="width:50px">').appendTo(b).spinner({min:h,max:g,step:v,change:function(b,d){void 0!==b.originalEvent&&a._onTimeChange();a._onSelectHandler()},spin:function(f,e){a.control.value(a,b,d,e.value);a._onTimeChange();a._onSelectHandler()}});return b},options:function(a,b,d,f,h){return"string"==typeof f&&void 0!==
h?b.find(".ui-timepicker-input").spinner(f,h):b.find(".ui-timepicker-input").spinner(f)},value:function(a,b,d,f){return void 0!==f?b.find(".ui-timepicker-input").spinner("value",f):b.find(".ui-timepicker-input").spinner("value")}}}).parent().children(".ui-datepicker-trigger").button({icons:{primary:"ui-icon-calendar"},text:!1}),"undefined"!==typeof b.attr("show_disabled")&&"false"!=b.attr("show_disabled")&&(b.datepicker("option","disabled",!0),b.parent().children(".ui-datepicker-trigger").remove())):
b.datetimepicker("setDate",b.val());break;case "SB":if(1>b.parent().children(".ui-multiselect").length)b.multiselect({multiple:"undefined"===typeof b.attr("multiple")?!1:!0,minWidth:255>b.width()?255:b.width(),header:!0,selectedList:b.attr("h")}).multiselectfilter();else if("undefined"===typeof b.attr("multiple")){var f=b.find("option:selected").text();b.parent().find(".ui-multiselect span:last").text(f);b.multiselect("widget").find("input:checked").removeAttr("checked").removeAttr("aria-selected").parent().removeClass("ui-state-active ui-state-hover");
$.each(b.multiselect("widget").find("span:contains('"+f+"')"),function(){""!=f&&$(this).text()==f&&$(this).parent().addClass("ui-corner-all ui-state-active ui-state-hover").children("input").attr("checked","checked").attr("aria-selected",!0)});"undefined"!==typeof b.attr("show_disabled")&&"false"!=b.attr("show_disabled")&&(b.multiselect("disable"),b.multiselect("refresh"))}else b.multiselect("refresh");break;case "M":1>b.parent().children(".ace_editor").length?(b.before('<div id="editor_'+b.attr("name")+
'"></div>'),$("#editor_"+b.attr("name")).ace_editor({width:b.attr("w"),heigth:50<12*b.attr("h")?12*b.attr("h"):50,mode:"ace/mode/pgsql",classes:"FormElement ui-widget-content ui-corner-all",resizable:!0,value:b.val(),change:function(a,d){b.val(d)}}),b.hide()):$("#editor_"+b.attr("name")).ace_editor({value:b.val()})}"undefined"!==typeof b.attr("show_disabled")&&"false"!=b.attr("show_disabled")&&(b.attr({name:null,disabled:"disabled"}).addClass("FormElement ui-widget-content ui-corner-all ui-state-disabled"),
"undefined"!==typeof a&&a.attr({name:null,disabled:"disabled"}).addClass("FormElement ui-widget-content ui-corner-all ui-state-disabled"))})};$("#param").dialog({autoOpen:!1,modal:!0,minWidth:450,closeOnEscape:!0,resizable:!1,buttons:{"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c":function(){$.browser.msie?$("#submit_settings").click():$.ajax({url:location.href+"ajax.saveparams.php",datatype:"json",data:$("#settings_from").serialize(),cache:!1,type:"POST",success:function(a){$(location).prop("href",
location.href)}});$(this).dialog("close")},"\u041e\u0442\u043c\u0435\u043d\u0430":function(){$(this).dialog("close")}},close:function(){$(this).dialog("close")},open:function(){$(".ui-dialog-buttonpane").find('button:contains("\u041e\u0442\u043c\u0435\u043d\u0430")').button({icons:{primary:"ui-icon-close"}});$(".ui-dialog-buttonpane").find('button:contains("\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c")').button({icons:{primary:"ui-icon-disk"}});$(this).parent().css("z-index",110).parent().children(".ui-widget-overlay").css("z-index",
105)}});$("#about").dialog({autoOpen:!1,modal:!0,minWidth:650,closeOnEscape:!0,resizable:!1,close:function(){$(this).dialog("close")},open:function(){$(this).parent().css("z-index",110).parent().children(".ui-widget-overlay").css("z-index",105)}});$("#themeselector").multiselect({multiple:!1,header:!1,selectedList:1});$("#width_enable").button({icons:{primary:"ui-icon-arrow-2-e-w"}}).click(function(){var a=$("#width_enable");"checked"!=a.attr("checked")?a.attr("checked","checked"):a.removeAttr("checked")});
$("#multiselect").button({icons:{primary:"ui-icon-grip-solid-horizontal"}}).click(function(){var a=$("#multiselect");"checked"!=a.attr("checked")?a.attr("checked","checked"):a.removeAttr("checked")});$("#editabled").button({icons:{primary:"ui-icon-lightbulb"}}).click(function(){var a=$("#editabled");"checked"!=a.attr("checked")?a.attr("checked","checked"):a.removeAttr("checked")});$("#hide_menu").button({icons:{primary:"ui-icon-carat-2-e-w"}}).click(function(){var a=$("#hide_menu");"checked"!=a.attr("checked")?
a.attr("checked","checked"):a.removeAttr("checked")});$("#cache_enable").button({icons:{primary:"ui-icon-notice"}}).click(function(){var a=$("#cache_enable");"checked"!=a.attr("checked")?a.attr("checked","checked"):a.removeAttr("checked")});$("#renderer").slider({range:"min",value:$("#render_type").val(),min:0,max:3,step:1,slide:function(a,b){$.browser.msie&&2<=b.value?($("#render_type").val(2),$(this).slider({value:2})):$("#render_type").val(b.value)}});$("#num_mounth").spinner({spin:function(a,
b){if(6<b.value)return $(this).spinner("value",1),!1;if(1>b.value)return $(this).spinner("value",6),!1}});$("#num_reck").spinner({step:10,spin:function(a,b){if(5E3<b.value)return $(this).spinner("value",1),!1;if(1>b.value)return $(this).spinner("value",5E3),!1}});get_select_values_grid=function(a,b,d){$.ajax({url:"ajax.data.select.php?value_name="+b+"&parent_id="+d,datatype:"json",cache:!1,type:"GET",success:function(d){$("#"+a).jqGrid("setColProp",b,{editoptions:{value:d},searchoptions:{value:":;"+
d}});$("#"+a).attr("new_colmodel",!0)}})};Globalize.addCultureInfo("ru-RU","default",{name:"ru-RU",englishName:"Russian (Russia)",nativeName:"\u0440\u0443\u0441\u0441\u043a\u0438\u0439 (\u0420\u043e\u0441\u0441\u0438\u044f)",language:"ru",numberFormat:{",":"",".":",",negativeInfinity:"-\u0431\u0435\u0441\u043a\u043e\u043d\u0435\u0447\u043d\u043e\u0441\u0442\u044c",positiveInfinity:"\u0431\u0435\u0441\u043a\u043e\u043d\u0435\u0447\u043d\u043e\u0441\u0442\u044c",percent:{pattern:["-n%","n%"],",":"",
".":","},currency:{pattern:["-n$","n$"],",":"",".":",",symbol:"\u0440."}},calendars:{standard:{"/":".",firstDay:1,days:{names:"\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435 \u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a \u0432\u0442\u043e\u0440\u043d\u0438\u043a \u0441\u0440\u0435\u0434\u0430 \u0447\u0435\u0442\u0432\u0435\u0440\u0433 \u043f\u044f\u0442\u043d\u0438\u0446\u0430 \u0441\u0443\u0431\u0431\u043e\u0442\u0430".split(" "),namesAbbr:"\u0412\u0441 \u041f\u043d \u0412\u0442 \u0421\u0440 \u0427\u0442 \u041f\u0442 \u0421\u0431".split(" "),
namesShort:"\u0412\u0441 \u041f\u043d \u0412\u0442 \u0421\u0440 \u0427\u0442 \u041f\u0442 \u0421\u0431".split(" ")},months:{names:"\u042f\u043d\u0432\u0430\u0440\u044c \u0424\u0435\u0432\u0440\u0430\u043b\u044c \u041c\u0430\u0440\u0442 \u0410\u043f\u0440\u0435\u043b\u044c \u041c\u0430\u0439 \u0418\u044e\u043d\u044c \u0418\u044e\u043b\u044c \u0410\u0432\u0433\u0443\u0441\u0442 \u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c \u041e\u043a\u0442\u044f\u0431\u0440\u044c \u041d\u043e\u044f\u0431\u0440\u044c \u0414\u0435\u043a\u0430\u0431\u0440\u044c ".split(" "),
namesAbbr:"\u044f\u043d\u0432 \u0444\u0435\u0432 \u043c\u0430\u0440 \u0430\u043f\u0440 \u043c\u0430\u0439 \u0438\u044e\u043d \u0438\u044e\u043b \u0430\u0432\u0433 \u0441\u0435\u043d \u043e\u043a\u0442 \u043d\u043e\u044f \u0434\u0435\u043a ".split(" ")},monthsGenitive:{names:"\u044f\u043d\u0432\u0430\u0440\u044f \u0444\u0435\u0432\u0440\u0430\u043b\u044f \u043c\u0430\u0440\u0442\u0430 \u0430\u043f\u0440\u0435\u043b\u044f \u043c\u0430\u044f \u0438\u044e\u043d\u044f \u0438\u044e\u043b\u044f \u0430\u0432\u0433\u0443\u0441\u0442\u0430 \u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f \u043e\u043a\u0442\u044f\u0431\u0440\u044f \u043d\u043e\u044f\u0431\u0440\u044f \u0434\u0435\u043a\u0430\u0431\u0440\u044f ".split(" "),
namesAbbr:"\u044f\u043d\u0432 \u0444\u0435\u0432 \u043c\u0430\u0440 \u0430\u043f\u0440 \u043c\u0430\u0439 \u0438\u044e\u043d \u0438\u044e\u043b \u0430\u0432\u0433 \u0441\u0435\u043d \u043e\u043a\u0442 \u043d\u043e\u044f \u0434\u0435\u043a ".split(" ")},AM:null,PM:null,patterns:{d:"dd.MM.yyyy",D:"d MMMM yyyy '\u0433.'",t:"H:mm",T:"H:mm:ss",f:"d MMMM yyyy '\u0433.' H:mm",F:"d MMMM yyyy '\u0433.' H:mm:ss",Y:"MMMM yyyy"}}}});$.calculator.regional.ru={decimalChar:",",buttonText:"...",buttonStatus:"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440",
closeText:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",closeStatus:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440",useText:"OK",useStatus:"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0435\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0432 \u043f\u043e\u043b\u0435",eraseText:"\u0421\u0431\u0440\u043e\u0441",eraseStatus:"\u0421\u0442\u0435\u0440\u0435\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435",
backspaceText:"<-",backspaceStatus:"\u0421\u0442\u0435\u0440\u0435\u0442\u044c \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u044e\u044e \u0446\u0438\u0444\u0440\u0443",clearErrorText:"CE",clearErrorStatus:"\u0421\u0442\u0435\u0440\u0435\u0442\u044c \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0435 \u0447\u0438\u0441\u043b\u043e",clearText:"\u0421",clearStatus:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c",memClearText:"MC",memClearStatus:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u043f\u0430\u043c\u044f\u0442\u044c",
memRecallText:"MR",memRecallStatus:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0438\u0437 \u043f\u0430\u043c\u044f\u0442\u0438",memStoreText:"MS",memStoreStatus:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0432 \u043f\u0430\u043c\u044f\u0442\u044c",memAddText:"M+",memAddStatus:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043f\u0430\u043c\u044f\u0442\u044c",memSubtractText:"M-",memSubtractStatus:"\u0412\u044b\u0447\u0435\u0441\u0442\u044c \u0438\u0437 \u043f\u0430\u043c\u044f\u0442\u0438",
base2Text:"\u0411\u0438\u043d",base2Status:"\u0411\u0438\u043d\u0430\u0440\u043d\u044b\u0439",base8Text:"\u0412\u043e\u0441\u043c",base8Status:"\u0412\u043e\u0441\u043c\u0435\u0440\u0438\u0447\u043d\u044b\u0439",base10Text:"\u0414\u0435\u0441",base10Status:"\u0414\u0435\u0441\u044f\u0442\u0438\u0447\u043d\u044b\u0439",base16Text:"\u0428\u0435\u0441\u0442",base16Status:"\u0428\u0435\u0441\u0442\u043d\u0430\u0434\u0446\u0430\u0442\u0438\u0440\u0438\u0447\u043d\u044b\u0439",degreesText:"\u0413\u0440\u0430\u0434",
degreesStatus:"\u0413\u0440\u0430\u0434\u0443\u0441\u044b",radiansText:"\u0420\u0430\u0434",radiansStatus:"\u0420\u0430\u0434\u0438\u0430\u043d\u044b",isRTL:!1};$.calculator.setDefaults($.calculator.regional.ru);$.extend($.ech.multiselectfilter.prototype.options,{label:"\u0424\u0438\u043b\u044c\u0442\u0440:",placeholder:"\u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043b\u043e\u0432\u043e"});$.extend($.ech.multiselect.prototype.options,{height:250,minWidth:350,checkAllText:"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u0432\u0441\u0435",
uncheckAllText:"\u0421\u043d\u044f\u0442\u044c \u043e\u0442\u043c\u0435\u0442\u043a\u0443 \u0441\u043e \u0432\u0441\u0435\u0445",noneSelectedText:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430",selectedText:"\u0412\u044b\u0431\u0440\u0430\u043d\u043e #"});$.extend($.jgrid,{viewModal:function(a,b){create_from_table_elemnts($(a).find(".FormGrid"));$(a).dialog("open");if("undefined"===typeof $(a).attr("saved_width")){var d=$(a)[0].scrollWidth,f="true"==
$(a).attr("selector_type")&&550>d?1.5:1;0<d&&$(a).dialog("option","width",d*f+25);$(a).attr("saved_width","true")}redraw_document($(".ui-tabs-panel[aria-expanded='true']"))},hideModal:function(a,b){$(a).dialog("close")},createModal:function(a,b,d,f,l,k,c){d=$.extend(!0,{},$.jgrid.jqModal||{},d);l=[];$("#"+a.themodal).dialog("destroy").remove();void 0===d.resize&&(d.resize=!0);k=-1<a.themodal.indexOf("viewmod",0)?!0:!1;var e=$(f).parent().parent().parent();$(e).append($("<div />").attr({id:a.themodal,
selector_type:k,"class":"FormElement ui-jqdialog-content",title:d.caption.replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,"")}).append($(b)));$("#"+a.themodal+" div").children("form").removeAttr("style").css("text-align","left").parent().children("table").hide();$("#"+a.themodal).children("table").hide();!0==d.viewPagerButtons&&(l[l.length]={text:"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0430\u044f",icons:{primary:"ui-icon-arrowthick-1-w"},showText:!1,click:function(){$(this).find("#pData").click()}},
l[l.length]={text:"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f",icons:{primary:"ui-icon-arrowthick-1-e"},showText:!1,click:function(){$(this).find("#nData").click()}});"undefined"!==$(b).find("#sData")&&(l[l.length]={text:d.bSubmit?d.bSubmit:"false",icons:{primary:d._savedData?"ui-icon-disk":"ui-icon-trash"},click:function(){"undefined"!==typeof d._savedData&&$(this).find("#sData").click();"undefined"!==typeof d.delData&&$(this).find("#dData").click();$(this).dialog("close")}});"undefined"===
$(b).find("#cData")||""===d.bCancel&&""===d.bClose||(l[l.length]={text:d.bCancel?d.bCancel:d.bClose,icons:{primary:"ui-icon-closethick"},click:function(){$(this).find("#cData").click();$(this).find("#eData").click();$(this).dialog("close")}});"undefined"!==typeof d.buttons&&(l=null);replace_select_opt_group();$("#"+a.themodal).dialog({autoOpen:!1,appendTo:e,modal:!1,minWidth:250,closeOnEscape:d.closeOnEscape,resizable:d.resize,buttons:l,close:function(){$(this).find("#cData").click();$(this).find("#eData").click();
$(this).dialog("close");$(e).children(".ui-widget-overlay").remove()},open:function(){!0==d.viewPagerButtons&&$(".ui-dialog-buttonpane").find('button:contains("false")').hide();$("<div>").addClass("ui-widget-overlay ui-front").prependTo($(e))}})}});$.jgrid.extend({filterToolbar:function(a){a=$.extend({autosearch:!0,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",stringResult:!1,groupOp:"AND",defaultSearch:"bw"},a||{});return this.each(function(){function b(a,
b){var d=$(a);d[0]&&jQuery.each(b,function(){void 0!==this.data?d.bind(this.type,this.data,this.fn):d.bind(this.type,this.fn)})}var d=this,f=$(this).parent().parent().parent().prop("id"),l=!1;if(!this.ftoolbar){var k=function(){var b={},c=0,g,e,h={},k;$.each(d.p.colModel,function(){e=this.index||this.name;k=this.searchoptions&&this.searchoptions.sopt?this.searchoptions.sopt[0]:"select"==this.stype?"eq":a.defaultSearch;g=$("#gs_"+f+"_"+$.jgrid.jqID(this.name),!0===this.frozen&&!0===d.p.frozenColumns?
d.grid.fhDiv:d.grid.hDiv).val();l=!0;if(g)" ui-icon  ui-icon-close"==$("#search_"+f+"_"+$.jgrid.jqID(this.name)).prop("class")&&$("#search_"+f+"_"+$.jgrid.jqID(this.name)).attr({"class":" ui-icon  ui-icon-radio-off",title:"\u0432\u0445\u043e\u0434\u0438\u0442",value:"LIKE"}),b[e]=$("#search_"+f+"_"+$.jgrid.jqID(this.name)).attr("value")+">"+$("#gs_"+f+"_"+$.jgrid.jqID(this.name)).prop("value"),h[e]=k,c++;else try{delete d.p.postData[e]}catch(m){}});var m=0<c?!0:!1;if(!0===a.stringResult||"local"==
d.p.datatype){var n='{"groupOp":"'+a.groupOp+'","rules":[',q=0;$.each(b,function(a,b){0<q&&(n+=",");n+='{"field":"'+a+'",';n+='"op":"'+h[a]+'",';n+='"data":"'+(b+"").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';q++});n+="]}";$.extend(d.p.postData,{filters:n});$.each(["searchField","searchString","searchOper"],function(a,b){d.p.postData.hasOwnProperty(b)&&delete d.p.postData[b]})}else $.extend(d.p.postData,b);var r;d.p.searchurl&&(r=d.p.url,$(d).jqGrid("setGridParam",{url:d.p.searchurl}));var u=
"stop"===$(d).triggerHandler("jqGridToolbarBeforeSearch")?!0:!1;!u&&$.isFunction(a.beforeSearch)&&(u=a.beforeSearch.call(d));u||$(d).jqGrid("setGridParam",{search:m}).trigger("reloadGrid",[{page:1}]);r&&$(d).jqGrid("setGridParam",{url:r});$(d).triggerHandler("jqGridToolbarAfterSearch");$.isFunction(a.afterSearch)&&a.afterSearch.call(d)},c=function(b){var c={},e=0,g;b="boolean"!=typeof b?!0:b;$.each(d.p.colModel,function(){var a;this.searchoptions&&void 0!==this.searchoptions.defaultValue&&(a=this.searchoptions.defaultValue);
g=this.index||this.name;$("#search_"+f+"_"+$.jgrid.jqID(this.name)).prop({"class":" ui-icon  ui-icon-close",title:"\u041d\u0435\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f",value:"NONE"});$("#gs_"+f+"_"+$.jgrid.jqID(this.name)).prop({value:""});switch(this.stype){case "select":$("#gs_"+$.jgrid.jqID(this.name)+" option",!0===this.frozen&&!0===d.p.frozenColumns?d.grid.fhDiv:d.grid.hDiv).each(function(b){0===b&&(this.selected=!0);if($(this).val()==a)return this.selected=!0,
!1});if(void 0!==a)c[g]=a,e++;else try{delete d.p.postData[g]}catch(b){}break;case "text":if($("#gs_"+$.jgrid.jqID(this.name),!0===this.frozen&&!0===d.p.frozenColumns?d.grid.fhDiv:d.grid.hDiv).val(a),void 0!==a)c[g]=a,e++;else try{delete d.p.postData[g]}catch(h){}}});var h=0<e?!0:!1;if(!0===a.stringResult||"local"==d.p.datatype){var k='{"groupOp":"'+a.groupOp+'","rules":[',l=0;$.each(c,function(a,b){0<l&&(k+=",");k+='{"field":"'+a+'",';k+='"op":"eq",';k+='"data":"'+(b+"").replace(/\\/g,"\\\\").replace(/\"/g,
'\\"')+'"}';l++});k+="]}";$.extend(d.p.postData,{filters:k});$.each(["searchField","searchString","searchOper"],function(a,b){d.p.postData.hasOwnProperty(b)&&delete d.p.postData[b]})}else $.extend(d.p.postData,c);var m;d.p.searchurl&&(m=d.p.url,$(d).jqGrid("setGridParam",{url:d.p.searchurl}));var n="stop"===$(d).triggerHandler("jqGridToolbarBeforeClear")?!0:!1;!n&&$.isFunction(a.beforeClear)&&(n=a.beforeClear.call(d));n||b&&$(d).jqGrid("setGridParam",{search:h}).trigger("reloadGrid",[{page:1}]);m&&
$(d).jqGrid("setGridParam",{url:m});$(d).triggerHandler("jqGridToolbarAfterClear");$.isFunction(a.afterClear)&&a.afterClear()},e=function(){var a=$("tr.ui-search-toolbar",d.grid.hDiv),b=!0===d.p.frozenColumns?$("tr.ui-search-toolbar",d.grid.fhDiv):!1;"none"==a.css("display")?(a.show(),$("#"+f).children(".ui-jqgrid-bdiv").height($("#"+f).children(".ui-jqgrid-bdiv").height()-27),l=!1,b&&b.show()):(a.hide(),$("#"+f).children(".ui-jqgrid-bdiv").height($("#"+f).children(".ui-jqgrid-bdiv").height()+27),
l&&c(),b&&b.hide())},h=$("<tr class='ui-search-toolbar' role='rowheader'></tr>"),g;$.each(d.p.colModel,function(){var c=this,e,l,p,m;l=$("<th role='columnheader' class='ui-state-default ui-th-column ui-th-"+d.p.direction+"'></th>");e=$("<div style='text-align:left;position:relative;vertical-align:middle'></div>");!0===this.hidden&&$(l).css("display","none");this.search=!1===this.search?!1:!0;"undefined"==typeof c.formatter&&(c.formatter="text");p=$.extend({},this.searchoptions||{});if(this.search)switch(c.formatter){case "select":if(m=
this.surl||p.dataUrl)$.ajax($.extend({url:m,dataType:"html",success:function(d){void 0!==p.buildSelect?(d=p.buildSelect(d))&&$(e).append(d):$(e).append(d);void 0!==p.defaultValue&&$("select",e).val(p.defaultValue);$("select",e).prop({name:c.index||c.name,id:"gs_"+f+"_"+c.name});$("select",e).css("float","left").css("padding-left","15px");$("select",e).prop("class","ui-state-default");p.prop&&$("select",e).prop(p.prop);$("select",e).css({width:"100%"});void 0!==p.dataInit&&p.dataInit($("select",e)[0]);
void 0!==p.dataEvents&&b($("select",e)[0],p.dataEvents);!0===a.autosearch&&$("select",e).change(function(){k();return!1});d=null}},$.jgrid.ajaxOptions,d.p.ajaxSelectOptions||{}));else{var n,q,r;c.searchoptions?(n=void 0===c.searchoptions.value?"":c.searchoptions.value,q=void 0===c.searchoptions.separator?":":c.searchoptions.separator,r=void 0===c.searchoptions.delimiter?";":c.searchoptions.delimiter):c.editoptions&&(n=void 0===c.editoptions.value?"":c.editoptions.value,q=void 0===c.editoptions.separator?
":":c.editoptions.separator,r=void 0===c.editoptions.delimiter?";":c.editoptions.delimiter);if(n){m=document.createElement("select");m.style.width="100%";$(m).prop({name:c.index||c.name,id:"gs_"+f+"_"+c.name});var s;if("string"===typeof n){n=n.split(r);for(var t=0;t<n.length;t++)s=n[t].split(q),r=document.createElement("option"),r.value=s[0],r.innerHTML=s[1],m.appendChild(r)}else if("object"===typeof n)for(s in n)n.hasOwnProperty(s)&&(r=document.createElement("option"),r.value=s,r.innerHTML=n[s],
m.appendChild(r));void 0!==p.defaultValue&&$(m).val(p.defaultValue);p.prop&&$(m).prop(p.prop);void 0!==p.dataInit&&p.dataInit(m);void 0!==p.dataEvents&&b(m,p.dataEvents);$(e).append(m);replace_select_opt_group($(e));$(e).children("select").multiselect({multiple:void 0===c.editoptions.multiple?!1:c.editoptions.multiple,minWidth:c.width,header:!1,selectedList:void 0===c.editoptions.size?1:c.editoptions.size}).css("padding","0.3em");!0===a.autosearch&&$(m).change(function(){k();return!1})}}break;case "checkbox":q=
void 0!==p.defaultValue?p.defaultValue:"";$(e).append("<input type='checkbox' class='ui-widget ui-widget-content ui-corner-all' name='"+(c.index||c.name)+"' id='gs_"+f+"_"+c.name+"' value=''/>");$(e).css("text-align","center");$(e).children("input").before("<label for='gs_"+f+"_"+c.name+"'>\u0412\u043a\u043b\u044e\u0447\u0435\u043d\u043e \u0438\u043b\u0438 \u0432\u044b\u043a\u043b\u044e\u0447\u0435\u043d\u043e</label>").button({icons:{primary:"ui-icon-check"},text:!1});p.prop&&$("input",e).prop(p.prop);
void 0!==p.dataInit&&p.dataInit($("input",e)[0]);void 0!==p.dataEvents&&b($("input",e)[0],p.dataEvents);!0===a.autosearch&&$("input",e).click(function(){"1"==$("input",e).prop("value")?$("input",e).prop({value:"0"}):$("input",e).prop({value:"1"});k()});break;case "date":q=void 0!==p.defaultValue?p.defaultValue:"";$(e).append("<input type='text' style='width:95%;padding-left:15px;' class='FormElement ui-widget ui-widget-content ui-corner-all' name='"+(c.index||c.name)+"' id='gs_"+f+"_"+c.name+"' value='"+
q+"'/>");p.prop&&$("input",e).prop(p.prop);void 0!==p.dataInit&&p.dataInit($("input",e)[0]);void 0!==p.dataEvents&&b($("input",e)[0],p.dataEvents);$("input",e).datetimepicker({changeYear:!0,firstDay:1,timeFormat:"HH:mm:ss"});!0===a.autosearch&&(a.searchOnEnter?$("input",e).keypress(function(a){return 13==(a.charCode?a.charCode:a.keyCode?a.keyCode:0)?(k(),!1):this}):$("input",e).keydown(function(a){switch(a.which){case 13:return!1;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:g&&
clearTimeout(g),g=setTimeout(function(){k()},500)}}));break;case "number":q=void 0!==p.defaultValue?p.defaultValue:"";$(e).append("<input type='text' class='FormElement' name='"+(c.index||c.name)+"' id='gs_"+f+"_"+c.name+"' style='float:left;width:93%;' value='"+q+"'/>");$(e).children("input").spinner({numberFormat:"n2",culture:"ru-RU",step:1}).css({width:"95%","padding-left":"15px"});p.prop&&$("input",e).prop(p.prop);void 0!==p.dataInit&&p.dataInit($("input",e)[0]);void 0!==p.dataEvents&&b($("input",
e)[0],p.dataEvents);!0===a.autosearch&&(a.searchOnEnter?$("input",e).keypress(function(a){return 13==(a.charCode?a.charCode:a.keyCode?a.keyCode:0)?(k(),!1):this}):$("input",e).keydown(function(a){switch(a.which){case 13:return!1;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:g&&clearTimeout(g),g=setTimeout(function(){k()},500)}}));break;default:q=void 0!==p.defaultValue?p.defaultValue:"",$(e).append("<input type='text' style='width:95%;padding-left:15px;' class='FormElement ui-widget ui-widget-content ui-corner-all' name='"+
(c.index||c.name)+"' id='gs_"+f+"_"+c.name+"' value='"+q+"'/>"),p.prop&&$("input",e).prop(p.prop),void 0!==p.dataInit&&p.dataInit($("input",e)[0]),void 0!==p.dataEvents&&b($("input",e)[0],p.dataEvents),!0===a.autosearch&&(a.searchOnEnter?$("input",e).keypress(function(a){return 13==(a.charCode?a.charCode:a.keyCode?a.keyCode:0)?(k(),!1):this}):$("input",e).keydown(function(a){switch(a.which){case 13:return!1;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:g&&clearTimeout(g),g=
setTimeout(function(){k()},500)}}))}"rn"!==c.name&&("checkbox"!==c.formatter&&"select"!==c.formatter)&&(e.append($("<span />").attr({"class":" ui-icon  ui-icon-close",id:"search_"+f+"_"+c.name,style:"float:left;top:3px;position: absolute; cursor: pointer;",title:"\u041d\u0435\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f",value:"NONE"})),$("span.ui-icon",e).click(function(){" ui-icon  ui-icon-close"==$(this).prop("class")?$(this).attr({"class":" ui-icon  ui-icon-notice",
title:"\u041d\u0435\u0440\u0430\u0432\u043d\u043e",value:"NOT"}):" ui-icon  ui-icon-notice"==$(this).prop("class")?$(this).attr({"class":" ui-icon  ui-icon-carat-1-e",title:"\u0411\u043e\u043b\u044c\u0448\u0435",value:"MORE"}):" ui-icon  ui-icon-carat-1-e"==$(this).prop("class")?$(this).attr({"class":" ui-icon  ui-icon-carat-1-w",title:"\u041c\u0435\u043d\u044c\u0448\u0435",value:"MINI"}):" ui-icon  ui-icon-carat-1-w"==$(this).prop("class")?$(this).attr({"class":" ui-icon  ui-icon-grip-solid-horizontal",
title:"\u0420\u0430\u0432\u043d\u043e",value:"EQUAL"}):" ui-icon  ui-icon-grip-solid-horizontal"==$(this).prop("class")?$(this).attr({"class":" ui-icon  ui-icon-radio-off",title:"\u0432\u0445\u043e\u0434\u0438\u0442",value:"LIKE"}):" ui-icon  ui-icon-radio-off"==$(this).prop("class")&&$(this).attr({"class":" ui-icon  ui-icon-close",title:"\u041d\u0435\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f",value:"NONE"})}));$(l).append(e);$(h).append(l)});$("table thead",d.grid.hDiv).append(h);
this.ftoolbar=!0;this.triggerToolbar=k;this.clearToolbar=c;this.toggleToolbar=e;e()}})}});var m=function(a,b){var d,f,l,k,c;l=a&2147483648;k=b&2147483648;d=a&1073741824;f=b&1073741824;c=(a&1073741823)+(b&1073741823);return d&f?c^2147483648^l^k:d|f?c&1073741824?c^3221225472^l^k:c^1073741824^l^k:c^l^k},n=function(a,b,d,f,l,k,c){a=m(a,m(m(b&d|~b&f,l),c));return m(a<<k|a>>>32-k,b)},r=function(a,b,d,f,l,k,c){a=m(a,m(m(b&f|d&~f,l),c));return m(a<<k|a>>>32-k,b)},s=function(a,b,d,f,l,k,c){a=m(a,m(m(b^d^f,
l),c));return m(a<<k|a>>>32-k,b)},q=function(a,b,d,f,l,k,c){a=m(a,m(m(d^(b|~f),l),c));return m(a<<k|a>>>32-k,b)},t=function(a){var b="",d="",f;for(f=0;3>=f;f++)d=a>>>8*f&255,d="0"+d.toString(16),b+=d.substr(d.length-2,2);return b};$.extend({md5:function(a){var b=[],d,f,l,k,c,e,h,g,b=a.replace(/\x0d\x0a/g,"\n");a="";for(d=0;d<b.length;d++)f=b.charCodeAt(d),128>f?a+=String.fromCharCode(f):(127<f&&2048>f?a+=String.fromCharCode(f>>6|192):(a+=String.fromCharCode(f>>12|224),a+=String.fromCharCode(f>>6&
63|128)),a+=String.fromCharCode(f&63|128));b=a;a=b.length;d=a+8;f=16*((d-d%64)/64+1);l=Array(f-1);for(c=k=0;c<a;)d=(c-c%4)/4,k=8*(c%4),l[d]|=b.charCodeAt(c)<<k,c++;d=(c-c%4)/4;l[d]|=128<<8*(c%4);l[f-2]=a<<3;l[f-1]=a>>>29;b=l;c=1732584193;e=4023233417;h=2562383102;g=271733878;for(a=0;a<b.length;a+=16)d=c,f=e,l=h,k=g,c=n(c,e,h,g,b[a+0],7,3614090360),g=n(g,c,e,h,b[a+1],12,3905402710),h=n(h,g,c,e,b[a+2],17,606105819),e=n(e,h,g,c,b[a+3],22,3250441966),c=n(c,e,h,g,b[a+4],7,4118548399),g=n(g,c,e,h,b[a+5],
12,1200080426),h=n(h,g,c,e,b[a+6],17,2821735955),e=n(e,h,g,c,b[a+7],22,4249261313),c=n(c,e,h,g,b[a+8],7,1770035416),g=n(g,c,e,h,b[a+9],12,2336552879),h=n(h,g,c,e,b[a+10],17,4294925233),e=n(e,h,g,c,b[a+11],22,2304563134),c=n(c,e,h,g,b[a+12],7,1804603682),g=n(g,c,e,h,b[a+13],12,4254626195),h=n(h,g,c,e,b[a+14],17,2792965006),e=n(e,h,g,c,b[a+15],22,1236535329),c=r(c,e,h,g,b[a+1],5,4129170786),g=r(g,c,e,h,b[a+6],9,3225465664),h=r(h,g,c,e,b[a+11],14,643717713),e=r(e,h,g,c,b[a+0],20,3921069994),c=r(c,e,
h,g,b[a+5],5,3593408605),g=r(g,c,e,h,b[a+10],9,38016083),h=r(h,g,c,e,b[a+15],14,3634488961),e=r(e,h,g,c,b[a+4],20,3889429448),c=r(c,e,h,g,b[a+9],5,568446438),g=r(g,c,e,h,b[a+14],9,3275163606),h=r(h,g,c,e,b[a+3],14,4107603335),e=r(e,h,g,c,b[a+8],20,1163531501),c=r(c,e,h,g,b[a+13],5,2850285829),g=r(g,c,e,h,b[a+2],9,4243563512),h=r(h,g,c,e,b[a+7],14,1735328473),e=r(e,h,g,c,b[a+12],20,2368359562),c=s(c,e,h,g,b[a+5],4,4294588738),g=s(g,c,e,h,b[a+8],11,2272392833),h=s(h,g,c,e,b[a+11],16,1839030562),e=s(e,
h,g,c,b[a+14],23,4259657740),c=s(c,e,h,g,b[a+1],4,2763975236),g=s(g,c,e,h,b[a+4],11,1272893353),h=s(h,g,c,e,b[a+7],16,4139469664),e=s(e,h,g,c,b[a+10],23,3200236656),c=s(c,e,h,g,b[a+13],4,681279174),g=s(g,c,e,h,b[a+0],11,3936430074),h=s(h,g,c,e,b[a+3],16,3572445317),e=s(e,h,g,c,b[a+6],23,76029189),c=s(c,e,h,g,b[a+9],4,3654602809),g=s(g,c,e,h,b[a+12],11,3873151461),h=s(h,g,c,e,b[a+15],16,530742520),e=s(e,h,g,c,b[a+2],23,3299628645),c=q(c,e,h,g,b[a+0],6,4096336452),g=q(g,c,e,h,b[a+7],10,1126891415),
h=q(h,g,c,e,b[a+14],15,2878612391),e=q(e,h,g,c,b[a+5],21,4237533241),c=q(c,e,h,g,b[a+12],6,1700485571),g=q(g,c,e,h,b[a+3],10,2399980690),h=q(h,g,c,e,b[a+10],15,4293915773),e=q(e,h,g,c,b[a+1],21,2240044497),c=q(c,e,h,g,b[a+8],6,1873313359),g=q(g,c,e,h,b[a+15],10,4264355552),h=q(h,g,c,e,b[a+6],15,2734768916),e=q(e,h,g,c,b[a+13],21,1309151649),c=q(c,e,h,g,b[a+4],6,4149444226),g=q(g,c,e,h,b[a+11],10,3174756917),h=q(h,g,c,e,b[a+2],15,718787259),e=q(e,h,g,c,b[a+9],21,3951481745),c=m(c,d),e=m(e,f),h=m(h,
l),g=m(g,k);return(t(c)+t(e)+t(h)+t(g)).toLowerCase()}});$.widget("ui.ace_editor",{options:{editor:null,mode:"ace/mode/pgsql",classes:"ui-widget-content ui-corner-all",resizable:!0,value:"",heigth:30,width:250},_create:function(){var a=this,b=a.element.attr("id"),d=$("#"+a.element.attr("id"));a.options.editor=ace.edit(b);a.options.editor.getSession().setMode(a.options.mode);a.options.editor.getSession().setValue(a.options.value);a.options.editor.getSession().on("change",function(){a._trigger("change",
a,a.options.editor.getSession().getValue())});a.options.editor.setHighlightActiveLine(!1);a.options.editor.renderer.setShowGutter(!1);a.options.editor.setShowPrintMargin(!1);d.width(a.options.width).height(a.options.heigth).addClass(a.options.classes).css("margin-left","5px");a.options.resizable&&d.resizable({resize:function(b,l){d.height($(this).height()).width($(this).width());a.options.editor.resize()}});a.options.editor.resize()},_setOption:function(a,b){$.Widget.prototype._setOption.apply(this,
arguments);switch(a){case "value":this.options.editor.getSession().setValue(b);this.options.value=b;break;case "heigth":this.options.heigth=b;break;case "width":this.options.width=b;break;case "resizable":this.options.resizable=b;break;case "classes":this.options.classes=b;break;case "mode":this.options.mode=b}}})});