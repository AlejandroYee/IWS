/*
 Andrey Lysikov (C) 2014
 Licensed under the MIT license:
   http://www.opensource.org/licenses/mit-license.php
 Part of IWS system
*/
jQuery.uiBackCompat=!1;jQuery.jgrid.no_legacy_api=!0;var counttab=1,sumtab=0,alert_enabled=0,hidden_menu=!1,user_not_logget=!0,main_menu_higth,slidebar="left",doc_height,doc_width,doc_title=null;
$(function(){custom_alert=function(b){title_msg="\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435:";-1!==b.search("ORA-")&&(title_msg="SQL \u041e\u0448\u0438\u0431\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438:");-1!==b.search("\u0437\u0430\u043f\u0440\u0435\u0449\u0435\u043d")&&(title_msg="\u0410\u0443\u043d\u0442\u0435\u0444\u0438\u043a\u0430\u0446\u0438\u044f:");b||(b="");$("<div />").html(b).dialog({title:title_msg,resizable:!1,minWidth:450,modal:!0,dialogClass:"alert",
buttons:{"\u0417\u0430\u043a\u0440\u044b\u0442\u044c":function(){$(this).dialog("close")}},open:function(){$(this).parent().css("z-index",9999).parent().children(".ui-widget-overlay").css("z-index",105)}})};trim_text=function(b,a,d){var c="";if(b.length<a)return b;b=b.split(" ");for(a=0;a<b.length;a++)if(c=c+" "+b[a],a>d-2)return c+"..."};plot_graph=function(b){$.ajax({url:b.attr("url"),type:"GET",success:function(a){"Not autorised"===a&&$(location).prop("href",location.href);a=jQuery.parseJSON(a);
var d=$("#"+b.attr("id")),c={canvas:!0,grid:{hoverable:!0,clickable:!0},legend:{backgroundOpacity:.8,show:a.legend},xaxis:a.xaxis,yaxes:a.yaxis,zoom:{interactive:!0},pan:{interactive:!1},crosshair:{mode:"xy"}};$.extend(c,a.options);0===b.children().length?($.plot(d,a.data,c),d.bind("plothover",function(b,a,c){a=d.is(":ui-tooltip");b=$.ui.tooltip.prototype.options.position;null!==c&&!1===a?(a=c.series.label+": "+c.series.data[c.dataIndex][0]+", "+c.datapoint[1],c=$.extend(b,{of:{pageX:c.pageX,pageY:c.pageY,
preventDefault:$.noop}}),d.tooltip({position:c,content:a,items:"*"}).tooltip("open")):null===c&&!0===a&&d.tooltip("destroy")}),$("<div><b>"+a.chart_label+"</b></div>").insertBefore(b)):$.plot(d,a.data,c);0<a.xaxis.labelAngle&&b.find(".flot-x-axis").children(".flot-tick-label").css({"-webkit-transform":"translateX(50%) rotate("+a.xaxis.labelAngle+"deg)","-moz-transform":"translateX(50%) rotate("+a.xaxis.labelAngle+"deg)","-ms-transform":"translateX(50%) rotate("+a.xaxis.labelAngle+"deg)","-o-transform":"translateX(50%) rotate("+
a.xaxis.labelAngle+"deg)",transform:"translateX(50%) rotate("+a.xaxis.labelAngle+"deg)","transform-origin":"3px 3px 0px","-ms-transform-origin":"3px 3px 0px","-moz-transform-origin":"3px 3px 0px","-webkit-transform-origin":"3px 3px 0px","-o-transform-origin":"3px 3px 0px"})}})};SetTab=function(b,a,d){if("false"!==d){var c=d;$("."+c).remove();$("#"+c).empty();""!==b&&($("#ui-"+c).text(trim_text(b,40,3)),$("#ui-"+c).prop("title",b))}else c="tabs_"+counttab,sumtab++,$("#tabs").children(".ui-tabs-nav").append($("<li />").css("style",
"cursor:default;").append($("<a />").css("style","cursor:default;").attr({href:"#"+c,title:b,id:"ui-"+c}).append('<span style="float:right;left:10px;cursor:default;">'+trim_text(b,40,3)+"</span>").append('<span class="ui-icon ui-icon-document" style="float:left;top:5px;cursor:default;"></span>')).append($("<span />").attr({"class":"ui-icon ui-icon-close",style:"float:left;cursor:pointer"}).on("touchend click",function(){CloseTab($(this).parent().attr("aria-controls"))}))),$("#tabs").append($("<div />").attr({id:c,
style:"overflow:hide;width:"+(doc_width-18)+"px"}));$("#"+c).append("<div class='loader_tab' style='overflow:hide'><div>");a=a+"&tabid="+c;$("#tabs").tabs("refresh");"false"===d&&$("#tabs").tabs("option","active",$("#tabs").children(".ui-tabs-nav li").length-1);$("#"+c).attr({need_redraw:!0});redraw_document();$.ajax({url:a,type:"GET",success:function(b){"Not autorised"!==b?($.each($("#"+c).find(".ui-jqgrid"),function(){$("#"+$(this).attr("id")).jqGrid("GridDestroy")}),$("#"+c).empty().css("text-align",
"left").attr({need_redraw:!0}),$("#"+c).append($(b).fadeIn(300)),redraw_document($(".ui-tabs-panel[aria-expanded='true']"))):$(location).prop("href",location.href)}});counttab++};CloseTab=function(b){var a=$("#ui-"+b).parent().closest("li").remove().attr("aria-controls");$("#tabs").tabs("refresh");sumtab--;redraw_document($(".ui-tabs-panel[aria-expanded='true']"));0===$(".ui-tabs-nav li[aria-selected='true']").length&&(document.title=doc_title);$("#"+a).remove();$("."+b).remove();0!==sumtab||enable_menu||
$(".slidebarmenu").SlidebarMenu("open")};redraw_document=function(b){$("body").width(doc_width).height(doc_height);$(".user_login").css({top:doc_height/2-175,left:doc_width/2-200});$.browser.msie&&$(".post_form_login").css("top","110px");"undefined"===typeof b&&(b=$($(".ui-tabs-panel[aria-expanded='true']")));if(b.attr("need_redraw")||0===b.length)$("#tabs").tabs().height(doc_height-main_menu_higth-10),$("#tabs .ui-tabs-panel").height(doc_height-main_menu_higth-10).width(doc_width-20),$(".about_tabs").offset({top:doc_height-
50}),$(".about_tabs_ver").offset({top:doc_height-25}),b.children(".tab_main_content").height(doc_height-main_menu_higth-90).width(doc_width-20),b.attr({need_redraw:!1}).children(".navigation_header").height(30);$(".dialog_jqgrid_overlay").height(doc_height-main_menu_higth-88).width(doc_width-24).offset({top:main_menu_higth+30+50,left:12});b.css("overflow","hidden");if(0<b.find(".help_content").length){var a=b.find(".help_content"),d=b.children(".ui-accordion-header"),c=doc_height-main_menu_higth-
150-2.05*d.height()*(d.length-1);a.height(doc_height-main_menu_higth-90).width(doc_width-20);d.width(doc_width-65);a.children(".ui-accordion-content").height(c).width(doc_width-87)}$.each(b.find(".grid_resizer, .grid_resizer_tabs"),function(){var b=$(this),a=b.attr("form_type"),c=b.attr("percent");b.attr("detail_sub_tab")?(c-=33/(doc_height/100),c=(doc_height-main_menu_higth-93)/100*c-23,doc_width_grid=doc_width-48,add_to_koeff=0):(c=90>c&&10<c||0<b.attr("percent_saved")?(doc_height-main_menu_higth-
93)/100*c:doc_height-main_menu_higth-93,doc_width_grid=doc_width-27,add_to_koeff=20);a="TREE_GRID_FORM_DETAIL"!==a&&"TREE_GRID_FORM"!==a?"none"!==b.children(".ui-jqgrid").find(".ui-search-toolbar").css("display")&&"TREE_GRID_FORM_MASTER"!==a?82+add_to_koeff:55+add_to_koeff:82;b.height(c).width(doc_width_grid);b.height(c).children(".ui-jqgrid").height(c-2).width(doc_width_grid).children(".ui-jqgrid-pager").height(25).width(doc_width_grid).parent().children(".ui-jqgrid-view").height(c-27).width(doc_width_grid).children(".ui-jqgrid-hdiv").width(doc_width_grid).parent().children(".ui-jqgrid-bdiv").height(c-
a).width(doc_width_grid);var d=b.find(".frozen-div");$.each(d,function(){var a=d.children("table").width(),c=b.find(".ui-jqgrid-titlebar").outerHeight();d.width(a).css("top",c+1+"px");d.parent().children(".frozen-bdiv").width(a).height(b.find(".ui-jqgrid-bdiv")[0].clientHeight+1).css("top",c+b.find(".ui-jqgrid-hbox").outerHeight()+1+"px")})});$.each($(".grid_resizer[form_type$='_DETAIL'] div.ui-jqgrid-titlebar, .detail_tab .ui-tabs-nav"),function(){1>$(this).children("div[control='window']").length&&
(button_htm_down=$("<span>").attr({style:"float:right;cursor: pointer","class":"ui-icon ui-icon-circle-triangle-n",title:"\u0420\u0430\u0441\u043f\u0430\u0445\u043d\u0443\u0442\u044c \u043d\u0430 \u0432\u0441\u0435 \u043e\u043a\u043d\u043e/\u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"}).click(function(){upper=$(".ui-tabs-panel[aria-expanded='true'] .grid_resizer:first");downn=$(".ui-tabs-panel[aria-expanded='true'] .grid_resizer:last,.ui-tabs-panel[aria-expanded='true'] .grid_resizer_tabs");
$(".ui-tabs-panel[aria-expanded='true'] .ui-icon-circle-triangle-s").show();0<upper.attr("percent_saved")?(upper.attr("percent",upper.attr("percent_saved")).removeAttr("percent_saved"),downn.attr("percent",downn.attr("percent_saved")).removeAttr("percent_saved"),downn.show(),$(this).parent().remove()):(upper.attr("percent_saved",upper.attr("percent")).attr("percent",0),downn.attr("percent_saved",downn.attr("percent")).attr("percent",100),upper.hide(),$(this).hide());redraw_document($(".ui-tabs-panel[aria-expanded='true']"))}),
button_htm_up=$("<span>").attr({style:"float:right;cursor: pointer","class":"ui-icon ui-icon-circle-triangle-s",title:"\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c/\u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"}).click(function(){upper=$(".ui-tabs-panel[aria-expanded='true'] .grid_resizer:first");downn=$(".ui-tabs-panel[aria-expanded='true'] .grid_resizer:last,.ui-tabs-panel[aria-expanded='true'] .grid_resizer_tabs");$(".ui-tabs-panel[aria-expanded='true'] .ui-icon-circle-triangle-n").show();
0<upper.attr("percent_saved")?(upper.attr("percent",upper.attr("percent_saved")).removeAttr("percent_saved"),downn.attr("percent",downn.attr("percent_saved")).removeAttr("percent_saved"),upper.show(),$(this).show()):(upper.attr("percent_saved",upper.attr("percent")).attr("percent",100),downn.attr("percent_saved",downn.attr("percent")).attr("percent",0),downn.hide(),$(this).hide(),$(".ui-tabs-panel[aria-expanded='true'] div[control='window']").appendTo(upper.find(".ui-jqgrid-titlebar")));redraw_document($(".ui-tabs-panel[aria-expanded='true']"))}),
$(this).append($('<div control="window" style="float:right;"></div>').append(button_htm_up,button_htm_down)))});7<sumtab?(alert_enabled=1,$.each($(".navigation_header"),function(){1!==$(this).children(".alert_button").length&&$(this).append("<div class='alert_button ui-state-error ui-corner-all' style='float:right;width:100px;margin: 6px 15px 5px 5px;' title='\u041e\u0442\u043a\u0440\u044b\u0442\u043e \u0431\u043e\u043b\u0435\u0435 7 \u0432\u043a\u043b\u0430\u0434\u043e\u043a \u043e\u0434\u043d\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e,\u044d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0441\u0438\u043b\u044c\u043d\u043e \u0437\u0430\u043c\u0435\u0434\u043b\u0438\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u0443 \u0441\u0438\u0441\u0442\u0435\u043c\u044b. \u041f\u043e \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438 \u0437\u0430\u043a\u0440\u043e\u0439\u0442\u0435 \u043e\u0434\u043d\u0443 \u0438\u043b\u0438 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0432\u043a\u043b\u0430\u0434\u043e\u043a.'><span class='ui-icon ui-icon-alert' style='float:left'></span>\u0412\u041d\u0418\u041c\u0410\u041d\u0418\u0415!</div>")})):
0<alert_enabled&&(alert_enabled=0,$(".navigation_header .alert_button").remove())};replace_select_opt_group=function(b){"undefined"===typeof b&&(b=$("body"));$.each($(b).find("select option[value='GROUP_START']"),function(){$(this).replaceWith("<optgroup label='"+$(this).text()+"' >")});$.each($(b).find("select option[value='GROUP_END']"),function(){var b=$(this).parent(),d=b.children("option:selected");if("undefined"!==typeof b.html()){var c=$(b.html().split("</optgroup>").join("").split('<option value="GROUP_END"></option>').join("</optgroup>").split('<option role="option" value="GROUP_END"></option>').join("</optgroup>"));
c.children('option[value="'+d.attr("value")+'"]').attr("selected","selected");b.empty().append(c)}})};set_resizers=function(){$(".has_resize_control").resizable({distance:30,handles:"s",resize:function(b,a){var d=doc_height-93,c=100+(a.size.height-d)/Math.abs(d)*100,d=100-c;if(10<c&&95>c&&10<d&&95>d)switch(c=$(this).attr("percent",c),c.attr("form_type")){case "GRID_FORM_MASTER":c.parent().children("div[form_type='GRID_FORM_DETAIL']").attr("percent",d);c.parent().children("div[form_type='TABED_GRID_FORM']").attr("percent",
d).children(".ui-tabs-panel").children(".grid_resizer_tabs").attr("percent",d);break;case "TREE_GRID_FORM_MASTER":c.parent().children("div[form_type='TREE_GRID_FORM_DETAIL']").attr("percent",d);c.parent().children("div[form_type='TABED_GRID_FORM']").attr("percent",d).children(".ui-tabs-panel").children(".grid_resizer_tabs").attr("percent",d);break;default:c.parent().children("div[form_type='GRID_FORM']").attr("percent",d)}},create:function(b,a){$(this).children(".ui-resizable-handle").height(5.3).attr("align",
"center").append($("<div />").addClass("ui-widget-header ui-state-hover ui-corner-all").height(2).width(150))}})};set_detail_tab=function(){$(".detail_tab").tabs({collapsible:!0,heightStyle:"fill",activate:function(b,a){"true"===$("#"+a.newTab.attr("aria-controls")).children(".grid_resizer_tabs").attr("need_update")&&($("#"+$("#"+a.newTab.attr("aria-controls")).children(".grid_resizer_tabs").attr("for")).jqGrid().trigger("reloadGrid",!0),$("#"+a.newTab.attr("aria-controls")).children(".grid_resizer_tabs").attr("need_update",
"false"));redraw_document(a.newPanel)}})};$(document).ready(function(){$.browser.msie&&$(".ui-menu-item a").append("&nbsp;&nbsp;&nbsp;&nbsp;");doc_height=$(window).height();doc_width=$(window).width()-2;user_not_logget||(enable_menu?($(".slidebarmenu").menubar({menuIcon:!0}).css({"text-align":"left"}),main_menu_higth=$(".slidebarmenu").height()):(main_menu_higth=0,$(".slidebarmenu").SlidebarMenu({onClose:function(){return 0<sumtab?!0:!1},position:slidebar,resizable:!0}).SlidebarMenu("open"),$("#tabs").children(".ui-tabs-nav").append("<div class='tab-nav-sb sb-toggle' style='float: "+
slidebar+";' title='\u0413\u043b\u0430\u0432\u043d\u043e\u0435 \u043c\u0435\u043d\u044e'><div class='ui-state-active navicon-line sb-toggle'></div><div class='ui-state-active navicon-line sb-toggle'></div><div class='ui-state-active navicon-line sb-toggle'></div></div>"),$(".sb-toggle").click(function(){$(".slidebarmenu").SlidebarMenu("toggle")})));redraw_document();$("#loading").fadeOut()});$(window).resize(function(){$(".ui-tabs-panel").attr({need_redraw:!0});doc_height=$(window).height();doc_width=
$(window).width()-2;redraw_document($(".ui-tabs-panel[aria-expanded='true']"));enable_menu||$(".slidebarmenu").SlidebarMenu("resize")});$("#password").keyup(function(b){13===b.keyCode&&$("#logon_btn").click()});$(".iws_param").dialog({autoOpen:!1,modal:!0,minWidth:450,closeOnEscape:!0,resizable:!1,buttons:{"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c":function(){$("#btn_opt_cancel").button("option","disabled",!0);$("#btn_opt_save").button("option","disabled",!0);var b=[];$.each($(this).find("input, select, textarea"),
function(){var a=$(this);void 0!==a.attr("name")&&("checkbox"===a.attr("type")?b[a.attr("name")]="checked"===a.attr("checked")?"on":"off":b[a.attr("name")]=a.val())});b=$.extend({},b);$.ajax({url:location.href+"ajax.saveparams.php",datatype:"json",data:b,cache:!1,type:"POST",success:function(b){$(location).prop("href",location.href)}})},"\u041e\u0442\u043c\u0435\u043d\u0430":function(){$(this).dialog("close")}},close:function(){$(this).dialog("close")},open:function(){$(".ui-dialog-buttonpane").find('button:contains("\u041e\u0442\u043c\u0435\u043d\u0430")').button({icons:{primary:"ui-icon-close"}}).prop("id",
"btn_opt_cancel");$(".ui-dialog-buttonpane").find('button:contains("\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c")').button({icons:{primary:"ui-icon-disk"}}).prop("id","btn_opt_save");$(this).parent().css("z-index",805).parent().children(".ui-widget-overlay").css("z-index",800)}});$(".iws_about").dialog({autoOpen:!1,modal:!0,minWidth:650,closeOnEscape:!0,resizable:!1,close:function(){$(this).dialog("close")},open:function(){$(this).parent().css("z-index",805).parent().children(".ui-widget-overlay").css("z-index",
800)}});$("#themeselector").multiselect({multiple:!1,header:!1,selectedList:1});$("#editabled,#cache_enable,#slidebar_right").iosCheckbox();$("#random_theme").iosCheckbox({checked:function(){$("#themeselector").multiselect("disable")},unchecked:function(){$("#themeselector").multiselect("enable")}});$("#enable_menu").iosCheckbox({checked:function(){$("#slidebar_right").iosCheckbox("disable")},unchecked:function(){$("#slidebar_right").iosCheckbox("enable")}});$("#renderer").slider({range:"min",value:$("#render_type").val(),
min:0,max:3,step:1,slide:function(b,a){$.browser.msie&&2<=a.value?($("#render_type").val(2),$(this).slider({value:2})):$("#render_type").val(a.value)}}).height(8).children("a").css("border-radius","100%");$("#num_mounth").spinner({spin:function(b,a){if(6<a.value)return $(this).spinner("value",1),!1;if(1>a.value)return $(this).spinner("value",6),!1}});$("#num_reck").spinner({step:10,spin:function(b,a){if(5E3<a.value)return $(this).spinner("value",1),!1;if(1>a.value)return $(this).spinner("value",5E3),
!1}});$("#tabs").tabs({collapsible:!1,heightStyle:"fill",activate:function(b,a){null===doc_title&&(doc_title=document.title);document.title=doc_title+" [ "+$(a.newTab).children("a").attr("title")+" ]";redraw_document(a.newPanel)}}).find(".ui-tabs-nav").sortable({axis:"x",placeholder:"ui-state-highlight",distance:10,stop:function(){$("#tabs").tabs("refresh");redraw_document($(".ui-tabs-panel[aria-expanded='true']"))}}).disableSelection();$("#logon_btn").button().click(function(b){var a=$("#username").val(),
d=$("#password").val();$("#login_form").fadeOut(500);setTimeout(function(){$("#loading_text").text("\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...")},500);setTimeout(function(){if(""===a.replace(/\s/g,""))return custom_alert("\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f!"),$("#loading_text").empty(),$("#login_form").fadeIn(500),!1;if(""===d.replace(/\s/g,
""))return custom_alert("\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c!"),$("#loading_text").empty(),$("#login_form").fadeIn(500),!1;if(!0===function(b){for(i=0;32>i;i++)if(-1<b.indexOf("<>@!#$%^&*()_+[]{}?:;|'\"\\,./~`-="[i]))return!0;return!1}(d))return custom_alert('\u041f\u0430\u0440\u043e\u043b\u044c \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u043e\u0434\u0438\u043d \u0438\u043b\u0438 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0435\u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b \u0434\u043b\u044f \u043b\u043e\u0433\u0438\u043d\u0430 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 \u0441\u0438\u043c\u0432\u043e\u043b\u044b ".",",","&#60;","&#62;" \u0430 \u0442\u0430\u043a\u0436\u0435 \u043d\u0435\u043a\u043e\u0442\u043e\u044b\u0435 \u0434\u0440\u0443\u0433\u0438\u0435 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0435 \u0441\u0438\u043c\u0432\u043e\u043b\u044b.'),
$("#loading_text").empty(),$("#login_form").fadeIn(500),!1;$.ajax({url:"ajax.saveparams.php?act=login",datatype:"json",data:{username:$("#username").val(),password:$("#password").val()},cache:!1,type:"POST",success:function(b){"true"!=b?(custom_alert("\u041d\u0435\u0432\u0435\u0440\u043d\u043e\u0435 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c!"),$("#loading_text").empty(),$("#login_form").fadeIn(500)):
(setTimeout(function(){$("#loading").fadeIn(300)},500),setTimeout(function(){$.ajax({success:function(b){$("body").html(b);$("body").children("meta").remove();$("body").children('link[rel!="stylesheet"]').remove();$("body").children("title").remove();$("head").children('style[type="text/css"]').remove();$("head").children('link[rel="stylesheet"]').remove();$("head").children('link[rel="stylesheet"]').remove();$("head").children('script[type="text/javascript"]').remove()}})},1E3))}})},1E3);return!1});
$(".help_button").button({icons:{primary:"ui-icon-help"},text:!1}).attr("style","float: right;").appendTo("#tabs .ui-tabs-nav").click(function(){SetTab("\u0418\u043d\u0434\u0435\u043a\u0441 \u0441\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u043e\u0433\u043e \u0440\u0430\u0437\u0434\u0435\u043b\u0430",$(this).attr("url"),"false")});$("#tabs").children(".ui-tabs-nav").append($("<button>\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0432\u0441\u0435 \u0432\u043a\u043b\u0430\u0434\u043a\u0438</button>").attr({id:"close_all_tab",
style:"float: right;margin: 0px 5px 3px 0px;"}).button({icons:{primary:"ui-icon-closethick"},text:!1}).click(function(){$.each($("#tabs .ui-tabs-nav li"),function(){CloseTab($(this).attr("aria-controls"))})}));$("#tabs").children(".ui-tabs-nav").append($("<button>\u0420\u0430\u0441\u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0443\u044e \u043e\u0442\u043a\u0440\u044b\u0442\u0443\u044e \u0432\u043a\u043b\u0430\u0434\u043a\u0443</button>").attr({id:"print_this_tab",
style:"float: right;margin: 0px 5px 3px 0px;"}).button({icons:{primary:"ui-icon-print"},text:!1}).click(function(){var b=$(".ui-tabs-panel[aria-expanded='true'] .tab_main_content").find(".ui-jqgrid-view table, .FormGrid table, .chart").clone();b.removeAttr("height class top left");$(b).printThis({printContainer:!1,importCSS:!1,loadCSS:"/library/print.css",debug:!1})}));check_form=function(b){var a=!0;$.each(b.find("input[is_requred='true']"),function(){""===$.trim($(this).val())&&($(this).addClass("ui-state-error"),
$("#clone_"+$(this).attr("id")).parent().addClass("ui-state-error"),$(this).parent().children(".ui-button").addClass("ui-state-error"),a=!1)});$.each(b.find("select[is_requred='true']"),function(){""===$.trim($(this).val())&&($(this).addClass("ui-state-error"),$(this).parent().children("button").addClass("ui-state-error"),a=!1)});$.each(b.find("textarea[is_requred='true']"),function(){""===$.trim($(this).val())&&($(this).addClass("ui-state-error"),$(this).parent().children(".ace_scroller").addClass("ui-state-error"),
a=!1)});if(a)return!0;custom_alert("\u041d\u0435 \u0432\u0441\u0435 \u043f\u043e\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u044b, \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0435 \u044f\u0447\u0435\u0439\u043a\u0438.");return!1};create_from_table_elements=function(b){var a=b.attr("id").split("_"),d=a[a.length-2]+"_"+a[a.length-1],c=0;$.each(b.find("input, select, textarea"),function(){var a=$(this);a.width(a.attr("w")).addClass(d);
switch(a.attr("row_type")){case "I":case "N":case "NL":case "C":sp_value=a.val();a.spinner();"N"===a.attr("row_type")?a.spinner("option","culture","ru-RU").spinner("option","numberFormat","n2").spinner("option","step","0.01"):"NL"===a.attr("row_type")?a.spinner("option","culture","ru-RU").spinner("option","numberFormat","n7").spinner("option","step","0.0000001"):"C"===a.attr("row_type")&&a.spinner("option","culture","ru-RU").spinner("option","numberFormat","n2").spinner("option","step","0.01");a.removeClass("ui-widget-content ui-corner-all").calculator({useThemeRoller:!0,
showAnim:"",showOn:"",onButton:function(b,c,d){a.spinner("value",c)}});$($("<button>\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440</button>").button({icons:{primary:"ui-icon-calculator"},text:!1}).click(function(b){a.calculator("show")})).insertAfter(a.parent());"undefined"!==typeof a.attr("show_disabled")&&"false"!==a.attr("show_disabled")&&(a.spinner("option","disabled"),a.parent().parent().children(".ui-button").remove());a.spinner("value",
sp_value);break;case "P":a.attr("value","");break;case "B":a.iosCheckbox();break;case "MAS":var f=a.attr("case");a.mask(a.attr("mask"),{onKeyPress:function(a,b,c){switch(f){case "U":$(c).val(a.toUpperCase());break;case "L":$(c).val(a.toLowerCase())}}});break;case "D":a.datepicker({showOn:"button",showWeek:!0,numberOfMonths:num_of_mounth,changeYear:!0,firstDay:1}).addClass(d).parent().children(".ui-datepicker-trigger").button({icons:{primary:"ui-icon-calendar"},text:!1}).addClass(d);break;case "DT":a.datetimepicker({showWeek:!0,
numberOfMonths:num_of_mounth,changeYear:!0,firstDay:1,timeFormat:"HH:mm:ss",showOn:"button",controlType:{create:function(a,b,c,d,e,f,g){$('<input class="ui-timepicker-input" value="'+d+'" style="width:50px">').appendTo(b).spinner({min:e,max:f,step:g,change:function(b,c){void 0!==b.originalEvent&&a._onTimeChange();a._onSelectHandler()},spin:function(d,e){a.control.value(a,b,c,e.value);a._onTimeChange();a._onSelectHandler()}});return b},options:function(a,b,c,d,e){return"string"===typeof d&&void 0!==
e?b.find(".ui-timepicker-input").spinner(d,e):b.find(".ui-timepicker-input").spinner(d)},value:function(a,b,c,d){return void 0!==d?b.find(".ui-timepicker-input").spinner("value",d):b.find(".ui-timepicker-input").spinner("value")}}}).addClass(d).parent().children(".ui-datepicker-trigger").button({icons:{primary:"ui-icon-calendar"},text:!1}).addClass(d);break;case "SB":a.multiselect({multiple:a.attr("multiple")?!0:!1,minWidth:255>a.attr("w")?255:a.attr("w"),header:!0,height_button:29,selectedList:a.attr("size")?
a.attr("size"):1}).multiselectfilter().addClass(d);break;case "M":"true"!==a.attr("show_disabled")&&setTimeout(function(){a.before($("<div />").attr({id:"editor_"+a.attr("name")}));$("#editor_"+a.attr("name")).ace_editor({width:a.attr("w"),heigth:50<12*a.attr("rows")?12*a.attr("rows"):50,mode:"ace/mode/pgsql",classes:"FormElement ui-widget-content ui-corner-all",resizable:!0,value:a.val(),change:function(b,c){"object"===typeof c?a.val(""):a.val(c)}}).addClass(d).css({"margin-left":"0px;"});a.hide()},
50)}"undefined"!==typeof a.attr("field_has_sql")&&"SB"!==a.attr("row_type")&&($($("<button>\u0420\u0430\u0441\u0447\u0438\u0442\u0430\u0442\u044c/\u0432\u0441\u0442\u0430\u0432\u0438\u0442\u044c/\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435</button>").button({icons:{primary:"ui-icon-refresh"},text:!1}).addClass("have_sql_action").click(function(c){var d=[];$.each(b.find("input, select, textarea"),function(){var a=$(this);void 0!==a.attr("name")&&
("B"===a.attr("row_type")?d[a.attr("name")]="checked"===a.attr("checked")?1:0:d[a.attr("name")]=a.val())});d=$.extend({},d);$.ajax({url:"ajax.data.field.php?type=field&value_name="+a.attr("name")+"&form_id="+a.attr("form_id"),datatype:"json",data:d,cache:!1,type:"POST",success:function(c){a.val(c);update_table_elemnts(b,a)}});return!1})).insertAfter(b.find("#tr_"+a.attr("id")+" .DataTD").children(":last")),$(this).width($(this).width()+20));if("undefined"!==typeof a.attr("show_disabled")&&"false"!==
a.attr("show_disabled"))switch(a.attr({name:null,disabled:"disabled"}).addClass("FormElement ui-widget-content ui-corner-all ui-state-disabled"),"undefined"!==typeof a.attr("field_has_sql")&&a.parent().children(".have_sql_action").button("option","disabled",!0),a.attr("row_type")){case "I":case "N":case "NL":case "C":a.spinner({disabled:!0});break;case "D":case "DT":a.datepicker("option","disabled",!0);a.parent().children(".ui-datepicker-trigger").remove();break;case "SB":a.multiselect("disable")}$(this).width()>
c&&(c=$(this).width())});return c};hashCode=function(b){return b.split("").reduce(function(a,b){a=(a<<5)-a+b.charCodeAt(0);return a&a},0)};update_table_elemnts=function(b,a){var d="undefined"===typeof a?b.find("input, select, textarea"):a;$.each(d,function(){var a=$(this);a.removeClass("ui-state-error");$("#clone_"+a.attr("id")).parent().removeClass("ui-state-error");a.parent().children(".ui-button").removeClass("ui-state-error");a.parent().children("button").removeClass("ui-state-error");a.parent().children(".ace_scroller").removeClass("ui-state-error");
switch(a.attr("row_type")){case "I":case "N":case "NL":case "C":a.spinner("value",a.val());break;case "P":a.attr("value","");break;case "B":a.iosCheckbox("refresh");break;case "D":case "DT":strs=a.val();1<strs.length&&a.datepicker("setDate",a.val());break;case "SB":if(a.attr("multiple"))a.multiselect("refresh");else{var b=a.find("option:selected").text();a.multiselect("setButtonValue",b);a.multiselect("widget").find("input:checked").removeAttr("checked").removeAttr("aria-selected").parent().removeClass("ui-state-active ui-state-hover");
$.each(a.multiselect("widget").find("span:contains('"+b+"')"),function(){""!==b&&$(this).text()===b&&$(this).parent().addClass("ui-corner-all ui-state-active ui-state-hover").children("input").attr("checked","checked").attr("aria-selected",!0)});"undefined"!==typeof a.attr("show_disabled")&&"false"!==a.attr("show_disabled")&&(a.multiselect("disable"),a.multiselect("refresh"))}break;case "M":"true"!==a.attr("show_disabled")&&$("#editor_"+a.attr("name")).ace_editor({value:a.val()})}})};get_select_values_grid=
function(b,a,d){$.ajax({url:"ajax.data.field.php?type=select&value_name="+a+"&parent_id="+d,datatype:"json",cache:!1,type:"GET",success:function(c){$("#"+b).jqGrid("setColProp",a,{editoptions:{value:c},searchoptions:{value:":;"+c}});$("#"+b).attr("new_colmodel",!0)}})};$.calculator.regionalOptions.ru={decimalChar:".",buttonText:"...",buttonStatus:"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440",closeText:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",
closeStatus:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440",useText:"OK",useStatus:"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0435\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0432 \u043f\u043e\u043b\u0435",eraseText:"\u0421\u0431\u0440\u043e\u0441",eraseStatus:"\u0421\u0442\u0435\u0440\u0435\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435",backspaceText:"<-",
backspaceStatus:"\u0421\u0442\u0435\u0440\u0435\u0442\u044c \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u044e\u044e \u0446\u0438\u0444\u0440\u0443",clearErrorText:"CE",clearErrorStatus:"\u0421\u0442\u0435\u0440\u0435\u0442\u044c \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0435 \u0447\u0438\u0441\u043b\u043e",clearText:"\u0421",clearStatus:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c",memClearText:"MC",memClearStatus:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u043f\u0430\u043c\u044f\u0442\u044c",
memRecallText:"MR",memRecallStatus:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0438\u0437 \u043f\u0430\u043c\u044f\u0442\u0438",memStoreText:"MS",memStoreStatus:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0432 \u043f\u0430\u043c\u044f\u0442\u044c",memAddText:"M+",memAddStatus:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043f\u0430\u043c\u044f\u0442\u044c",memSubtractText:"M-",memSubtractStatus:"\u0412\u044b\u0447\u0435\u0441\u0442\u044c \u0438\u0437 \u043f\u0430\u043c\u044f\u0442\u0438",
base2Text:"\u0411\u0438\u043d",base2Status:"\u0411\u0438\u043d\u0430\u0440\u043d\u044b\u0439",base8Text:"\u0412\u043e\u0441\u043c",base8Status:"\u0412\u043e\u0441\u043c\u0435\u0440\u0438\u0447\u043d\u044b\u0439",base10Text:"\u0414\u0435\u0441",base10Status:"\u0414\u0435\u0441\u044f\u0442\u0438\u0447\u043d\u044b\u0439",base16Text:"\u0428\u0435\u0441\u0442",base16Status:"\u0428\u0435\u0441\u0442\u043d\u0430\u0434\u0446\u0430\u0442\u0438\u0440\u0438\u0447\u043d\u044b\u0439",degreesText:"\u0413\u0440\u0430\u0434",
degreesStatus:"\u0413\u0440\u0430\u0434\u0443\u0441\u044b",radiansText:"\u0420\u0430\u0434",radiansStatus:"\u0420\u0430\u0434\u0438\u0430\u043d\u044b",isRTL:!1};$.calculator.setDefaults($.calculator.regionalOptions.ru);$.extend($.ech.multiselectfilter.prototype.options,{label:"\u0424\u0438\u043b\u044c\u0442\u0440:",placeholder:"\u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043b\u043e\u0432\u043e"});$.extend($.ech.multiselect.prototype.options,{height:250,minWidth:350,checkAllText:"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u0432\u0441\u0435",
uncheckAllText:"\u0421\u043d\u044f\u0442\u044c \u043e\u0442\u043c\u0435\u0442\u043a\u0443 \u0441\u043e \u0432\u0441\u0435\u0445",noneSelectedText:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430",selectedText:"\u0412\u044b\u0431\u0440\u0430\u043d\u043e #"});Globalize.addCultureInfo("ru-RU","default",{name:"ru-RU",englishName:"Russian (Russia)",nativeName:"\u0440\u0443\u0441\u0441\u043a\u0438\u0439 (\u0420\u043e\u0441\u0441\u0438\u044f)",language:"ru",
numberFormat:{",":"",".":".",negativeInfinity:"-\u0431\u0435\u0441\u043a\u043e\u043d\u0435\u0447\u043d\u043e\u0441\u0442\u044c",positiveInfinity:"\u0431\u0435\u0441\u043a\u043e\u043d\u0435\u0447\u043d\u043e\u0441\u0442\u044c",percent:{pattern:["-n%","n%"],",":"",".":"."},currency:{pattern:["-n$","n$"],",":"",".":".",symbol:"p."}},calendars:{standard:{"/":".",firstDay:1,days:{names:"\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435 \u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a \u0432\u0442\u043e\u0440\u043d\u0438\u043a \u0441\u0440\u0435\u0434\u0430 \u0447\u0435\u0442\u0432\u0435\u0440\u0433 \u043f\u044f\u0442\u043d\u0438\u0446\u0430 \u0441\u0443\u0431\u0431\u043e\u0442\u0430".split(" "),
namesAbbr:"\u0412\u0441 \u041f\u043d \u0412\u0442 \u0421\u0440 \u0427\u0442 \u041f\u0442 \u0421\u0431".split(" "),namesShort:"\u0412\u0441 \u041f\u043d \u0412\u0442 \u0421\u0440 \u0427\u0442 \u041f\u0442 \u0421\u0431".split(" ")},months:{names:"\u042f\u043d\u0432\u0430\u0440\u044c \u0424\u0435\u0432\u0440\u0430\u043b\u044c \u041c\u0430\u0440\u0442 \u0410\u043f\u0440\u0435\u043b\u044c \u041c\u0430\u0439 \u0418\u044e\u043d\u044c \u0418\u044e\u043b\u044c \u0410\u0432\u0433\u0443\u0441\u0442 \u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c \u041e\u043a\u0442\u044f\u0431\u0440\u044c \u041d\u043e\u044f\u0431\u0440\u044c \u0414\u0435\u043a\u0430\u0431\u0440\u044c ".split(" "),
namesAbbr:"\u044f\u043d\u0432 \u0444\u0435\u0432 \u043c\u0430\u0440 \u0430\u043f\u0440 \u043c\u0430\u0439 \u0438\u044e\u043d \u0438\u044e\u043b \u0430\u0432\u0433 \u0441\u0435\u043d \u043e\u043a\u0442 \u043d\u043e\u044f \u0434\u0435\u043a ".split(" ")},monthsGenitive:{names:"\u044f\u043d\u0432\u0430\u0440\u044f \u0444\u0435\u0432\u0440\u0430\u043b\u044f \u043c\u0430\u0440\u0442\u0430 \u0430\u043f\u0440\u0435\u043b\u044f \u043c\u0430\u044f \u0438\u044e\u043d\u044f \u0438\u044e\u043b\u044f \u0430\u0432\u0433\u0443\u0441\u0442\u0430 \u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f \u043e\u043a\u0442\u044f\u0431\u0440\u044f \u043d\u043e\u044f\u0431\u0440\u044f \u0434\u0435\u043a\u0430\u0431\u0440\u044f ".split(" "),
namesAbbr:"\u044f\u043d\u0432 \u0444\u0435\u0432 \u043c\u0430\u0440 \u0430\u043f\u0440 \u043c\u0430\u0439 \u0438\u044e\u043d \u0438\u044e\u043b \u0430\u0432\u0433 \u0441\u0435\u043d \u043e\u043a\u0442 \u043d\u043e\u044f \u0434\u0435\u043a ".split(" ")},AM:null,PM:null,patterns:{d:"dd.MM.yyyy",D:"d MMMM yyyy '\u0433.'",t:"H:mm",T:"H:mm:ss",f:"d MMMM yyyy '\u0433.' H:mm",F:"d MMMM yyyy '\u0433.' H:mm:ss",Y:"MMMM yyyy"}}}});$.widget("ui.ace_editor",{options:{editor:null,mode:"ace/mode/pgsql",classes:"ui-widget-content ui-corner-all",
resizable:!0,value:"",heigth:30,width:250},_create:function(){var b=this,a=b.element.attr("id"),d=$("#"+b.element.attr("id"));b.options.editor=ace.edit(a);b.options.editor.getSession().setMode(b.options.mode);b.options.editor.getSession().setValue(b.options.value);b.options.editor.getSession().on("change",function(){b._trigger("change",b,b.options.editor.getSession().getValue())});b.options.editor.setHighlightActiveLine(!1);b.options.editor.renderer.setShowGutter(!1);b.options.editor.setShowPrintMargin(!1);
d.width(b.options.width).height(b.options.heigth).addClass(b.options.classes).css("margin-left","5px");b.options.resizable&&d.resizable({resize:function(a,e){d.height($(this).height()).width($(this).width());b.options.editor.resize()}});b.options.editor.resize()},_setOption:function(b,a){$.Widget.prototype._setOption.apply(this,arguments);switch(b){case "value":this.options.editor.getSession().setValue(a);this.options.value=a;break;case "heigth":this.options.heigth=a;break;case "width":this.options.width=
a;break;case "resizable":this.options.resizable=a;break;case "classes":this.options.classes=a;break;case "mode":this.options.mode=a}}})});