/* http://keith-wood.name/calculator.html
   Calculator field entry extension for jQuery v2.0.0.
   Written by Keith Wood (kbwood{at}iinet.com.au) October 2008.
   Licensed under the MIT (https://github.com/jquery/jquery/blob/master/MIT-LICENSE.txt) licence. 
   Please attribute the author if you use it. */
/* Simple JavaScript Inheritance
 * By John Resig http://ejohn.org/
 * MIT Licensed.
 */(function(){var d=!1;window.JQClass=function(){};JQClass.classes={};JQClass.extend=function c(a){function b(){!d&&this._init&&this._init.apply(this,arguments)}var e=this.prototype;d=!0;var f=new this;d=!1;for(var h in a)f[h]="function"==typeof a[h]&&"function"==typeof e[h]?function(a,b){return function(){var c=this._super;this._super=function(b){return e[a].apply(this,b)};var d=b.apply(this,arguments);this._super=c;return d}}(h,a[h]):a[h];b.prototype=f;b.prototype.constructor=b;b.extend=c;return b}})();
(function(d){function m(c){return c.replace(/-([a-z])/g,function(a,b){return b.toUpperCase()})}JQClass.classes.JQPlugin=JQClass.extend({name:"plugin",defaultOptions:{},regionalOptions:{},_getters:[],_getMarker:function(){return"is-"+this.name},_init:function(){d.extend(this.defaultOptions,this.regionalOptions&&this.regionalOptions[""]||{});var c=m(this.name);d[c]=this;d.fn[c]=function(a){var b=Array.prototype.slice.call(arguments,1);return d[c]._isNotChained(a,b)?d[c][a].apply(d[c],[this[0]].concat(b)):
this.each(function(){if("string"===typeof a){if("_"===a[0]||!d[c][a])throw"Unknown method: "+a;d[c][a].apply(d[c],[this].concat(b))}else d[c]._attach(this,a)})}},setDefaults:function(c){d.extend(this.defaultOptions,c||{})},_isNotChained:function(c,a){return"option"===c&&(0===a.length||1===a.length&&"string"===typeof a[0])?!0:-1<d.inArray(c,this._getters)},_attach:function(c,a){c=d(c);if(!c.hasClass(this._getMarker())){c.addClass(this._getMarker());a=d.extend({},this.defaultOptions,this._getMetadata(c),
a||{});var b=d.extend({name:this.name,elem:c,options:a},this._instSettings(c,a));c.data(this.name,b);this._postAttach(c,b);this.option(c,a)}},_instSettings:function(c,a){return{}},_postAttach:function(c,a){},_getMetadata:function(c){try{var a=c.data(this.name.toLowerCase())||"",a=a.replace(/'/g,'"'),a=a.replace(/([a-zA-Z0-9]+):/g,function(b,c,e){return(b=a.substring(0,e).match(/"/g))&&0!==b.length%2?c+":":'"'+c+'":'}),a=d.parseJSON("{"+a+"}"),b;for(b in a){var e=a[b];"string"===typeof e&&e.match(/^new Date\((.*)\)$/)&&
(a[b]=eval(e))}return a}catch(f){return{}}},_getInst:function(c){return d(c).data(this.name)||{}},option:function(c,a,b){c=d(c);var e=c.data(this.name);if(!a||"string"===typeof a&&null==b){var f=(e||{}).options;return f&&a?f[a]:f}c.hasClass(this._getMarker())&&(f=a||{},"string"===typeof a&&(f={},f[a]=b),this._optionsChanged(c,e,f),d.extend(e.options,f))},_optionsChanged:function(c,a,b){},destroy:function(c){c=d(c);c.hasClass(this._getMarker())&&(this._preDestroy(c,this._getInst(c)),c.removeData(this.name).removeClass(this._getMarker()))},
_preDestroy:function(c,a){}});d.JQPlugin={createPlugin:function(c,a){"object"===typeof c&&(a=c,c="JQPlugin");c=m(c);var b=m(a.name);JQClass.classes[b]=JQClass.classes[c].extend(a);new JQClass.classes[b]}}})(jQuery);
(function(d){var m=["  BSCECA","_1_2_3_+@X","_4_5_6_-@U","_7_8_9_*@E","_0_._=_/"];d.JQPlugin.createPlugin({name:"calculator",defaultOptions:{showOn:"focus",buttonImage:"",buttonImageOnly:!1,isOperator:null,showAnim:"show",showOptions:{},duration:"normal",appendText:"",useThemeRoller:!1,calculatorClass:"",prompt:"",layout:m,value:0,base:10,precision:10,memoryAsCookie:!1,cookieName:"calculatorMemory",cookieExpires:86400,cookiePath:"",useDegrees:!1,constrainInput:!0,onOpen:null,onButton:null,onClose:null},
regionalOptions:{"":{decimalChar:".",buttonText:"...",buttonStatus:"Open the calculator",closeText:"Close",closeStatus:"Close the calculator",useText:"Use",useStatus:"Use the current value",eraseText:"Erase",eraseStatus:"Erase the value from the field",backspaceText:"BS",backspaceStatus:"Erase the last digit",clearErrorText:"CE",clearErrorStatus:"Erase the last number",clearText:"CA",clearStatus:"Reset the calculator",memClearText:"MC",memClearStatus:"Clear the memory",memRecallText:"MR",memRecallStatus:"Recall the value from memory",
memStoreText:"MS",memStoreStatus:"Store the value in memory",memAddText:"M+",memAddStatus:"Add to memory",memSubtractText:"M-",memSubtractStatus:"Subtract from memory",base2Text:"Bin",base2Status:"Switch to binary",base8Text:"Oct",base8Status:"Switch to octal",base10Text:"Dec",base10Status:"Switch to decimal",base16Text:"Hex",base16Status:"Switch to hexadecimal",degreesText:"Deg",degreesStatus:"Switch to degrees",radiansText:"Rad",radiansStatus:"Switch to radians",isRTL:!1}},_getters:["isDisabled"],
_curInst:null,_disabledFields:[],_showingCalculator:!1,_showingKeystrokes:!1,_keyDefs:{},digit:"d",binary:"b",unary:"u",control:"c",space:"s",_mainDivClass:"calculator-popup",_inlineClass:"calculator-inline",_appendClass:"calculator-append",_triggerClass:"calculator-trigger",_disableClass:"calculator-disabled",_inlineEntryClass:"calculator-keyentry",_promptClass:"calculator-prompt",_resultClass:"calculator-result",_focussedClass:"calculator-focussed",_keystrokeClass:"calculator-keystroke",_rtlClass:"calculator-rtl",
_rowClass:"calculator-row",_ctrlClass:"calculator-ctrl",_baseActiveClass:"calculator-base-active",_angleActiveClass:"calculator-angle-active",_digitClass:"calculator-digit",_operatorClass:"calculator-oper",_memEmptyClass:"calculator-mem-empty",_keyNameClass:"calculator-keyname",_keyDownClass:"calculator-key-down",_keyStrokeClass:"calculator-keystroke",standardLayout:m,scientificLayout:"@X@U@E  BSCECA;DGRD    _ MC_ _7_8_9_+;SNASSRLG_ MR_ _4_5_6_-;CSACSQLN_ MS_ _1_2_3_*;TNATXYEX_ M+_ _0_.+-_/;PIRN1X  _ M-_   _%_=".split(";"),
addKeyDef:function(a,b,c,d,h,g,k,n){this._keyDefs[a]=[b,"boolean"===typeof c?c?this.binary:this.unary:c,d,h,g,k,n];g&&(this[g]=a);k&&("number"===typeof k?this._keyCodes[k]=a:this._keyChars[k]=a);return this},_init:function(){this.mainDiv=d('<div class="'+this._mainDivClass+'" style="display: none;"></div>').on("click.calculator",this._focusEntry);this._keyCodes={};this._keyChars={};this._super()},_instSettings:function(a,b){var c="input"!=a[0].nodeName.toLowerCase();return{_input:c?d('<input type="text" class="'+
this._inlineEntryClass+'"/>'):a,_inline:c,memory:0,_mainDiv:c?d('<div class="'+this._inlineClass+'"></div>'):this.mainDiv}},_postAttach:function(a,b){if(b.options.memoryAsCookie){var c=this._getMemoryCookie(b);c&&!isNaN(c)&&(b.memory=c)}!b._inline&&a.is(":disabled")&&this.disable(a[0])},_optionsChanged:function(a,b,e){d.extend(b.options,e);this._curInst==b&&this.hide();a.empty().off("."+b.name).siblings("."+this._appendClass).remove().end().siblings("."+this._triggerClass).remove().end().prev("."+
this._inlineEntryClass).remove();if(b.options.appendText)a[b.options.isRTL?"before":"after"]('<span class="'+this._appendClass+'">'+b.options.appendText+"</span>");if(!b._inline){if("focus"==b.options.showOn||"both"==b.options.showOn)a.on("focus."+b.name,this.show);if("button"==b.options.showOn||"both"==b.options.showOn||"opbutton"==b.options.showOn)e=d(b.options.buttonImageOnly?d("<img/>").attr({src:b.options.buttonImage,alt:b.options.buttonStatus,title:b.options.buttonStatus}):d('<button type="button" title="'+
b.options.buttonStatus+'"></button>').html(""==b.options.buttonImage?b.options.buttonText:d("<img/>").attr({src:b.options.buttonImage}))),a[b.options.isRTL?"before":"after"](e),e.addClass(this._triggerClass).on("click."+b.name,function(){c._showingCalculator&&c._lastInput==a[0]?c.hide():c.show(a[0]);return!1})}b._input.on("keydown."+b.name,this._doKeyDown).on("keyup."+b.name,this._doKeyUp).on("keypress."+b.name,this._doKeyPress);b._inline&&(a.append(b._input).append(b._mainDiv).on("click."+b.name,
function(){b._input.focus()}),this._reset(b,"0"),this._setValue(b),this._updateCalculator(b),b._mainDiv.on("keydown."+b.name,this._doKeyDown).on("keyup."+b.name,this._doKeyUp).on("keypress."+b.name,this._doKeyPress),b._input.on("focus."+b.name,function(){c.isDisabled(a[0])||(b._focussed=!0,d("."+c._resultClass,b._mainDiv).addClass(c._focussedClass))}).on("blur."+b.name,function(){b._focussed=!1;d("."+c._resultClass,b._mainDiv).removeClass(c._focussedClass)}));a.addClass(this._getMarker()).on("setData."+
b.name,function(a,c,e){b.options[c]=e}).on("getData."+b.name,function(a,c){return b.options[c]}).data(b.name,b);b._input.data(b.name,b);b._inline&&this._setValue(b);this._updateCalculator(b)},_preDestroy:function(a,b){b._input.off("."+b.name).removeData(b.name);a.empty().off("."+b.name).siblings("."+this._appendClass).remove().end().siblings("."+this._triggerClass).remove().end().prev("."+this._inlineEntryClass).remove()},enable:function(a){a=d(a);if(a.hasClass(this._getMarker())){var b=a[0].nodeName.toLowerCase();
"input"==b?a.prop("disabled",!1).siblings("button."+this._triggerClass).prop("disabled",!1).end().siblings("img."+this._triggerClass).css({opacity:"1.0",cursor:""}):"div"!=b&&"span"!=b||a.find("."+this._inlineEntryClass+",button").prop("disabled",!1).end().children("."+this._disableClass).remove();this._disabledFields=d.map(this._disabledFields,function(b){return b==a[0]?null:b})}},disable:function(a){a=d(a);if(a.hasClass(this._getMarker())){var b=a[0].nodeName.toLowerCase();if("input"==b)a.prop("disabled",
!0).siblings("button."+this._triggerClass).prop("disabled",!0).end().siblings("img."+this._triggerClass).css({opacity:"0.5",cursor:"default"});else if("div"==b||"span"==b){var b=a.children("."+this._inlineClass),c=b.offset(),f={left:0,top:0};b.parents().each(function(){if("relative"==d(this).css("position"))return f=d(this).offset(),!1});a.find("."+this._inlineEntryClass+",button").prop("disabled",!0);0==a.find("."+this._disableClass).length&&a.prepend('<div class="'+this._disableClass+'" style="width: '+
b.outerWidth()+"px; height: "+b.outerHeight()+"px; left: "+(c.left-f.left)+"px; top: "+(c.top-f.top)+'px;"></div>')}this._disabledFields=d.map(this._disabledFields,function(b){return b==a[0]?null:b});this._disabledFields[this._disabledFields.length]=a[0]}},isDisabled:function(a){return a&&-1<d.inArray(a,this._disabledFields)},show:function(a){a=a.target||a;if(!c.isDisabled(a)&&c._lastInput!=a){var b=c._getInst(a);c.hide(null,"");c._lastInput=a;c._pos=c._findPos(a);c._pos[1]+=a.offsetHeight;var e=
!1;d(a).parents().each(function(){e|="fixed"==d(this).css("position");return!e});a={left:c._pos[0],top:c._pos[1]};c._pos=null;b._mainDiv.css({position:"absolute",display:"block",top:"-1000px",width:"auto"});d.isFunction(b.options.onOpen)&&b.options.onOpen.apply(b._input?b._input[0]:null,[b._inline?b.curValue:b._input.val(),b]);c._reset(b,b._input.val());c._updateCalculator(b);a=c._checkOffset(b,a,e);b._mainDiv.css({position:e?"fixed":"absolute",display:"none",left:a.left+"px",top:a.top+"px"});a=b.options.duration;
a="normal"==a&&d.ui&&8<=parseInt(d.ui.version.substring(2))?"_default":a;var f=function(){c._showingCalculator=!0};if(d.effects&&(d.effects[b.options.showAnim]||d.effects.effect&&d.effects.effect[b.options.showAnim])){var h=b._mainDiv.data(),g;for(g in h)g.match(/^ec\.storage\./)&&(h[g]=b._mainDiv.css(g.replace(/ec\.storage\./,"")));b._mainDiv.data(h).show(b.options.showAnim,b.options.showOptions,a,f)}else b._mainDiv[b.options.showAnim||"show"](b.options.showAnim?a:null,f);b.options.showAnim||f();
"hidden"!=b._input[0].type&&b._input[0].focus();c._curInst=b}},_reset:function(a,b){b=""+(b||0);b="."!=a.options.decimalChar?b.replace(RegExp(a.options.decimalChar),"."):b;a.curValue=(10==a.options.base?parseFloat(b):parseInt(b,a.options.base))||0;a.dispValue=this._setDisplay(a);a.prevValue=a._savedValue=0;a._pendingOp=a._savedOp=this._noOp;a._newValue=!0},_getMemoryCookie:function(a){return parseFloat(document.cookie.replace(RegExp("^.*"+a.options.cookieName+"=([^;]*).*$"),"$1"))},_setMemoryCookie:function(a){if(a.options.memoryAsCookie){var b=
a.options.cookieExpires;if("number"==typeof b){var c=new Date;c.setTime(c.getTime()+1E3*b);b=c.toUTCString()}else b=b.constructor==Date?c.toUTCString():"";document.cookie=a.options.cookieName+"="+a.memory+"; expires="+b+"; path="+a.options.cookiePath}},_setValue:function(a){a.curValue=a.options.value||0;a.dispValue=this._setDisplay(a)},_updateCalculator:function(a){this._getBorders(a._mainDiv);a._mainDiv.html(this._generateHTML(a)).removeClass().addClass(a.options.calculatorClass+(a.options.useThemeRoller?
" ui-widget ui-widget-content":"")+(a.options.isRTL?" "+c._rtlClass:"")+" "+(a._inline?this._inlineClass:this._mainDivClass));this.isDisabled(a.elem[0])&&this.disable(a.elem[0]);this._curInst==a&&a._input.focus()},_getBorders:function(a){var b=function(a){return{thin:1,medium:3,thick:5}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var f=a._input?this._findPos(a._input[0]):null,h=window.innerWidth||document.documentElement.clientWidth,
g=window.innerHeight||document.documentElement.clientHeight,k=document.documentElement.scrollLeft||document.body.scrollLeft,n=document.documentElement.scrollTop||document.body.scrollTop,l=0;d("."+a.name+"-row",a._mainDiv).find("button:last").each(function(){l=Math.max(l,this.offsetLeft+this.offsetWidth+parseInt(d(this).css("margin-right"),10))});a._mainDiv.css("width",l);a.options.isRTL||b.left+a._mainDiv.outerWidth()-k>h?b.left=Math.max(c?0:k,f[0]+(a._input?a._input.outerWidth():0)-(c?k:0)-a._mainDiv.outerWidth()):
b.left=Math.max(c?0:k,b.left-(c?k:0));b.top+a._mainDiv.outerHeight()-n>g?b.top=Math.max(c?0:n,f[1]-(c?n:0)-a._mainDiv.outerHeight()):b.top=Math.max(c?0:n,b.top-(c?n:0));return b},_findPos:function(a){for(;a&&("hidden"==a.type||1!=a.nodeType);)a=a.nextSibling;a=d(a).offset();return[a.left,a.top]},hide:function(a,b){var e=this._curInst;if(e&&(!a||e==c._getInst(a))){if(this._showingCalculator)if(b=null!=b?b:e.options.duration,b="normal"==b&&d.ui&&8<=parseInt(d.ui.version.substring(2))?"_default":b,d.effects&&
(d.effects[e.options.showAnim]||d.effects.effect&&d.effects.effect[e.options.showAnim]))e._mainDiv.hide(e.options.showAnim,e.options.showOptions,b);else e._mainDiv["slideDown"==e.options.showAnim?"slideUp":"fadeIn"==e.options.showAnim?"fadeOut":"hide"](e.options.showAnim?b:null);d.isFunction(e.options.onClose)&&e.options.onClose.apply(e._input?e._input[0]:null,[e._inline?e.curValue:e._input.val(),e]);this._showingCalculator&&(this._showingCalculator=!1,this._lastInput=null);this._curInst=null}},_checkExternalClick:function(a){c._curInst&&
(a=d(a.target),0==a.closest("."+c._mainDivClass).length&&!a.hasClass(c._getMarker())&&0==a.closest("."+c._triggerClass).length&&c._showingCalculator&&c.hide())},_focusEntry:function(){c._curInst&&c._curInst._input&&c._curInst._input.focus()},_doKeyDown:function(a){var b=!1,e=c._getInst(a.target),f=e&&e._inline?d(a.target).parent()[0]:null;if(9==a.keyCode)c.mainDiv.stop(!0,!0),c.hide(),e&&e._inline&&e._input.blur();else if(c._showingCalculator||f&&!c.isDisabled(f))if(18==a.keyCode)c._showingKeystrokes||
(e._mainDiv.find("."+c._keystrokeClass).show(),c._showingKeystrokes=!0),b=!0;else{if(f=c._keyCodes[a.keyCode])d('button[data-keystroke="'+f+'"]',e._mainDiv).not(":disabled").click(),b=!0}else 36==a.keyCode&&a.ctrlKey&&e&&!e._inline&&c.show(this);b&&(a.preventDefault(),a.stopPropagation());return!b},_doKeyUp:function(a){c._showingKeystrokes&&(c._getInst(a.target)._mainDiv.find("."+c._keystrokeClass).hide(),c._showingKeystrokes=!1)},_doKeyPress:function(a){var b=c._getInst(a.target);if(!b)return!0;
var e=b&&b._inline?d(a.target).parent()[0]:null,f=String.fromCharCode(void 0==a.charCode?a.keyCode:a.charCode),h=b.options.isOperator||c.isOperator;c._showingCalculator||e||"operator"!=b.options.showOn&&"opbutton"!=b.options.showOn||!h.apply(b._input,[f,a,b._input.val(),b.options.base,b.options.decimalChar])||(c.show(this),c._showingCalculator=!0);return c._showingCalculator||e&&!c.isDisabled(e)?((f=c._keyChars[f==b.options.decimalChar?".":f])&&d('button[data-keystroke="'+f+'"]',b._mainDiv).not(":disabled").click(),
!1):" "<=f&&b.options.constrainInput?(a=RegExp("^-?"+(10==b.options.base?"[0-9]*(\\"+b.options.decimalChar+"[0-9]*)?":"["+"0123456789abcdef".substring(0,b.options.base)+"]*")+"$"),null!=(b._input.val()+f).toLowerCase().match(a)):!0},isOperator:function(a,b,c,d,h){return" "<a&&!("-"==a&&""==c)&&-1==("0123456789abcdef".substr(0,d)+"."+h).indexOf(a.toLowerCase())},_generateHTML:function(a){for(var b=(a.options.prompt?'<div class="'+this._promptClass+(a.options.useThemeRoller?" ui-widget-header ui-corner-all":
"")+'">'+a.options.prompt+"</div>":"")+'<div class="'+this._resultClass+(a.options.useThemeRoller?" ui-widget-header":"")+(a._focussed?" "+this._focussedClass:"")+'"><span>'+a.dispValue+"</span></div>",e=0;e<a.options.layout.length;e++){for(var b=b+('<div class="'+this._rowClass+'">'),f=0;f<a.options.layout[e].length;f+=2){for(var h=a.options.layout[e].substr(f,2),g=this._keyDefs[h]||this._keyDefs["??"],k="#"==g[0].charAt(0)?a.options[g[0].substr(1)+"Text"]:g[0],n="#"==g[0].charAt(0)?a.options[g[0].substr(1)+
"Status"]:"",l=g[3]?g[3].split(" "):[],p=0;p<l.length;p++)l[p]=a.name+"-"+l[p];var l=l.join(" "),p=a.options.useThemeRoller?" ui-state-active":"",m=a.options.useThemeRoller?" ui-state-highlight":"",b=b+(g[1]==this.space?'<span class="'+a.name+"-"+g[3]+'"></span>':!a._inline||"._close"!=g[2]&&"._erase"!=g[2]?'<button type="button" data-keystroke="'+h+'"'+(g[1]==this.control?' class="'+this._ctrlClass+(g[0].match(/^#base/)?g[0].replace(/^#base/,"")==a.options.base?p||" "+this._baseActiveClass:m:"#degrees"==
g[0]?a.options.useDegrees?p||" "+this._angleActiveClass:m:"#radians"==g[0]?a.options.useDegrees?m:p||" "+this._angleActiveClass:m):g[1]==this.digit?(parseInt(g[0],16)>=a.options.base||10!=a.options.base&&"."==g[0]?' disabled="disabled"':"")+' class="'+this._digitClass:g[1]==this.binary?' class="'+this._operatorClass:' class="'+this._operatorClass+(g[0].match(/^#mem(Clear|Recall)$/)&&!a.memory?" "+this._memEmptyClass:""))+(a.options.useThemeRoller?" ui-state-default":"")+(l?" "+l:"")+'" '+(n?'title="'+
n+'"':"")+">"+("_."==h?a.options.decimalChar:k)+(g[5]&&g[5]!=g[0]?'<span class="'+this._keystrokeClass+(a.options.useThemeRoller?" ui-state-error":"")+(g[6]?" "+this._keyNameClass:"")+'">'+(g[6]||g[5])+"</span>":"")+"</button>":"")}b+="</div>"}b=d(b+'<div style="clear: both;"></div>');b.find("button").on("mouseover."+a.name,function(){c._saveClasses=this.className}).on("mousedown."+a.name,function(){d(this).addClass(this._keyDownClass+(a.options.useThemeRoller?" ui-state-active":""))}).on("mouseup."+
a.name,function(){d(this).removeClass().addClass(c._saveClasses)}).on("mouseout."+a.name,function(){d(this).removeClass().addClass(c._saveClasses)}).on("click."+a.name,function(){c._handleButton(a,d(this))});return b},_setDisplay:function(a){var b=(new Number(a.curValue)).toFixed(a.options.precision).valueOf(),c=b.replace(/^.+(e.+)$/,"$1").replace(/^[^e].*$/,"");c&&(b=(new Number(b.replace(/e.+$/,""))).toFixed(a.options.precision).valueOf());return parseFloat(b.replace(/0+$/,"")+c).toString(a.options.base).toUpperCase().replace(/\./,
a.options.decimalChar)},_sendButton:function(a,b){d.isFunction(a.options.onButton)&&a.options.onButton.apply(a._input?a._input[0]:null,[b,a.dispValue,a])},_handleButton:function(a,b){var e=this._keyDefs[b.data("keystroke")];if(e){var d=b.text().substr(0,b.text().length-b.children("."+this._keyStrokeClass).text().length);switch(e[1]){case this.control:e[2].apply(this,[a,d]);break;case this.digit:this._digit(a,d);break;case this.binary:this._binaryOp(a,e[2],d);break;case this.unary:this._unaryOp(a,
e[2],d)}(c._showingCalculator||a._inline)&&a._input.focus()}},_noOp:function(a){},_digit:function(a,b){a.dispValue=a._newValue?"":a.dispValue;if(!(b==a.options.decimalChar&&-1<a.dispValue.indexOf(b))){a.dispValue=(a.dispValue+b).replace(/^0(\d)/,"$1").replace(RegExp("^(-?)([\\."+a.options.decimalChar+"])"),"$10$2");"."!=a.options.decimalChar&&(a.dispValue=a.dispValue.replace(RegExp("^"+a.options.decimalChar),"0."));var c="."!=a.options.decimalChar?a.dispValue.replace(RegExp(a.options.decimalChar),
"."):a.dispValue;a.curValue=10==a.options.base?parseFloat(c):parseInt(c,a.options.base);a._newValue=!1;this._sendButton(a,b);this._updateCalculator(a)}},_binaryOp:function(a,b,c){!a._newValue&&a._pendingOp&&(a._pendingOp(a),a.curValue=10==a.options.base?a.curValue:Math.floor(a.curValue),a.dispValue=this._setDisplay(a));a.prevValue=a.curValue;a._newValue=!0;a._pendingOp=b;this._sendButton(a,c);this._updateCalculator(a)},_add:function(a){a.curValue=a.prevValue+a.curValue},_subtract:function(a){a.curValue=
a.prevValue-a.curValue},_multiply:function(a){a.curValue*=a.prevValue},_divide:function(a){a.curValue=a.prevValue/a.curValue},_power:function(a){a.curValue=Math.pow(a.prevValue,a.curValue)},_unaryOp:function(a,b,c){a._newValue=!0;b.apply(this,[a]);a.curValue=10==a.options.base?a.curValue:Math.floor(a.curValue);a.dispValue=this._setDisplay(a);this._sendButton(a,c);this._updateCalculator(a)},_plusMinus:function(a){a.curValue*=-1;a.dispValue=this._setDisplay(a);a._newValue=!1},_pi:function(a){a.curValue=
Math.PI},_percent:function(a){a._pendingOp==this._add?a.curValue=a.prevValue*(1+a.curValue/100):a._pendingOp==this._subtract?a.curValue=a.prevValue*(1-a.curValue/100):a._pendingOp==this._multiply?a.curValue=a.prevValue*a.curValue/100:a._pendingOp==this._divide&&(a.curValue=a.prevValue/a.curValue*100);a._savedOp=a._pendingOp;a._pendingOp=this._noOp},_equals:function(a){a._pendingOp==this._noOp?a._savedOp!=this._noOp&&(a.prevValue=a.curValue,a.curValue=a._savedValue,a._savedOp(a)):(a._savedOp=a._pendingOp,
a._savedValue=a.curValue,a._pendingOp(a),a._pendingOp=this._noOp)},_memAdd:function(a){a.memory+=a.curValue;this._setMemoryCookie(a)},_memSubtract:function(a){a.memory-=a.curValue;this._setMemoryCookie(a)},_memStore:function(a){a.memory=a.curValue;this._setMemoryCookie(a)},_memRecall:function(a){a.curValue=a.memory},_memClear:function(a){a.memory=0;this._setMemoryCookie(a)},_sin:function(a){this._trig(a,Math.sin)},_cos:function(a){this._trig(a,Math.cos)},_tan:function(a){this._trig(a,Math.tan)},_trig:function(a,
b){a.curValue=b(a.curValue*(a.options.useDegrees?Math.PI/180:1))},_asin:function(a){this._atrig(a,Math.asin)},_acos:function(a){this._atrig(a,Math.acos)},_atan:function(a){this._atrig(a,Math.atan)},_atrig:function(a,b){a.curValue=b(a.curValue);a.options.useDegrees&&(a.curValue=a.curValue/Math.PI*180)},_inverse:function(a){a.curValue=1/a.curValue},_log:function(a){a.curValue=Math.log(a.curValue)/Math.log(10)},_ln:function(a){a.curValue=Math.log(a.curValue)},_exp:function(a){a.curValue=Math.exp(a.curValue)},
_sqr:function(a){a.curValue*=a.curValue},_sqrt:function(a){a.curValue=Math.sqrt(a.curValue)},_random:function(a){a.curValue=Math.random()},_base2:function(a,b){this._changeBase(a,b,2)},_base8:function(a,b){this._changeBase(a,b,8)},_base10:function(a,b){this._changeBase(a,b,10)},_base16:function(a,b){this._changeBase(a,b,16)},_changeBase:function(a,b,c){a.options.base=c;a.curValue=10==c?a.curValue:Math.floor(a.curValue);a.dispValue=this._setDisplay(a);a._newValue=!0;this._sendButton(a,b);this._updateCalculator(a)},
_degrees:function(a,b){this._degreesRadians(a,b,!0)},_radians:function(a,b){this._degreesRadians(a,b,!1)},_degreesRadians:function(a,b,c){a.options.useDegrees=c;this._sendButton(a,b);this._updateCalculator(a)},_undo:function(a,b){a.dispValue=a.dispValue.substr(0,a.dispValue.length-1)||"0";a.curValue=10==a.options.base?parseFloat(a.dispValue):parseInt(a.dispValue,a.options.base);this._sendButton(a,b);this._updateCalculator(a)},_clearError:function(a,b){a.dispValue="0";a.curValue=0;a._newValue=!0;this._sendButton(a,
b);this._updateCalculator(a)},_clear:function(a,b){this._reset(a,0);this._sendButton(a,b);this._updateCalculator(a)},_close:function(a,b){this._finished(a,b,a._input.val())},_use:function(a,b){a._pendingOp!=this._noOp&&this._unaryOp(a,this._equals,b);this._finished(a,b,a.dispValue)},_erase:function(a,b){this._reset(a,0);this._updateCalculator(a);this._finished(a,b,"")},_finished:function(a,b,c){a._inline?this._curInst=a:a._input.val(c);this._sendButton(a,b);this.hide(a._input[0])}});var c=d.calculator;
d.each([["_0","0",c.digit,null,"","0","0"],["_1","1",c.digit,null,"","1","1"],["_2","2",c.digit,null,"","2","2"],["_3","3",c.digit,null,"","3","3"],["_4","4",c.digit,null,"","4","4"],["_5","5",c.digit,null,"","5","5"],["_6","6",c.digit,null,"","6","6"],["_7","7",c.digit,null,"","7","7"],["_8","8",c.digit,null,"","8","8"],["_9","9",c.digit,null,"","9","9"],["_A","A",c.digit,null,"hex-digit","A","a"],["_B","B",c.digit,null,"hex-digit","B","b"],["_C","C",c.digit,null,"hex-digit","C","c"],["_D","D",c.digit,
null,"hex-digit","D","d"],["_E","E",c.digit,null,"hex-digit","E","e"],["_F","F",c.digit,null,"hex-digit","F","f"],["_.",".",c.digit,null,"decimal","DECIMAL","."],["_+","+",c.binary,c._add,"arith add","ADD","+"],["_-","-",c.binary,c._subtract,"arith subtract","SUBTRACT","-"],["_*","*",c.binary,c._multiply,"arith multiply","MULTIPLY","*"],["_/","/",c.binary,c._divide,"arith divide","DIVIDE","/"],["_%","%",c.unary,c._percent,"arith percent","PERCENT","%"],["_=","=",c.unary,c._equals,"arith equals","EQUALS",
"="],["+-","\u00b1",c.unary,c._plusMinus,"arith plus-minus","PLUS_MINUS","#"],["PI","pi",c.unary,c._pi,"pi","PI","p"],["1X","1/x",c.unary,c._inverse,"fn inverse","INV","i"],["LG","log",c.unary,c._log,"fn log","LOG","l"],["LN","ln",c.unary,c._ln,"fn ln","LN","n"],["EX","e\u207f",c.unary,c._exp,"fn exp","EXP","E"],["SQ","x\u00b2",c.unary,c._sqr,"fn sqr","SQR","@"],["SR","\u221a",c.unary,c._sqrt,"fn sqrt","SQRT","!"],["XY","x^y",c.binary,c._power,"fn power","POWER","^"],["RN","rnd",c.unary,c._random,
"random","RANDOM","?"],["SN","sin",c.unary,c._sin,"trig sin","SIN","s"],["CS","cos",c.unary,c._cos,"trig cos","COS","o"],["TN","tan",c.unary,c._tan,"trig tan","TAN","t"],["AS","asin",c.unary,c._asin,"trig asin","ASIN","S"],["AC","acos",c.unary,c._acos,"trig acos","ACOS","O"],["AT","atan",c.unary,c._atan,"trig atan","ATAN","T"],["MC","#memClear",c.unary,c._memClear,"memory mem-clear","MEM_CLEAR","x"],["MR","#memRecall",c.unary,c._memRecall,"memory mem-recall","MEM_RECALL","r"],["MS","#memStore",c.unary,
c._memStore,"memory mem-store","MEM_STORE","m"],["M+","#memAdd",c.unary,c._memAdd,"memory mem-add","MEM_ADD",">"],["M-","#memSubtract",c.unary,c._memSubtract,"memory mem-subtract","MEM_SUBTRACT","<"],["BB","#base2",c.control,c._base2,"base base2","BASE_2","B"],["BO","#base8",c.control,c._base8,"base base8","BASE_8","C"],["BD","#base10",c.control,c._base10,"base base10","BASE_10","D"],["BH","#base16",c.control,c._base16,"base base16","BASE_16","H"],["DG","#degrees",c.control,c._degrees,"angle degrees",
"DEGREES","G"],["RD","#radians",c.control,c._radians,"angle radians","RADIANS","R"],["BS","#backspace",c.control,c._undo,"undo","UNDO",8,"BSp"],["CE","#clearError",c.control,c._clearError,"clear-error","CLEAR_ERROR",36,"Hom"],["CA","#clear",c.control,c._clear,"clear","CLEAR",35,"End"],["@X","#close",c.control,c._close,"close","CLOSE",27,"Esc"],["@U","#use",c.control,c._use,"use","USE",13,"Ent"],["@E","#erase",c.control,c._erase,"erase","ERASE",46,"Del"],["  ","",c.space,null,"space","SPACE"],["_ ",
"",c.space,null,"half-space","HALF_SPACE"],["??","??",c.unary,c._noOp]],function(a,b){c.addKeyDef.apply(c,b)});d(function(){d("body").append(c.mainDiv).mousedown(c._checkExternalClick)})})(jQuery);