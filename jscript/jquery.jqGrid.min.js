/**
 * @license jqGrid  4.7.0 - jQuery Grid
 * Copyright (c) 2008, Tony Tomov, tony@trirand.com
 * Dual licensed under the MIT and GPL licenses
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl-2.0.html
 * Date: 2014-12-08
 */
 (function($){"use strict";$.jgrid=$.jgrid||{};$.extend($.jgrid,{version:"4.7.0",htmlDecode:function(e){if(e&&(e==="&nbsp;"||e==="&#160;"||e.length===1&&e.charCodeAt(0)===160)){return""}return!e?e:String(e).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&/g,"&")},htmlEncode:function(e){return!e?e:String(e).replace(/&/g,"&").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},format:function(e){var t=$.makeArray(arguments).slice(1);if(e==null){e=""}return e.replace(/\{(\d+)\}/g,function(e,n){return t[n]})},msie:navigator.appName==="Microsoft Internet Explorer",msiever:function(){var e=-1;var t=navigator.userAgent;var n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(n.exec(t)!=null){e=parseFloat(RegExp.$1)}return e},getCellIndex:function(e){var t=$(e);if(t.is("tr")){return-1}t=(!t.is("td")&&!t.is("th")?t.closest("td,th"):t)[0];if($.jgrid.msie){return $.inArray(t,t.parentNode.cells)}return t.cellIndex},stripHtml:function(e){e=String(e);var t=/<("[^"]*"|'[^']*'|[^'">])*>/gi;if(e){e=e.replace(t,"");return e&&e!=="&nbsp;"&&e!=="&#160;"?e.replace(/\"/g,"'"):""}return e},stripPref:function(e,t){var n=$.type(e);if(n==="string"||n==="number"){e=String(e);t=e!==""?String(t).replace(String(e),""):t}return t},parse:function(jsonString){var js=jsonString;if(js.substr(0,9)==="while(1);"){js=js.substr(9)}if(js.substr(0,2)==="/*"){js=js.substr(2,js.length-4)}if(!js){js="{}"}return $.jgrid.useJSON===true&&typeof JSON==="object"&&typeof JSON.parse==="function"?JSON.parse(js):eval("("+js+")")},parseDate:function(e,t,n,r){var i=/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,s=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,o=/[^-+\dA-Z]/g,u=new RegExp("^/Date\\((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?\\)/$"),a=typeof t==="string"?t.match(u):null,f=function(e,t){e=String(e);t=parseInt(t,10)||2;while(e.length<t){e="0"+e}return e},l={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},c=0,h,p,d,v=function(e,t){if(e===0){if(t===12){t=0}}else{if(t!==12){t+=12}}return t},m=0;if(r===undefined){r=$.jgrid.formatter.date}if(r.parseRe===undefined){r.parseRe=/[#%\\\/:_;.,\t\s-]/}if(r.masks.hasOwnProperty(e)){e=r.masks[e]}if(t&&t!=null){if(!isNaN(t-0)&&String(e).toLowerCase()==="u"){c=new Date(parseFloat(t)*1e3)}else if(t.constructor===Date){c=t}else if(a!==null){c=new Date(parseInt(a[1],10));if(a[3]){m=Number(a[5])*60+Number(a[6]);m*=a[4]==="-"?1:-1;m-=c.getTimezoneOffset();c.setTime(Number(Number(c)+m*60*1e3))}}else{if(r.srcformat==="ISO8601Long"&&t.charAt(t.length-1)==="Z"){m-=(new Date).getTimezoneOffset()}t=String(t).replace(/\T/g,"#").replace(/\t/,"%").split(r.parseRe);e=e.replace(/\T/g,"#").replace(/\t/,"%").split(r.parseRe);for(p=0,d=e.length;p<d;p++){if(e[p]==="M"){h=$.inArray(t[p],r.monthNames);if(h!==-1&&h<12){t[p]=h+1;l.m=t[p]}}if(e[p]==="F"){h=$.inArray(t[p],r.monthNames,12);if(h!==-1&&h>11){t[p]=h+1-12;l.m=t[p]}}if(e[p]==="a"){h=$.inArray(t[p],r.AmPm);if(h!==-1&&h<2&&t[p]===r.AmPm[h]){t[p]=h;l.h=v(t[p],l.h)}}if(e[p]==="A"){h=$.inArray(t[p],r.AmPm);if(h!==-1&&h>1&&t[p]===r.AmPm[h]){t[p]=h-2;l.h=v(t[p],l.h)}}if(e[p]==="g"){l.h=parseInt(t[p],10)}if(t[p]!==undefined){l[e[p].toLowerCase()]=parseInt(t[p],10)}}if(l.f){l.m=l.f}if(l.m===0&&l.y===0&&l.d===0){return"&#160;"}l.m=parseInt(l.m,10)-1;var g=l.y;if(g>=70&&g<=99){l.y=1900+l.y}else if(g>=0&&g<=69){l.y=2e3+l.y}c=new Date(l.y,l.m,l.d,l.h,l.i,l.s,l.u);if(m>0){c.setTime(Number(Number(c)+m*60*1e3))}}}else{c=new Date(l.y,l.m,l.d,l.h,l.i,l.s,l.u)}if(r.userLocalTime&&m===0){m-=(new Date).getTimezoneOffset();if(m>0){c.setTime(Number(Number(c)+m*60*1e3))}}if(n===undefined){return c}if(r.masks.hasOwnProperty(n)){n=r.masks[n]}else if(!n){n="Y-m-d"}var y=c.getHours(),b=c.getMinutes(),w=c.getDate(),E=c.getMonth()+1,S=c.getTimezoneOffset(),x=c.getSeconds(),T=c.getMilliseconds(),N=c.getDay(),C=c.getFullYear(),k=(N+6)%7+1,L=(new Date(C,E-1,w)-new Date(C,0,1))/864e5,A={d:f(w),D:r.dayNames[N],j:w,l:r.dayNames[N+7],N:k,S:r.S(w),w:N,z:L,W:k<5?Math.floor((L+k-1)/7)+1:Math.floor((L+k-1)/7)||(((new Date(C-1,0,1)).getDay()+6)%7<4?53:52),F:r.monthNames[E-1+12],m:f(E),M:r.monthNames[E-1],n:E,t:"?",L:"?",o:"?",Y:C,y:String(C).substring(2),a:y<12?r.AmPm[0]:r.AmPm[1],A:y<12?r.AmPm[2]:r.AmPm[3],B:"?",g:y%12||12,G:y,h:f(y%12||12),H:f(y),i:f(b),s:f(x),u:T,e:"?",I:"?",O:(S>0?"-":"+")+f(Math.floor(Math.abs(S)/60)*100+Math.abs(S)%60,4),P:"?",T:(String(c).match(s)||[""]).pop().replace(o,""),Z:"?",c:"?",r:"?",U:Math.floor(c/1e3)};return n.replace(i,function(e){return A.hasOwnProperty(e)?A[e]:e.substring(1)})},jqID:function(e){return String(e).replace(/[!"#$%&'()*+,.\/:; <=>?@\[\\\]\^`{|}~]/g,"\\$&")},guid:1,uidPref:"jqg",randId:function(e){return(e||$.jgrid.uidPref)+$.jgrid.guid++},getAccessor:function(e,t){var n,r,i=[],s;if(typeof t==="function"){return t(e)}n=e[t];if(n===undefined){try{if(typeof t==="string"){i=t.split(".")}s=i.length;if(s){n=e;while(n&&s--){r=i.shift();n=n[r]}}}catch(o){}}return n},getXmlData:function(e,t,n){var r,i=typeof t==="string"?t.match(/^(.*)\[(\w+)\]$/):null;if(typeof t==="function"){return t(e)}if(i&&i[2]){return i[1]?$(i[1],e).attr(i[2]):$(e).attr(i[2])}r=$(t,e);if(n){return r}return r.length>0?$(r).text():undefined},cellWidth:function(){var e=$("<div class='ui-jqgrid' style='left:10000px'><table class='ui-jqgrid-btable' style='width:5px;'><tr class='jqgrow'><td style='width:5px;display:block;'></td></tr></table></div>"),t=e.appendTo("body").find("td").width();e.remove();return Math.abs(t-5)>.1},cell_width:true,ajaxOptions:{},from:function(source){var QueryObject=function(d,q){if(typeof d==="string"){d=$.data(d)}var self=this,_data=d,_usecase=true,_trim=false,_query=q,_stripNum=/[\$,%]/g,_lastCommand=null,_lastField=null,_orDepth=0,_negate=false,_queuedOperator="",_sorting=[],_useProperties=true;if(typeof d==="object"&&d.push){if(d.length>0){if(typeof d[0]!=="object"){_useProperties=false}else{_useProperties=true}}}else{throw"data provides is not an array"}this._hasData=function(){return _data===null?false:_data.length===0?false:true};this._getStr=function(e){var t=[];if(_trim){t.push("jQuery.trim(")}t.push("String("+e+")");if(_trim){t.push(")")}if(!_usecase){t.push(".toLowerCase()")}return t.join("")};this._strComp=function(e){if(typeof e==="string"){return".toString()"}return""};this._group=function(e,t){return{field:e.toString(),unique:t,items:[]}};this._toStr=function(e){if(_trim){e=$.trim(e)}e=e.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"');return _usecase?e:e.toLowerCase()};this._funcLoop=function(e){var t=[];$.each(_data,function(n,r){t.push(e(r))});return t};this._append=function(e){var t;if(_query===null){_query=""}else{_query+=_queuedOperator===""?" && ":_queuedOperator}for(t=0;t<_orDepth;t++){_query+="("}if(_negate){_query+="!"}_query+="("+e+")";_negate=false;_queuedOperator="";_orDepth=0};this._setCommand=function(e,t){_lastCommand=e;_lastField=t};this._resetNegate=function(){_negate=false};this._repeatCommand=function(e,t){if(_lastCommand===null){return self}if(e!==null&&t!==null){return _lastCommand(e,t)}if(_lastField===null){return _lastCommand(e)}if(!_useProperties){return _lastCommand(e)}return _lastCommand(_lastField,e)};this._equals=function(e,t){return self._compare(e,t,1)===0};this._compare=function(e,t,n){var r=Object.prototype.toString;if(n===undefined){n=1}if(e===undefined){e=null}if(t===undefined){t=null}if(e===null&&t===null){return 0}if(e===null&&t!==null){return 1}if(e!==null&&t===null){return-1}if(r.call(e)==="[object Date]"&&r.call(t)==="[object Date]"){if(e<t){return-n}if(e>t){return n}return 0}if(!_usecase&&typeof e!=="number"&&typeof t!=="number"){e=String(e);t=String(t)}if(e<t){return-n}if(e>t){return n}return 0};this._performSort=function(){if(_sorting.length===0){return}_data=self._doSort(_data,0)};this._doSort=function(e,t){var n=_sorting[t].by,r=_sorting[t].dir,i=_sorting[t].type,s=_sorting[t].datefmt,o=_sorting[t].sfunc;if(t===_sorting.length-1){return self._getOrder(e,n,r,i,s,o)}t++;var u=self._getGroup(e,n,r,i,s),a=[],f,l,c;for(f=0;f<u.length;f++){c=self._doSort(u[f].items,t);for(l=0;l<c.length;l++){a.push(c[l])}}return a};this._getOrder=function(e,t,n,r,i,s){var o=[],u=[],a=n==="a"?1:-1,f,l,c,h;if(r===undefined){r="text"}if(r==="float"||r==="number"||r==="currency"||r==="numeric"){h=function(e){var t=parseFloat(String(e).replace(_stripNum,""));return isNaN(t)?Number.NEGATIVE_INFINITY:t}}else if(r==="int"||r==="integer"){h=function(e){return e?parseFloat(String(e).replace(_stripNum,"")):Number.NEGATIVE_INFINITY}}else if(r==="date"||r==="datetime"){h=function(e){return $.jgrid.parseDate(i,e).getTime()}}else if($.isFunction(r)){h=r}else{h=function(e){e=e?$.trim(String(e)):"";return _usecase?e:e.toLowerCase()}}$.each(e,function(e,n){l=t!==""?$.jgrid.getAccessor(n,t):n;if(l===undefined){l=""}l=h(l,n);u.push({vSort:l,index:e})});if($.isFunction(s)){u.sort(function(e,t){e=e.vSort;t=t.vSort;return s.call(this,e,t,a)})}else{u.sort(function(e,t){e=e.vSort;t=t.vSort;return self._compare(e,t,a)})}c=0;var p=e.length;while(c<p){f=u[c].index;o.push(e[f]);c++}return o};this._getGroup=function(e,t,n,r,i){var s=[],o=null,u=null,a;$.each(self._getOrder(e,t,n,r,i),function(e,n){a=$.jgrid.getAccessor(n,t);if(a==null){a=""}if(!self._equals(u,a)){u=a;if(o!==null){s.push(o)}o=self._group(t,a)}o.items.push(n)});if(o!==null){s.push(o)}return s};this.ignoreCase=function(){_usecase=false;return self};this.useCase=function(){_usecase=true;return self};this.trim=function(){_trim=true;return self};this.noTrim=function(){_trim=false;return self};this.execute=function(){var match=_query,results=[];if(match===null){return self}$.each(_data,function(){if(eval(match)){results.push(this)}});_data=results;return self};this.data=function(){return _data};this.select=function(e){self._performSort();if(!self._hasData()){return[]}self.execute();if($.isFunction(e)){var t=[];$.each(_data,function(n,r){t.push(e(r))});return t}return _data};this.hasMatch=function(){if(!self._hasData()){return false}self.execute();return _data.length>0};this.andNot=function(e,t,n){_negate=!_negate;return self.and(e,t,n)};this.orNot=function(e,t,n){_negate=!_negate;return self.or(e,t,n)};this.not=function(e,t,n){return self.andNot(e,t,n)};this.and=function(e,t,n){_queuedOperator=" && ";if(e===undefined){return self}return self._repeatCommand(e,t,n)};this.or=function(e,t,n){_queuedOperator=" || ";if(e===undefined){return self}return self._repeatCommand(e,t,n)};this.orBegin=function(){_orDepth++;return self};this.orEnd=function(){if(_query!==null){_query+=")"}return self};this.isNot=function(e){_negate=!_negate;return self.is(e)};this.is=function(e){self._append("this."+e);self._resetNegate();return self};this._compareValues=function(e,t,n,r,i){var s;if(_useProperties){s="jQuery.jgrid.getAccessor(this,'"+t+"')"}else{s="this"}if(n===undefined){n=null}var o=n,u=i.stype===undefined?"text":i.stype;if(n!==null){switch(u){case"int":case"integer":o=isNaN(Number(o))||o===""?"0":o;s="parseInt("+s+",10)";o="parseInt("+o+",10)";break;case"float":case"number":case"numeric":o=String(o).replace(_stripNum,"");o=isNaN(Number(o))||o===""?"0":o;s="parseFloat("+s+")";o="parseFloat("+o+")";break;case"date":case"datetime":o=String($.jgrid.parseDate(i.newfmt||"Y-m-d",o).getTime());s='jQuery.jgrid.parseDate("'+i.srcfmt+'",'+s+").getTime()";break;default:s=self._getStr(s);o=self._getStr('"'+self._toStr(o)+'"')}}self._append(s+" "+r+" "+o);self._setCommand(e,t);self._resetNegate();return self};this.equals=function(e,t,n){return self._compareValues(self.equals,e,t,"==",n)};this.notEquals=function(e,t,n){return self._compareValues(self.equals,e,t,"!==",n)};this.isNull=function(e,t,n){return self._compareValues(self.equals,e,null,"===",n)};this.greater=function(e,t,n){return self._compareValues(self.greater,e,t,">",n)};this.less=function(e,t,n){return self._compareValues(self.less,e,t,"<",n)};this.greaterOrEquals=function(e,t,n){return self._compareValues(self.greaterOrEquals,e,t,">=",n)};this.lessOrEquals=function(e,t,n){return self._compareValues(self.lessOrEquals,e,t,"<=",n)};this.startsWith=function(e,t){var n=t==null?e:t,r=_trim?$.trim(n.toString()).length:n.toString().length;if(_useProperties){self._append(self._getStr("jQuery.jgrid.getAccessor(this,'"+e+"')")+".substr(0,"+r+") == "+self._getStr('"'+self._toStr(t)+'"'))}else{if(t!=null){r=_trim?$.trim(t.toString()).length:t.toString().length}self._append(self._getStr("this")+".substr(0,"+r+") == "+self._getStr('"'+self._toStr(e)+'"'))}self._setCommand(self.startsWith,e);self._resetNegate();return self};this.endsWith=function(e,t){var n=t==null?e:t,r=_trim?$.trim(n.toString()).length:n.toString().length;if(_useProperties){self._append(self._getStr("jQuery.jgrid.getAccessor(this,'"+e+"')")+".substr("+self._getStr("jQuery.jgrid.getAccessor(this,'"+e+"')")+".length-"+r+","+r+') == "'+self._toStr(t)+'"')}else{self._append(self._getStr("this")+".substr("+self._getStr("this")+'.length-"'+self._toStr(e)+'".length,"'+self._toStr(e)+'".length) == "'+self._toStr(e)+'"')}self._setCommand(self.endsWith,e);self._resetNegate();return self};this.contains=function(e,t){if(_useProperties){self._append(self._getStr("jQuery.jgrid.getAccessor(this,'"+e+"')")+'.indexOf("'+self._toStr(t)+'",0) > -1')}else{self._append(self._getStr("this")+'.indexOf("'+self._toStr(e)+'",0) > -1')}self._setCommand(self.contains,e);self._resetNegate();return self};this.groupBy=function(e,t,n,r){if(!self._hasData()){return null}return self._getGroup(_data,e,t,n,r)};this.orderBy=function(e,t,n,r,i){t=t==null?"a":$.trim(t.toString().toLowerCase());if(n==null){n="text"}if(r==null){r="Y-m-d"}if(i==null){i=false}if(t==="desc"||t==="descending"){t="d"}if(t==="asc"||t==="ascending"){t="a"}_sorting.push({by:e,dir:t,type:n,datefmt:r,sfunc:i});return self};return self};return new QueryObject(source,null)},getMethod:function(e){return this.getAccessor($.fn.jqGrid,e)},extend:function(e){$.extend($.fn.jqGrid,e);if(!this.no_legacy_api){$.fn.extend(e)}}});$.fn.jqGrid=function(e){if(typeof e==="string"){var t=$.jgrid.getMethod(e);if(!t){throw"jqGrid - No such method: "+e}var n=$.makeArray(arguments).slice(1);return t.apply(this,n)}return this.each(function(){if(this.grid){return}var t;if(e!=null&&e.data!==undefined){t=e.data;e.data=[]}var n=$.extend(true,{url:"",height:150,page:1,rowNum:20,rowTotal:null,records:0,pager:"",pgbuttons:true,pginput:true,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:false,selarrrow:[],savedRow:[],shrinkToFit:true,xmlReader:{},jsonReader:{},subGrid:false,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,onInitGrid:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,beforeProcessing:null,onHeaderClick:null,viewrecords:false,loadonce:false,multiselect:false,multikey:false,editurl:null,search:false,caption:"",hidegrid:true,hiddengrid:false,postData:{},userData:{},treeGrid:false,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:false,gridstate:"visible",cellEdit:false,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[false,""],scroll:false,multiboxonly:false,deselectAfterSort:true,scrollrows:false,autowidth:false,scrollOffset:18,cellLayout:5,subGridWidth:20,multiselectWidth:20,gridview:false,rownumWidth:25,rownumbers:false,pagerpos:"center",recordpos:"right",footerrow:false,userDataOnFooter:false,hoverrows:true,altclass:"ui-priority-secondary",viewsortcols:[false,"vertical",true],resizeclass:"",autoencode:false,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:false,headertitles:false,scrollTimeout:40,data:[],_index:{},grouping:false,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:false,sortitems:[],sortnames:[],summary:[],summaryval:[],plusicon:"ui-icon-circlesmall-plus",minusicon:"ui-icon-circlesmall-minus",displayField:[],groupSummaryPos:[],formatDisplayField:[],_locgr:false},ignoreCase:false,cmTemplate:{},idPrefix:"",multiSort:false,minColWidth:33},$.jgrid.defaults,e||{});if(t!==undefined){n.data=t;e.data=t}var r=this,i={headers:[],cols:[],footers:[],dragStart:function(e,t,i){var s=$(this.bDiv).offset().left;this.resizing={idx:e,startX:t.pageX,sOL:t.pageX-s};this.hDiv.style.cursor="col-resize";this.curGbox=$("#rs_m"+$.jgrid.jqID(n.id),"#gbox_"+$.jgrid.jqID(n.id));this.curGbox.css({display:"block",left:t.pageX-s,top:i[1],height:i[2]});$(r).triggerHandler("jqGridResizeStart",[t,e]);if($.isFunction(n.resizeStart)){n.resizeStart.call(r,t,e)}document.onselectstart=function(){return false}},dragMove:function(e){if(this.resizing){var t=e.pageX-this.resizing.startX,r=this.headers[this.resizing.idx],i=n.direction==="ltr"?r.width+t:r.width-t,s,o;if(i>33){this.curGbox.css({left:this.resizing.sOL+t});if(n.forceFit===true){s=this.headers[this.resizing.idx+n.nv];o=n.direction==="ltr"?s.width-t:s.width+t;if(o>n.minColWidth){r.newWidth=i;s.newWidth=o}}else{this.newWidth=n.direction==="ltr"?n.tblwidth+t:n.tblwidth-t;r.newWidth=i}}}},dragEnd:function(){this.hDiv.style.cursor="default";if(this.resizing){var e=this.resizing.idx,t=this.headers[e].newWidth||this.headers[e].width;t=parseInt(t,10);this.resizing=false;$("#rs_m"+$.jgrid.jqID(n.id)).css("display","none");n.colModel[e].width=t;this.headers[e].width=t;this.headers[e].el.style.width=t+"px";this.cols[e].style.width=t+"px";if(this.footers.length>0){this.footers[e].style.width=t+"px"}if(n.forceFit===true){t=this.headers[e+n.nv].newWidth||this.headers[e+n.nv].width;this.headers[e+n.nv].width=t;this.headers[e+n.nv].el.style.width=t+"px";this.cols[e+n.nv].style.width=t+"px";if(this.footers.length>0){this.footers[e+n.nv].style.width=t+"px"}n.colModel[e+n.nv].width=t}else{n.tblwidth=this.newWidth||n.tblwidth;$("table:first",this.bDiv).css("width",n.tblwidth+"px");$("table:first",this.hDiv).css("width",n.tblwidth+"px");this.hDiv.scrollLeft=this.bDiv.scrollLeft;if(n.footerrow){$("table:first",this.sDiv).css("width",n.tblwidth+"px");this.sDiv.scrollLeft=this.bDiv.scrollLeft}}$(r).triggerHandler("jqGridResizeStop",[t,e]);if($.isFunction(n.resizeStop)){n.resizeStop.call(r,t,e)}}this.curGbox=null;document.onselectstart=function(){return true}},populateVisible:function(){if(i.timer){clearTimeout(i.timer)}i.timer=null;var e=$(i.bDiv).height();if(!e){return}var t=$("table:first",i.bDiv);var r,s;if(t[0].rows.length){try{r=t[0].rows[1];s=r?$(r).outerHeight()||i.prevRowHeight:i.prevRowHeight}catch(o){s=i.prevRowHeight}}if(!s){return}i.prevRowHeight=s;var u=n.rowNum;var a=i.scrollTop=i.bDiv.scrollTop;var f=Math.round(t.position().top)-a;var l=f+t.height();var c=s*u;var h,p,d;if(l<e&&f<=0&&(n.lastpage===undefined||(parseInt((l+a+c-1)/c,10)||0)<=n.lastpage)){p=parseInt((e-l+c-1)/c,10)||1;if(l>=0||p<2||n.scroll===true){h=(Math.round((l+a)/c)||0)+1;f=-1}else{f=1}}if(f>0){h=(parseInt(a/c,10)||0)+1;p=(parseInt((a+e)/c,10)||0)+2-h;d=true}if(p){if(n.lastpage&&(h>n.lastpage||n.lastpage===1||h===n.page&&h===n.lastpage)){return}if(i.hDiv.loading){i.timer=setTimeout(i.populateVisible,n.scrollTimeout)}else{n.page=h;if(d){i.selectionPreserver(t[0]);i.emptyRows.call(t[0],false,false)}i.populate(p)}}},scrollGrid:function(e){if(n.scroll){var t=i.bDiv.scrollTop;if(i.scrollTop===undefined){i.scrollTop=0}if(t!==i.scrollTop){i.scrollTop=t;if(i.timer){clearTimeout(i.timer)}i.timer=setTimeout(i.populateVisible,n.scrollTimeout)}}i.hDiv.scrollLeft=i.bDiv.scrollLeft;if(n.footerrow){i.sDiv.scrollLeft=i.bDiv.scrollLeft}if(e){e.stopPropagation()}},selectionPreserver:function(e){var t=e.p,n=t.selrow,r=t.selarrrow?$.makeArray(t.selarrrow):null,i=e.grid.bDiv.scrollLeft,s=function(){var o;t.selrow=null;t.selarrrow=[];if(t.multiselect&&r&&r.length>0){for(o=0;o<r.length;o++){if(r[o]!==n){$(e).jqGrid("setSelection",r[o],false,null)}}}if(n){$(e).jqGrid("setSelection",n,false,null)}e.grid.bDiv.scrollLeft=i;$(e).unbind(".selectionPreserver",s)};$(e).bind("jqGridGridComplete.selectionPreserver",s)}};if(this.tagName.toUpperCase()!=="TABLE"||this.id==null){alert("Element is not a table or has no id!");return}if(document.documentMode!==undefined){if(document.documentMode<=5){alert("Grid can not be used in this ('quirks') mode!");return}}$(this).empty().attr("tabindex","0");this.p=n;this.p.useProp=!!$.fn.prop;var s,o;if(this.p.colNames.length===0){for(s=0;s<this.p.colModel.length;s++){this.p.colNames[s]=this.p.colModel[s].label||this.p.colModel[s].name}}if(this.p.colNames.length!==this.p.colModel.length){alert($.jgrid.errors.model);return}var u=$("<div class='ui-jqgrid-view' role='grid'></div>"),a=$.jgrid.msie;r.p.direction=$.trim(r.p.direction.toLowerCase());if($.inArray(r.p.direction,["ltr","rtl"])===-1){r.p.direction="ltr"}o=r.p.direction;$(u).insertBefore(this);$(this).removeClass("scroll").appendTo(u);var f=$("<div class='ui-jqgrid ui-widget ui-widget-content ui-corner-all'></div>");$(f).attr({id:"gbox_"+this.id,dir:o}).insertBefore(u);$(u).attr("id","gview_"+this.id).appendTo(f);$("<div class='ui-widget-overlay jqgrid-overlay' id='lui_"+this.id+"'></div>").insertBefore(u);$("<div class='loading ui-state-default ui-state-active' id='load_"+this.id+"'>"+this.p.loadtext+"</div>").insertBefore(u);$(this).attr({cellspacing:"0",cellpadding:"0",border:"0",role:"presentation","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});var l=["shiftKey","altKey","ctrlKey"],c=function(e,t){e=parseInt(e,10);if(isNaN(e)){return t||0}return e},h=function(e,t,n,s,o,u){var a=r.p.colModel[e],f,l=a.align,c='style="',h=a.classes,p=a.name,d,v=[];if(l){c+="text-align:"+l+";"}if(a.hidden===true){c+="display:none;"}if(t===0){c+="width: "+i.headers[e].width+"px;"}else if($.isFunction(a.cellattr)||typeof a.cellattr==="string"&&$.jgrid.cellattr!=null&&$.isFunction($.jgrid.cellattr[a.cellattr])){f=$.isFunction(a.cellattr)?a.cellattr:$.jgrid.cellattr[a.cellattr];d=f.call(r,o,n,s,a,u);if(d&&typeof d==="string"){d=d.replace(/style/i,"style").replace(/title/i,"title");if(d.indexOf("title")>-1){a.title=false}if(d.indexOf("class")>-1){h=undefined}v=d.replace(/\-style/g,"-sti").split(/style/);if(v.length===2){v[1]=$.trim(v[1].replace(/\-sti/g,"-style").replace("=",""));if(v[1].indexOf("'")===0||v[1].indexOf('"')===0){v[1]=v[1].substring(1)}c+=v[1].replace(/'/gi,'"')}else{c+='"'}}}if(!v.length){v[0]="";c+='"'}c+=(h!==undefined?' class="'+h+'"':"")+(a.title&&n?' title="'+$.jgrid.stripHtml(n)+'"':"");c+=' aria-describedby="'+r.p.id+"_"+p+'"';return c+v[0]},p=function(e){return e==null||e===""?"&#160;":r.p.autoencode?$.jgrid.htmlEncode(e):String(e)},d=function(e,t,n,i,s){var o=r.p.colModel[n],u;if(o.formatter!==undefined){e=String(r.p.idPrefix)!==""?$.jgrid.stripPref(r.p.idPrefix,e):e;var a={rowId:e,colModel:o,gid:r.p.id,pos:n};if($.isFunction(o.formatter)){u=o.formatter.call(r,t,a,i,s)}else if($.fmatter){u=$.fn.fmatter.call(r,o.formatter,t,a,i,s)}else{u=p(t)}}else{u=p(t)}return u},v=function(e,t,n,r,i,s){var o,u;o=d(e,t,n,i,"add");u=h(n,r,o,i,e,s);return'<td role="gridcell" '+u+">"+o+"</td>"},m=function(e,t,n,i){var s='<input role="checkbox" type="checkbox"'+' id="jqg_'+r.p.id+"_"+e+'" class="cbox" name="jqg_'+r.p.id+"_"+e+'"'+(i?'checked="checked"':"")+"/>",o=h(t,n,"",null,e,true);return'<td role="gridcell" '+o+">"+s+"</td>"},g=function(e,t,n,r){var i=(parseInt(n,10)-1)*parseInt(r,10)+1+t,s=h(e,t,i,null,t,true);return'<td role="gridcell" class="ui-state-default jqgrid-rownum" '+s+">"+i+"</td>"},y=function(e){var t,n=[],i=0,s;for(s=0;s<r.p.colModel.length;s++){t=r.p.colModel[s];if(t.name!=="cb"&&t.name!=="subgrid"&&t.name!=="rn"){n[i]=e==="local"?t.name:e==="xml"||e==="xmlstring"?t.xmlmap||t.name:t.jsonmap||t.name;if(r.p.keyName!==false&&t.key===true){r.p.keyName=n[i]}i++}}return n},b=function(e){var t=r.p.remapColumns;if(!t||!t.length){t=$.map(r.p.colModel,function(e,t){return t})}if(e){t=$.map(t,function(t){return t<e?null:t-e})}return t},w=function(e,t){var n;if(this.p.deepempty){$(this.rows).slice(1).remove()}else{n=this.rows.length>0?this.rows[0]:null;$(this.firstChild).empty().append(n)}if(e&&this.p.scroll){$(this.grid.bDiv.firstChild).css({height:"auto"});$(this.grid.bDiv.firstChild.firstChild).css({height:0,display:"none"});if(this.grid.bDiv.scrollTop!==0){this.grid.bDiv.scrollTop=0}}if(t===true&&this.p.treeGrid){this.p.data=[];this.p._index={}}},E=function(){var e=r.p,t=e.data,n=t.length,i,s,o,u,a,f,l,c,h=e.localReader,p=e.colModel,d=h.cell,v=(e.multiselect===true?1:0)+(e.subGrid===true?1:0)+(e.rownumbers===true?1:0),m=e.scroll?$.jgrid.randId():1,g,w,E;if(e.datatype!=="local"||h.repeatitems!==true){return}g=b(v);w=y("local");u=e.keyIndex===false?$.isFunction(h.id)?h.id.call(r,t):h.id:e.keyIndex;for(i=0;i<n;i++){o=t[i];a=$.jgrid.getAccessor(o,u);if(a===undefined){if(typeof u==="number"&&p[u+v]!=null){a=$.jgrid.getAccessor(o,p[u+v].name)}if(a===undefined){a=m+i;if(d){f=$.jgrid.getAccessor(o,d)||o;a=f!=null&&f[u]!==undefined?f[u]:a;f=null}}}c={};c[h.id]=a;if(d){o=$.jgrid.getAccessor(o,d)||o}E=$.isArray(o)?g:w;for(s=0;s<E.length;s++){l=$.jgrid.getAccessor(o,E[s]);c[p[s+v].name]=l}$.extend(true,t[i],c)}},S=function(){var e=r.p.data.length,t,n,i;if(r.p.keyName===false||r.p.loadonce===true){t=r.p.localReader.id}else{t=r.p.keyName}r.p._index=[];for(n=0;n<e;n++){i=$.jgrid.getAccessor(r.p.data[n],t);if(i===undefined){i=String(n+1)}r.p._index[i]=n}},x=function(e,t,n,i,s,o){var u="-1",a="",f,l=t?"display:none;":"",c="ui-widget-content jqgrow ui-row-"+r.p.direction+(n?" "+n:"")+(o?" ui-state-highlight":""),h=$(r).triggerHandler("jqGridRowAttr",[i,s,e]);if(typeof h!=="object"){h=$.isFunction(r.p.rowattr)?r.p.rowattr.call(r,i,s,e):typeof r.p.rowattr==="string"&&$.jgrid.rowattr!=null&&$.isFunction($.jgrid.rowattr[r.p.rowattr])?$.jgrid.rowattr[r.p.rowattr].call(r,i,s,e):{}}if(!$.isEmptyObject(h)){if(h.hasOwnProperty("id")){e=h.id;delete h.id}if(h.hasOwnProperty("tabindex")){u=h.tabindex;delete h.tabindex}if(h.hasOwnProperty("style")){l+=h.style;delete h.style}if(h.hasOwnProperty("class")){c+=" "+h["class"];delete h["class"]}try{delete h.role}catch(p){}for(f in h){if(h.hasOwnProperty(f)){a+=" "+f+"="+h[f]}}}return'<tr role="row" id="'+e+'" tabindex="'+u+'" class="'+c+'"'+(l===""?"":' style="'+l+'"')+a+">"},T=function(e,t,n,i,s){var o=new Date,u=r.p.datatype!=="local"&&r.p.loadonce||r.p.datatype==="xmlstring",a="_id_",f=r.p.xmlReader,l=r.p.datatype==="local"?"local":"xml";if(u){r.p.data=[];r.p._index={};r.p.localReader.id=a}r.p.reccount=0;if($.isXMLDoc(e)){if(r.p.treeANode===-1&&!r.p.scroll){w.call(r,false,true);n=1}else{n=n>1?n:1}}else{return}var h=$(r),p,d,E=0,S,T=r.p.multiselect===true?1:0,N=0,C,k=r.p.rownumbers===true?1:0,L,A,O=[],M,_={},D,P,H=[],B=r.p.altRows===true?r.p.altclass:"",j;if(r.p.subGrid===true){N=1;C=$.jgrid.getMethod("addSubGridCell")}if(!f.repeatitems){O=y(l)}if(r.p.keyName===false){L=$.isFunction(f.id)?f.id.call(r,e):f.id}else{L=r.p.keyName}if(String(L).indexOf("[")===-1){if(O.length){A=function(e,t){return $(L,e).text()||t}}else{A=function(e,t){return $(f.cell,e).eq(L).text()||t}}}else{A=function(e,t){return e.getAttribute(L.replace(/[\[\]]/g,""))||t}}r.p.userData={};r.p.page=c($.jgrid.getXmlData(e,f.page),r.p.page);r.p.lastpage=c($.jgrid.getXmlData(e,f.total),1);r.p.records=c($.jgrid.getXmlData(e,f.records));if($.isFunction(f.userdata)){r.p.userData=f.userdata.call(r,e)||{}}else{$.jgrid.getXmlData(e,f.userdata,true).each(function(){r.p.userData[this.getAttribute("name")]=$(this).text()})}var F=$.jgrid.getXmlData(e,f.root,true);F=$.jgrid.getXmlData(F,f.row,true);if(!F){F=[]}var I=F.length,q=0,R=[],U=parseInt(r.p.rowNum,10),z=r.p.scroll?$.jgrid.randId():1,W;if(I>0&&r.p.page<=0){r.p.page=1}if(F&&I){if(s){U*=s+1}var X=$.isFunction(r.p.afterInsertRow),V=false,J;if(r.p.grouping){V=r.p.groupingView.groupCollapse===true;J=$.jgrid.getMethod("groupingPrepare")}while(q<I){D=F[q];P=A(D,z+q);P=r.p.idPrefix+P;W=n===0?0:n+1;j=(W+q)%2===1?B:"";var K=H.length;H.push("");if(k){H.push(g(0,q,r.p.page,r.p.rowNum))}if(T){H.push(m(P,k,q,false))}if(N){H.push(C.call(h,T+k,q+n))}if(f.repeatitems){if(!M){M=b(T+N+k)}var Q=$.jgrid.getXmlData(D,f.cell,true);$.each(M,function(e){var t=Q[this];if(!t){return false}S=t.textContent||t.text;_[r.p.colModel[e+T+N+k].name]=S;H.push(v(P,S,e+T+N+k,q+n,D,_))})}else{for(p=0;p<O.length;p++){S=$.jgrid.getXmlData(D,O[p]);_[r.p.colModel[p+T+N+k].name]=S;H.push(v(P,S,p+T+N+k,q+n,D,_))}}H[K]=x(P,V,j,_,D,false);H.push("</tr>");if(r.p.grouping){R.push(H);if(!r.p.groupingView._locgr){J.call(h,_,q)}H=[]}if(u||r.p.treeGrid===true){_[a]=$.jgrid.stripPref(r.p.idPrefix,P);r.p.data.push(_);r.p._index[_[a]]=r.p.data.length-1}if(r.p.gridview===false){$("tbody:first",t).append(H.join(""));h.triggerHandler("jqGridAfterInsertRow",[P,_,D]);if(X){r.p.afterInsertRow.call(r,P,_,D)}H=[]}_={};E++;q++;if(E===U){break}}}if(r.p.gridview===true){d=r.p.treeANode>-1?r.p.treeANode:0;if(r.p.grouping){if(!u){h.jqGrid("groupingRender",R,r.p.colModel.length,r.p.page,U);R=null}}else if(r.p.treeGrid===true&&d>0){$(r.rows[d]).after(H.join(""))}else{r.firstElementChild.innerHTML+=H.join("");r.grid.cols=r.rows[0].cells}}if(r.p.subGrid===true){try{h.jqGrid("addSubGrid",T+k)}catch(G){}}r.p.totaltime=new Date-o;if(E>0){if(r.p.records===0){r.p.records=I}}H=null;if(r.p.treeGrid===true){try{h.jqGrid("setTreeNode",d+1,E+d+1)}catch(Y){}}r.p.reccount=E;r.p.treeANode=-1;if(r.p.userDataOnFooter){h.jqGrid("footerData","set",r.p.userData,true)}if(u){r.p.records=I;r.p.lastpage=Math.ceil(I/U)}if(!i){r.updatepager(false,true)}if(u){while(E<I){D=F[E];P=A(D,E+z);P=r.p.idPrefix+P;if(f.repeatitems){if(!M){M=b(T+N+k)}var Z=$.jgrid.getXmlData(D,f.cell,true);$.each(M,function(e){var t=Z[this];if(!t){return false}S=t.textContent||t.text;_[r.p.colModel[e+T+N+k].name]=S})}else{for(p=0;p<O.length;p++){S=$.jgrid.getXmlData(D,O[p]);_[r.p.colModel[p+T+N+k].name]=S}}_[a]=$.jgrid.stripPref(r.p.idPrefix,P);if(r.p.grouping){J.call(h,_,E)}r.p.data.push(_);r.p._index[_[a]]=r.p.data.length-1;_={};E++}if(r.p.grouping){r.p.groupingView._locgr=true;h.jqGrid("groupingRender",R,r.p.colModel.length,r.p.page,U);R=null}}},N=function(e,t,n,i,s){var o=new Date;if(e){if(r.p.treeANode===-1&&!r.p.scroll){w.call(r,false,true);n=1}else{n=n>1?n:1}}else{return}var u,a="_id_",f,l=r.p.datatype!=="local"&&r.p.loadonce||r.p.datatype==="jsonstring";if(l){r.p.data=[];r.p._index={};r.p.localReader.id=a}r.p.reccount=0;if(r.p.datatype==="local"){u=r.p.localReader;f="local"}else{u=r.p.jsonReader;f="json"}var h=$(r),p=0,d,E,S,T=[],N,C=r.p.multiselect?1:0,k=r.p.subGrid===true?1:0,L,A=r.p.rownumbers===true?1:0,O=b(C+k+A),M=y(f),_,D,P,H,B={},j,F,I=[],q=r.p.altRows===true?r.p.altclass:"",R;r.p.page=c($.jgrid.getAccessor(e,u.page),r.p.page);r.p.lastpage=c($.jgrid.getAccessor(e,u.total),1);r.p.records=c($.jgrid.getAccessor(e,u.records));r.p.userData=$.jgrid.getAccessor(e,u.userdata)||{};if(k){L=$.jgrid.getMethod("addSubGridCell")}if(r.p.keyName===false){H=$.isFunction(u.id)?u.id.call(r,e):u.id}else{H=r.p.keyName}P=$.jgrid.getAccessor(e,u.root);if(P==null&&$.isArray(e)){P=e}if(!P){P=[]}D=P.length;E=0;if(D>0&&r.p.page<=0){r.p.page=1}var U=parseInt(r.p.rowNum,10),z=r.p.scroll?$.jgrid.randId():1,W,X=false,V;if(s){U*=s+1}if(r.p.datatype==="local"&&!r.p.deselectAfterSort){X=true}var J=$.isFunction(r.p.afterInsertRow),K=[],Q=false,G;if(r.p.grouping){Q=r.p.groupingView.groupCollapse===true;G=$.jgrid.getMethod("groupingPrepare")}while(E<D){N=P[E];F=$.jgrid.getAccessor(N,H);if(F===undefined){if(typeof H==="number"&&r.p.colModel[H+C+k+A]!=null){F=$.jgrid.getAccessor(N,r.p.colModel[H+C+k+A].name)}if(F===undefined){F=z+E;if(T.length===0){if(u.cell){var Y=$.jgrid.getAccessor(N,u.cell)||N;F=Y!=null&&Y[H]!==undefined?Y[H]:F;Y=null}}}}F=r.p.idPrefix+F;W=n===1?0:n;R=(W+E)%2===1?q:"";if(X){if(r.p.multiselect){V=$.inArray(F,r.p.selarrrow)!==-1}else{V=F===r.p.selrow}}var Z=I.length;I.push("");if(A){I.push(g(0,E,r.p.page,r.p.rowNum))}if(C){I.push(m(F,A,E,V))}if(k){I.push(L.call(h,C+A,E+n))}_=M;if(u.repeatitems){if(u.cell){N=$.jgrid.getAccessor(N,u.cell)||N}if($.isArray(N)){_=O}}for(S=0;S<_.length;S++){d=$.jgrid.getAccessor(N,_[S]);B[r.p.colModel[S+C+k+A].name]=d;I.push(v(F,d,S+C+k+A,E+n,N,B))}I[Z]=x(F,Q,R,B,N,V);I.push("</tr>");if(r.p.grouping){K.push(I);if(!r.p.groupingView._locgr){G.call(h,B,E)}I=[]}if(l||r.p.treeGrid===true){B[a]=$.jgrid.stripPref(r.p.idPrefix,F);r.p.data.push(B);r.p._index[B[a]]=r.p.data.length-1}if(r.p.gridview===false){$("#"+$.jgrid.jqID(r.p.id)+" tbody:first").append(I.join(""));h.triggerHandler("jqGridAfterInsertRow",[F,B,N]);if(J){r.p.afterInsertRow.call(r,F,B,N)}I=[]}B={};p++;E++;if(p===U){break}}if(r.p.gridview===true){j=r.p.treeANode>-1?r.p.treeANode:0;if(r.p.grouping){if(!l){h.jqGrid("groupingRender",K,r.p.colModel.length,r.p.page,U);K=null}}else if(r.p.treeGrid===true&&j>0){$(r.rows[j]).after(I.join(""))}else{r.firstElementChild.innerHTML+=I.join("");r.grid.cols=r.rows[0].cells}}if(r.p.subGrid===true){try{h.jqGrid("addSubGrid",C+A)}catch(et){}}r.p.totaltime=new Date-o;if(p>0){if(r.p.records===0){r.p.records=D}}I=null;if(r.p.treeGrid===true){try{h.jqGrid("setTreeNode",j+1,p+j+1)}catch(tt){}}r.p.reccount=p;r.p.treeANode=-1;if(r.p.userDataOnFooter){h.jqGrid("footerData","set",r.p.userData,true)}if(l){r.p.records=D;r.p.lastpage=Math.ceil(D/U)}if(!i){r.updatepager(false,true)}if(l){while(p<D&&P[p]){N=P[p];F=$.jgrid.getAccessor(N,H);if(F===undefined){if(typeof H==="number"&&r.p.colModel[H+C+k+A]!=null){F=$.jgrid.getAccessor(N,r.p.colModel[H+C+k+A].name)}if(F===undefined){F=z+p;if(T.length===0){if(u.cell){var nt=$.jgrid.getAccessor(N,u.cell)||N;F=nt!=null&&nt[H]!==undefined?nt[H]:F;nt=null}}}}if(N){F=r.p.idPrefix+F;_=M;if(u.repeatitems){if(u.cell){N=$.jgrid.getAccessor(N,u.cell)||N}if($.isArray(N)){_=O}}for(S=0;S<_.length;S++){B[r.p.colModel[S+C+k+A].name]=$.jgrid.getAccessor(N,_[S])}B[a]=$.jgrid.stripPref(r.p.idPrefix,F);if(r.p.grouping){G.call(h,B,p)}r.p.data.push(B);r.p._index[B[a]]=r.p.data.length-1;B={}}p++}if(r.p.grouping){r.p.groupingView._locgr=true;h.jqGrid("groupingRender",K,r.p.colModel.length,r.p.page,U);K=null}}},C=function(){function v(e){var t=0,n,r,s,o,u;if(e.groups!=null){r=e.groups.length&&e.groupOp.toString().toUpperCase()==="OR";if(r){d.orBegin()}for(n=0;n<e.groups.length;n++){if(t>0&&r){d.or()}try{v(e.groups[n])}catch(a){alert(a)}t++}if(r){d.orEnd()}}if(e.rules!=null){try{s=e.rules.length&&e.groupOp.toString().toUpperCase()==="OR";if(s){d.orBegin()}for(n=0;n<e.rules.length;n++){u=e.rules[n];o=e.groupOp.toString().toUpperCase();if(p[u.op]&&u.field){if(t>0&&o&&o==="OR"){d=d.or()}d=p[u.op](d,o)(u.field,u.data,i[u.field])}t++}if(s){d.orEnd()}}catch(f){alert(f)}}}var e=r.p.multiSort?[]:"",t=[],n=false,i={},s=[],o=[],u,a,f;if(!$.isArray(r.p.data)){return}var l=r.p.grouping?r.p.groupingView:false,c,h;$.each(r.p.colModel,function(){a=this.sorttype||"text";if(a==="date"||a==="datetime"){if(this.formatter&&typeof this.formatter==="string"&&this.formatter==="date"){if(this.formatoptions&&this.formatoptions.srcformat){u=this.formatoptions.srcformat}else{u=$.jgrid.formatter.date.srcformat}if(this.formatoptions&&this.formatoptions.newformat){f=this.formatoptions.newformat}else{f=$.jgrid.formatter.date.newformat}}else{u=f=this.datefmt||"Y-m-d"}i[this.name]={stype:a,srcfmt:u,newfmt:f,sfunc:this.sortfunc||null}}else{i[this.name]={stype:a,srcfmt:"",newfmt:"",sfunc:this.sortfunc||null}}if(r.p.grouping){for(h=0,c=l.groupField.length;h<c;h++){if(this.name===l.groupField[h]){var p=this.name;if(this.index){p=this.index}s[h]=i[p];o[h]=p}}}if(r.p.multiSort){if(this.lso){e.push(this.name);var d=this.lso.split("-");t.push(d[d.length-1])}}else{if(!n&&(this.index===r.p.sortname||this.name===r.p.sortname)){e=this.name;n=true}}});if(r.p.treeGrid){$(r).jqGrid("SortTree",e,r.p.sortorder,i[e].stype||"text",i[e].srcfmt||"");return}var p={eq:function(e){return e.equals},ne:function(e){return e.notEquals},lt:function(e){return e.less},le:function(e){return e.lessOrEquals},gt:function(e){return e.greater},ge:function(e){return e.greaterOrEquals},cn:function(e){return e.contains},nc:function(e,t){return t==="OR"?e.orNot().contains:e.andNot().contains},bw:function(e){return e.startsWith},bn:function(e,t){return t==="OR"?e.orNot().startsWith:e.andNot().startsWith},en:function(e,t){return t==="OR"?e.orNot().endsWith:e.andNot().endsWith},ew:function(e){return e.endsWith},ni:function(e,t){return t==="OR"?e.orNot().equals:e.andNot().equals},"in":function(e){return e.equals},nu:function(e){return e.isNull},nn:function(e,t){return t==="OR"?e.orNot().isNull:e.andNot().isNull}},d=$.jgrid.from(r.p.data);if(r.p.ignoreCase){d=d.ignoreCase()}if(r.p.search===true){var m=r.p.postData.filters;if(m){if(typeof m==="string"){m=$.jgrid.parse(m)}v(m)}else{try{d=p[r.p.postData.searchOper](d)(r.p.postData.searchField,r.p.postData.searchString,i[r.p.postData.searchField])}catch(g){}}}if(r.p.grouping){for(h=0;h<c;h++){d.orderBy(o[h],l.groupOrder[h],s[h].stype,s[h].srcfmt)}}if(r.p.multiSort){$.each(e,function(e){d.orderBy(this,t[e],i[this].stype,i[this].srcfmt,i[this].sfunc)})}else{if(e&&r.p.sortorder&&n){if(r.p.sortorder.toUpperCase()==="DESC"){d.orderBy(r.p.sortname,"d",i[e].stype,i[e].srcfmt,i[e].sfunc)}else{d.orderBy(r.p.sortname,"a",i[e].stype,i[e].srcfmt,i[e].sfunc)}}}var y=d.select(),b=parseInt(r.p.rowNum,10),w=y.length,E=parseInt(r.p.page,10),S=Math.ceil(w/b),x={};if((r.p.search||r.p.resetsearch)&&r.p.grouping&&r.p.groupingView._locgr){r.p.groupingView.groups=[];var T,N=$.jgrid.getMethod("groupingPrepare"),C,k;if(r.p.footerrow&&r.p.userDataOnFooter){for(C in r.p.userData){if(r.p.userData.hasOwnProperty(C)){r.p.userData[C]=0}}k=true}for(T=0;T<w;T++){if(k){for(C in r.p.userData){r.p.userData[C]+=parseFloat(y[T][C]||0)}}N.call($(r),y[T],T,b)}}y=y.slice((E-1)*b,E*b);d=null;i=null;x[r.p.localReader.total]=S;x[r.p.localReader.page]=E;x[r.p.localReader.records]=w;x[r.p.localReader.root]=y;x[r.p.localReader.userdata]=r.p.userData;y=null;return x},k=function(e,t){var n,i,s,o,u,a,f,l="",h,p=r.p.pager?"_"+$.jgrid.jqID(r.p.pager.substr(1)):"",d=r.p.toppager?"_"+r.p.toppager.substr(1):"";s=parseInt(r.p.page,10)-1;if(s<0){s=0}s=s*parseInt(r.p.rowNum,10);u=s+r.p.reccount;if(r.p.scroll){var v=$("tbody:first > tr:gt(0)",r.grid.bDiv);s=u-v.length;r.p.reccount=v.length;var m=v.outerHeight()||r.grid.prevRowHeight;if(m){var g=s*m;var y=parseInt(r.p.records,10)*m;$(">div:first",r.grid.bDiv).css({height:y}).children("div:first").css({height:g,display:g?"":"none"});if(r.grid.bDiv.scrollTop==0&&r.p.page>1){r.grid.bDiv.scrollTop=r.p.rowNum*(r.p.page-1)*m}}r.grid.bDiv.scrollLeft=r.grid.hDiv.scrollLeft}l=r.p.pager||"";l+=r.p.toppager?l?","+r.p.toppager:r.p.toppager:"";if(l){f=$.jgrid.formatter.integer||{};n=c(r.p.page);i=c(r.p.lastpage);$(".selbox",l)[this.p.useProp?"prop":"attr"]("disabled",false);if(r.p.pginput===true){$(".ui-pg-input",l).val(r.p.page);h=r.p.toppager?"#sp_1"+p+",#sp_1"+d:"#sp_1"+p;$(h).html($.fmatter?$.fmatter.util.NumberFormat(r.p.lastpage,f):r.p.lastpage)}if(r.p.viewrecords){if(r.p.reccount===0){$(".ui-paging-info",l).html(r.p.emptyrecords)}else{o=s+1;a=r.p.records;if($.fmatter){o=$.fmatter.util.NumberFormat(o,f);u=$.fmatter.util.NumberFormat(u,f);a=$.fmatter.util.NumberFormat(a,f)}$(".ui-paging-info",l).html($.jgrid.format(r.p.recordtext,o,u,a))}}if(r.p.pgbuttons===true){if(n<=0){n=i=0}if(n===1||n===0){$("#first"+p+", #prev"+p).addClass("ui-state-disabled").removeClass("ui-state-hover");if(r.p.toppager){$("#first_t"+d+", #prev_t"+d).addClass("ui-state-disabled").removeClass("ui-state-hover")}}else{$("#first"+p+", #prev"+p).removeClass("ui-state-disabled");if(r.p.toppager){$("#first_t"+d+", #prev_t"+d).removeClass("ui-state-disabled")}}if(n===i||n===0){$("#next"+p+", #last"+p).addClass("ui-state-disabled").removeClass("ui-state-hover");if(r.p.toppager){$("#next_t"+d+", #last_t"+d).addClass("ui-state-disabled").removeClass("ui-state-hover")}}else{$("#next"+p+", #last"+p).removeClass("ui-state-disabled");if(r.p.toppager){$("#next_t"+d+", #last_t"+d).removeClass("ui-state-disabled")}}}}if(e===true&&r.p.rownumbers===true){$(">td.jqgrid-rownum",r.rows).each(function(e){$(this).html(s+1+e)})}if(t&&r.p.jqgdnd){$(r).jqGrid("gridDnD","updateDnD")}$(r).triggerHandler("jqGridGridComplete");if($.isFunction(r.p.gridComplete)){r.p.gridComplete.call(r)}$(r).triggerHandler("jqGridAfterGridComplete")},L=function(){r.grid.hDiv.loading=true;if(r.p.hiddengrid){return}$(r).jqGrid("progressBar",{method:"show",loadtype:r.p.loadui,htmlcontent:r.p.loadtext})},A=function(){r.grid.hDiv.loading=false;$(r).jqGrid("progressBar",{method:"hide",loadtype:r.p.loadui})},O=function(e){if(!r.grid.hDiv.loading){var t=r.p.scroll&&e===false,n={},i,s,o=r.p.prmNames;if(r.p.page<=0){r.p.page=Math.min(1,r.p.lastpage)}if(o.search!==null){n[o.search]=r.p.search}if(o.nd!==null){n[o.nd]=(new Date).getTime()}if(o.rows!==null){n[o.rows]=r.p.rowNum}if(o.page!==null){n[o.page]=r.p.page}if(o.sort!==null){n[o.sort]=r.p.sortname}if(o.order!==null){n[o.order]=r.p.sortorder}if(r.p.rowTotal!==null&&o.totalrows!==null){n[o.totalrows]=r.p.rowTotal}var u=$.isFunction(r.p.loadComplete),a=u?r.p.loadComplete:null;var f=0;e=e||1;if(e>1){if(o.npage!==null){n[o.npage]=e;f=e-1;e=1}else{a=function(t){r.p.page++;r.grid.hDiv.loading=false;if(u){r.p.loadComplete.call(r,t)}O(e-1)}}}else if(o.npage!==null){delete r.p.postData[o.npage]}if(r.p.grouping){$(r).jqGrid("groupingSetup");var l=r.p.groupingView,c,h="";for(c=0;c<l.groupField.length;c++){var p=l.groupField[c];$.each(r.p.colModel,function(e,t){if(t.name===p&&t.index){p=t.index}});h+=p+" "+l.groupOrder[c]+", "}n[o.sort]=h+n[o.sort]}$.extend(r.p.postData,n);var d=!r.p.scroll?1:r.rows.length-1;var v=$(r).triggerHandler("jqGridBeforeRequest");if(v===false||v==="stop"){return}if($.isFunction(r.p.datatype)){r.p.datatype.call(r,r.p.postData,"load_"+r.p.id,d,e,f);return}if($.isFunction(r.p.beforeRequest)){v=r.p.beforeRequest.call(r);if(v===undefined){v=true}if(v===false){return}}i=r.p.datatype.toLowerCase();switch(i){case"json":case"jsonp":case"xml":case"script":$.ajax($.extend({url:r.p.url,type:r.p.mtype,dataType:i,data:$.isFunction(r.p.serializeGridData)?r.p.serializeGridData.call(r,r.p.postData):r.p.postData,success:function(n,s,o){if($.isFunction(r.p.beforeProcessing)){if(r.p.beforeProcessing.call(r,n,s,o)===false){A();return}}if(i==="xml"){T(n,r.grid.bDiv,d,e>1,f)}else{N(n,r.grid.bDiv,d,e>1,f)}$(r).triggerHandler("jqGridLoadComplete",[n]);if(a){a.call(r,n)}$(r).triggerHandler("jqGridAfterLoadComplete",[n]);if(t){r.grid.populateVisible()}if(r.p.loadonce||r.p.treeGrid){r.p.datatype="local"}n=null;if(e===1){A()}},error:function(t,n,i){if($.isFunction(r.p.loadError)){r.p.loadError.call(r,t,n,i)}if(e===1){A()}t=null},beforeSend:function(e,t){var n=true;if($.isFunction(r.p.loadBeforeSend)){n=r.p.loadBeforeSend.call(r,e,t)}if(n===undefined){n=true}if(n===false){return false}L()}},$.jgrid.ajaxOptions,r.p.ajaxGridOptions));break;case"xmlstring":L();s=typeof r.p.datastr!=="string"?r.p.datastr:$.parseXML(r.p.datastr);T(s,r.grid.bDiv);$(r).triggerHandler("jqGridLoadComplete",[s]);if(u){r.p.loadComplete.call(r,s)}$(r).triggerHandler("jqGridAfterLoadComplete",[s]);r.p.datatype="local";r.p.datastr=null;A();break;case"jsonstring":L();if(typeof r.p.datastr==="string"){s=$.jgrid.parse(r.p.datastr)}else{s=r.p.datastr}N(s,r.grid.bDiv);$(r).triggerHandler("jqGridLoadComplete",[s]);if(u){r.p.loadComplete.call(r,s)}$(r).triggerHandler("jqGridAfterLoadComplete",[s]);r.p.datatype="local";r.p.datastr=null;A();break;case"local":case"clientside":L();r.p.datatype="local";var m=C();N(m,r.grid.bDiv,d,e>1,f);$(r).triggerHandler("jqGridLoadComplete",[m]);if(a){a.call(r,m)}$(r).triggerHandler("jqGridAfterLoadComplete",[m]);if(t){r.grid.populateVisible()}A();break}}},M=function(e){$("#cb_"+$.jgrid.jqID(r.p.id),r.grid.hDiv)[r.p.useProp?"prop":"attr"]("checked",e);var t=r.p.frozenColumns?r.p.id+"_frozen":"";if(t){$("#cb_"+$.jgrid.jqID(r.p.id),r.grid.fhDiv)[r.p.useProp?"prop":"attr"]("checked",e)}},_=function(e,t){var n="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>",i="",s="<table cellspacing='0' cellpadding='0' border='0' style='table-layout:auto;' class='ui-pg-table'><tbody><tr>",u="",a,f,l,h,p,d,v,m=function(e){var t;if($.isFunction(r.p.onPaging)){t=r.p.onPaging.call(r,e)}if(t==="stop"){return false}r.p.selrow=null;if(r.p.multiselect){r.p.selarrrow=[];M(false)}r.p.savedRow=[];return true};e=e.substr(1);t+="_"+e;a="pg_"+e;f=e+"_left";l=e+"_center";h=e+"_right";$("#"+$.jgrid.jqID(e)).append("<div id='"+a+"' class='ui-pager-control' role='group'><table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table' style='width:100%;table-layout:fixed;height:100%;' role='row'><tbody><tr><td id='"+f+"' align='left'></td><td id='"+l+"' align='center' style='white-space:pre;'></td><td id='"+h+"' align='right'></td></tr></tbody></table></div>").attr("dir","ltr");if(r.p.rowList.length>0){u="<td dir='"+o+"'>";u+="<select class='ui-pg-selbox' role='listbox' "+(r.p.pgrecs?"title='"+r.p.pgrecs+"'":"")+">";var g;for(v=0;v<r.p.rowList.length;v++){g=r.p.rowList[v].toString().split(":");if(g.length===1){g[1]=g[0]}u+='<option role="option" value="'+g[0]+'"'+(c(r.p.rowNum,0)===c(g[0],0)?' selected="selected"':"")+">"+g[1]+"</option>"}u+="</select></td>"}if(o==="rtl"){s+=u}if(r.p.pginput===true){i="<td dir='"+o+"'>"+$.jgrid.format(r.p.pgtext||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+$.jgrid.jqID(e)+"'></span>")+"</td>"}if(r.p.pgbuttons===true){var y=["first"+t,"prev"+t,"next"+t,"last"+t];if(o==="rtl"){y.reverse()}s+="<td id='"+y[0]+"' class='ui-pg-button ui-corner-all' "+(r.p.pgfirst?"title='"+r.p.pgfirst+"'":"")+"><span class='ui-icon ui-icon-seek-first'></span></td>";s+="<td id='"+y[1]+"' class='ui-pg-button ui-corner-all' "+(r.p.pgprev?"title='"+r.p.pgprev+"'":"")+"><span class='ui-icon ui-icon-seek-prev'></span></td>";s+=i!==""?n+i+n:"";s+="<td id='"+y[2]+"' class='ui-pg-button ui-corner-all' "+(r.p.pgnext?"title='"+r.p.pgnext+"'":"")+"><span class='ui-icon ui-icon-seek-next'></span></td>";s+="<td id='"+y[3]+"' class='ui-pg-button ui-corner-all' "+(r.p.pglast?"title='"+r.p.pglast+"'":"")+"><span class='ui-icon ui-icon-seek-end'></span></td>"}else if(i!==""){s+=i}if(o==="ltr"){s+=u}s+="</tr></tbody></table>";if(r.p.viewrecords===true){$("td#"+e+"_"+r.p.recordpos,"#"+a).append("<div dir='"+o+"' style='text-align:"+r.p.recordpos+"' class='ui-paging-info'></div>")}$("td#"+e+"_"+r.p.pagerpos,"#"+a).append(s);d=$(".ui-jqgrid").css("font-size")||"11px";$(document.body).append("<div id='testpg' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+d+";visibility:hidden;' ></div>");p=$(s).clone().appendTo("#testpg").width();$("#testpg").remove();if(p>0){if(i!==""){p+=50}$("td#"+e+"_"+r.p.pagerpos,"#"+a).width(p)}r.p._nvtd=[];r.p._nvtd[0]=p?Math.floor((r.p.width-p)/2):Math.floor(r.p.width/3);r.p._nvtd[1]=0;s=null;$(".ui-pg-selbox","#"+a).bind("change",function(){if(!m("records")){return false}r.p.page=Math.round(r.p.rowNum*(r.p.page-1)/this.value-.5)+1;r.p.rowNum=this.value;if(r.p.pager){$(".ui-pg-selbox",r.p.pager).val(this.value)}if(r.p.toppager){$(".ui-pg-selbox",r.p.toppager).val(this.value)}O();return false});if(r.p.pgbuttons===true){$(".ui-pg-button","#"+a).hover(function(){if($(this).hasClass("ui-state-disabled")){this.style.cursor="default"}else{$(this).addClass("ui-state-hover");this.style.cursor="pointer"}},function(){if(!$(this).hasClass("ui-state-disabled")){$(this).removeClass("ui-state-hover");this.style.cursor="default"}});$("#first"+$.jgrid.jqID(t)+", #prev"+$.jgrid.jqID(t)+", #next"+$.jgrid.jqID(t)+", #last"+$.jgrid.jqID(t)).click(function(){if($(this).hasClass("ui-state-disabled")){return false}var e=c(r.p.page,1),n=c(r.p.lastpage,1),i=false,s=true,o=true,u=true,a=true;if(n===0||n===1){s=false;o=false;u=false;a=false}else if(n>1&&e>=1){if(e===1){s=false;o=false}else if(e===n){u=false;a=false}}else if(n>1&&e===0){u=false;a=false;e=n-1}if(!m(this.id)){return false}if(this.id==="first"+t&&s){r.p.page=1;i=true}if(this.id==="prev"+t&&o){r.p.page=e-1;i=true}if(this.id==="next"+t&&u){r.p.page=e+1;i=true}if(this.id==="last"+t&&a){r.p.page=n;i=true}if(i){O()}return false})}if(r.p.pginput===true){$("input.ui-pg-input","#"+a).keypress(function(e){var t=e.charCode||e.keyCode||0;if(t===13){if(!m("user")){return false}$(this).val(c($(this).val(),1));r.p.page=$(this).val()>0?$(this).val():r.p.page;O();return false}return this})}},D=function(e,t){var n,i="",s=r.p.colModel,o=false,u,a=r.p.frozenColumns?t:r.grid.headers[e].el,f="";$("span.ui-grid-ico-sort",a).addClass("ui-state-disabled");$(a).attr("aria-selected","false");if(s[e].lso){if(s[e].lso==="asc"){s[e].lso+="-desc";f="desc"}else if(s[e].lso==="desc"){s[e].lso+="-asc";f="asc"}else if(s[e].lso==="asc-desc"||s[e].lso==="desc-asc"){s[e].lso=""}}else{s[e].lso=f=s[e].firstsortorder||"asc"}if(f){$("span.s-ico",a).show();$("span.ui-icon-"+f,a).removeClass("ui-state-disabled");$(a).attr("aria-selected","true")}else{if(!r.p.viewsortcols[0]){$("span.s-ico",a).hide()}}r.p.sortorder="";$.each(s,function(e){if(this.lso){if(e>0&&o){i+=", "}n=this.lso.split("-");i+=s[e].index||s[e].name;i+=" "+n[n.length-1];o=true;r.p.sortorder=n[n.length-1]}});u=i.lastIndexOf(r.p.sortorder);i=i.substring(0,u);r.p.sortname=i},P=function(e,t,n,i,s){if(!r.p.colModel[t].sortable){return}if(r.p.savedRow.length>0){return}if(!n){if(r.p.lastsort===t&&r.p.sortname!==""){if(r.p.sortorder==="asc"){r.p.sortorder="desc"}else if(r.p.sortorder==="desc"){r.p.sortorder="asc"}}else{r.p.sortorder=r.p.colModel[t].firstsortorder||"asc"}r.p.page=1}if(r.p.multiSort){D(t,s)}else{if(i){if(r.p.lastsort===t&&r.p.sortorder===i&&!n){return}r.p.sortorder=i}var o=r.grid.headers[r.p.lastsort].el,u=r.p.frozenColumns?s:r.grid.headers[t].el;$("span.ui-grid-ico-sort",o).addClass("ui-state-disabled");$(o).attr("aria-selected","false");if(r.p.frozenColumns){r.grid.fhDiv.find("span.ui-grid-ico-sort").addClass("ui-state-disabled");r.grid.fhDiv.find("th").attr("aria-selected","false")}$("span.ui-icon-"+r.p.sortorder,u).removeClass("ui-state-disabled");$(u).attr("aria-selected","true");if(!r.p.viewsortcols[0]){if(r.p.lastsort!==t){if(r.p.frozenColumns){r.grid.fhDiv.find("span.s-ico").hide()}$("span.s-ico",o).hide();$("span.s-ico",u).show()}else if(r.p.sortname===""){$("span.s-ico",u).show()}}e=e.substring(5+r.p.id.length+1);r.p.sortname=r.p.colModel[t].index||e}if($(r).triggerHandler("jqGridSortCol",[r.p.sortname,t,r.p.sortorder])==="stop"){r.p.lastsort=t;return}if($.isFunction(r.p.onSortCol)){if(r.p.onSortCol.call(r,r.p.sortname,t,r.p.sortorder)==="stop"){r.p.lastsort=t;return}}if(r.p.datatype==="local"){if(r.p.deselectAfterSort){$(r).jqGrid("resetSelection")}}else{r.p.selrow=null;if(r.p.multiselect){M(false)}r.p.selarrrow=[];r.p.savedRow=[]}if(r.p.scroll){var a=r.grid.bDiv.scrollLeft;w.call(r,true,false);r.grid.hDiv.scrollLeft=a}if(r.p.subGrid&&r.p.datatype==="local"){$("td.sgexpanded","#"+$.jgrid.jqID(r.p.id)).each(function(){$(this).trigger("click")})}O();r.p.lastsort=t;if(r.p.sortname!==e&&t){r.p.lastsort=t}},H=function(){var e=0,t=$.jgrid.cell_width?0:c(r.p.cellLayout,0),n=0,s,o=c(r.p.scrollOffset,0),u,a=false,f,l=0,h;$.each(r.p.colModel,function(){if(this.hidden===undefined){this.hidden=false}if(r.p.grouping&&r.p.autowidth){var i=$.inArray(this.name,r.p.groupingView.groupField);if(i>=0&&r.p.groupingView.groupColumnShow.length>i){this.hidden=!r.p.groupingView.groupColumnShow[i]}}this.widthOrg=u=c(this.width,0);if(this.hidden===false){e+=u+t;if(this.fixed){l+=u+t}else{n++}}});if(isNaN(r.p.width)){r.p.width=e+(r.p.shrinkToFit===false&&!isNaN(r.p.height)?o:0)}i.width=r.p.width;r.p.tblwidth=e;if(r.p.shrinkToFit===false&&r.p.forceFit===true){r.p.forceFit=false}if(r.p.shrinkToFit===true&&n>0){f=i.width-t*n-l;if(!isNaN(r.p.height)){f-=o;a=true}e=0;$.each(r.p.colModel,function(i){if(this.hidden===false&&!this.fixed){u=Math.round(f*this.width/(r.p.tblwidth-t*n-l));this.width=u;e+=u;s=i}});h=0;if(a){if(i.width-l-(e+t*n)!==o){h=i.width-l-(e+t*n)-o}}else if(!a&&Math.abs(i.width-l-(e+t*n))!==1){h=i.width-l-(e+t*n)}r.p.colModel[s].width+=h;r.p.tblwidth=e+h+t*n+l;if(r.p.tblwidth>r.p.width){r.p.colModel[s].width-=r.p.tblwidth-parseInt(r.p.width,10);r.p.tblwidth=r.p.width}}},B=function(e){var t=e,n=e,i;for(i=e+1;i<r.p.colModel.length;i++){if(r.p.colModel[i].hidden!==true){n=i;break}}return n-t},j=function(e){var t=$(r.grid.headers[e].el),n=[t.position().left+t.outerWidth()];if(r.p.direction==="rtl"){n[0]=r.p.width-n[0]}n[0]-=r.grid.bDiv.scrollLeft;n.push($(r.grid.hDiv).position().top);n.push($(r.grid.bDiv).offset().top-$(r.grid.hDiv).offset().top+$(r.grid.bDiv).height());return n},F=function(e){var t,n=r.grid.headers,i=$.jgrid.getCellIndex(e);for(t=0;t<n.length;t++){if(e===n[t].el){i=t;break}}return i},I;this.p.id=this.id;if($.inArray(r.p.multikey,l)===-1){r.p.multikey=false}r.p.keyName=false;for(s=0;s<r.p.colModel.length;s++){I=typeof r.p.colModel[s].template==="string"?$.jgrid.cmTemplate!=null&&typeof $.jgrid.cmTemplate[r.p.colModel[s].template]==="object"?$.jgrid.cmTemplate[r.p.colModel[s].template]:{}:r.p.colModel[s].template;r.p.colModel[s]=$.extend(true,{},r.p.cmTemplate,I||{},r.p.colModel[s]);if(r.p.keyName===false&&r.p.colModel[s].key===true){r.p.keyName=r.p.colModel[s].name}}r.p.sortorder=r.p.sortorder.toLowerCase();$.jgrid.cell_width=$.jgrid.cellWidth();if(r.p.grouping===true){r.p.scroll=false;r.p.rownumbers=false;r.p.treeGrid=false;r.p.gridview=true}if(this.p.treeGrid===true){try{$(this).jqGrid("setTreeGrid")}catch(q){}if(r.p.datatype!=="local"){r.p.localReader={id:"_id_"}}}if(this.p.subGrid){try{$(r).jqGrid("setSubGrid")}catch(R){}}if(this.p.multiselect){this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox'/>");this.p.colModel.unshift({name:"cb",width:$.jgrid.cell_width?r.p.multiselectWidth+r.p.cellLayout:r.p.multiselectWidth,sortable:false,resizable:false,hidedlg:true,search:false,align:"center",fixed:true})}if(this.p.rownumbers){this.p.colNames.unshift("");this.p.colModel.unshift({name:"rn",width:r.p.rownumWidth,sortable:false,resizable:false,hidedlg:true,search:false,align:"center",fixed:true})}r.p.xmlReader=$.extend(true,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:true,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:true,cell:"cell"}},r.p.xmlReader);r.p.jsonReader=$.extend(true,{root:"rows",page:"page",total:"total",records:"records",repeatitems:true,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:true,cell:"cell"}},r.p.jsonReader);r.p.localReader=$.extend(true,{root:"rows",page:"page",total:"total",records:"records",repeatitems:false,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:true,cell:"cell"}},r.p.localReader);if(r.p.scroll){r.p.pgbuttons=false;r.p.pginput=false;r.p.rowList=[]}if(r.p.data.length){E();S()}var U="<thead><tr class='ui-jqgrid-labels' role='row'>",z,W,X,V,J,K,Q,G,Y,Z="",et="",tt=[],nt=[],rt=[];if(r.p.shrinkToFit===true&&r.p.forceFit===true){for(s=r.p.colModel.length-1;s>=0;s--){if(!r.p.colModel[s].hidden){r.p.colModel[s].resizable=false;break}}}if(r.p.viewsortcols[1]==="horizontal"){Z=" ui-i-asc";et=" ui-i-desc"}z=a?"class='ui-th-div-ie'":"";Y="<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc"+Z+" ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-"+o+"'></span>";Y+="<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+et+" ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-"+o+"'></span></span>";if(r.p.multiSort){tt=r.p.sortname.split(",");for(s=0;s<tt.length;s++){rt=$.trim(tt[s]).split(" ");tt[s]=$.trim(rt[0]);nt[s]=rt[1]?$.trim(rt[1]):r.p.sortorder||"asc"}}for(s=0;s<this.p.colNames.length;s++){var it=r.p.headertitles?' title="'+$.jgrid.stripHtml(r.p.colNames[s])+'"':"";U+="<th id='"+r.p.id+"_"+r.p.colModel[s].name+"' role='columnheader' class='ui-state-default ui-th-column ui-th-"+o+"'"+it+">";W=r.p.colModel[s].index||r.p.colModel[s].name;U+="<div id='jqgh_"+r.p.id+"_"+r.p.colModel[s].name+"' "+z+">"+r.p.colNames[s];if(!r.p.colModel[s].width){r.p.colModel[s].width=150}else{r.p.colModel[s].width=parseInt(r.p.colModel[s].width,10)}if(typeof r.p.colModel[s].title!=="boolean"){r.p.colModel[s].title=true}r.p.colModel[s].lso="";if(W===r.p.sortname){r.p.lastsort=s}if(r.p.multiSort){rt=$.inArray(W,tt);if(rt!==-1){r.p.colModel[s].lso=nt[rt]}}U+=Y+"</div></th>"}U+="</tr></thead>";Y=null;$(this).append(U);$("thead tr:first th",this).hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")});if(this.p.multiselect){var st=[],ot;$("#cb_"+$.jgrid.jqID(r.p.id),this).bind("click",function(){r.p.selarrrow=[];var e=r.p.frozenColumns===true?r.p.id+"_frozen":"";if(this.checked){$(r.rows).each(function(t){if(t>0){if(!$(this).hasClass("ui-subgrid")&&!$(this).hasClass("jqgroup")&&!$(this).hasClass("ui-state-disabled")&&!$(this).hasClass("jqfoot")){$("#jqg_"+$.jgrid.jqID(r.p.id)+"_"+$.jgrid.jqID(this.id))[r.p.useProp?"prop":"attr"]("checked",true);$(this).addClass("ui-state-highlight").attr("aria-selected","true");r.p.selarrrow.push(this.id);r.p.selrow=this.id;if(e){$("#jqg_"+$.jgrid.jqID(r.p.id)+"_"+$.jgrid.jqID(this.id),r.grid.fbDiv)[r.p.useProp?"prop":"attr"]("checked",true);$("#"+$.jgrid.jqID(this.id),r.grid.fbDiv).addClass("ui-state-highlight")}}}});ot=true;st=[]}else{$(r.rows).each(function(t){if(t>0){if(!$(this).hasClass("ui-subgrid")&&!$(this).hasClass("jqgroup")&&!$(this).hasClass("ui-state-disabled")&&!$(this).hasClass("jqfoot")){$("#jqg_"+$.jgrid.jqID(r.p.id)+"_"+$.jgrid.jqID(this.id))[r.p.useProp?"prop":"attr"]("checked",false);$(this).removeClass("ui-state-highlight").attr("aria-selected","false");st.push(this.id);if(e){$("#jqg_"+$.jgrid.jqID(r.p.id)+"_"+$.jgrid.jqID(this.id),r.grid.fbDiv)[r.p.useProp?"prop":"attr"]("checked",false);$("#"+$.jgrid.jqID(this.id),r.grid.fbDiv).removeClass("ui-state-highlight")}}}});r.p.selrow=null;ot=false}$(r).triggerHandler("jqGridSelectAll",[ot?r.p.selarrrow:st,ot]);if($.isFunction(r.p.onSelectAll)){r.p.onSelectAll.call(r,ot?r.p.selarrrow:st,ot)}})}if(r.p.autowidth===true){var ut=$(f).innerWidth();r.p.width=ut>0?ut:"nw"}H();$(f).css("width",i.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+r.p.id+"'>&#160;</div>");$(u).css("width",i.width+"px");U=$("thead:first",r).get(0);var at="";if(r.p.footerrow){at+="<table role='presentation' style='width:"+r.p.tblwidth+"px' class='ui-jqgrid-ftable' cellspacing='0' cellpadding='0' border='0'><tbody><tr role='row' class='ui-widget-content footrow footrow-"+o+"'>"}var ft=$("tr:first",U),lt="<tr class='jqgfirstrow' role='row' style='height:auto'>";r.p.disableClick=false;$("th",ft).each(function(e){X=r.p.colModel[e].width;if(r.p.colModel[e].resizable===undefined){r.p.colModel[e].resizable=true}if(r.p.colModel[e].resizable){V=document.createElement("span");$(V).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+o).css("cursor","col-resize");$(this).addClass(r.p.resizeclass)}else{V=""}$(this).css("width",X+"px").prepend(V);V=null;var t="";if(r.p.colModel[e].hidden){$(this).css("display","none");t="display:none;"}lt+="<td role='gridcell' style='height:0px;width:"+X+"px;"+t+"'></td>";i.headers[e]={width:X,el:this};J=r.p.colModel[e].sortable;if(typeof J!=="boolean"){r.p.colModel[e].sortable=true;J=true}var n=r.p.colModel[e].name;if(!(n==="cb"||n==="subgrid"||n==="rn")){if(r.p.viewsortcols[2]){$(">div",this).addClass("ui-jqgrid-sortable")}}if(J){if(r.p.multiSort){if(r.p.viewsortcols[0]){$("div span.s-ico",this).show();if(r.p.colModel[e].lso){$("div span.ui-icon-"+r.p.colModel[e].lso,this).removeClass("ui-state-disabled")}}else if(r.p.colModel[e].lso){$("div span.s-ico",this).show();$("div span.ui-icon-"+r.p.colModel[e].lso,this).removeClass("ui-state-disabled")}}else{if(r.p.viewsortcols[0]){$("div span.s-ico",this).show();if(e===r.p.lastsort){$("div span.ui-icon-"+r.p.sortorder,this).removeClass("ui-state-disabled")}}else if(e===r.p.lastsort&&r.p.sortname!==""){$("div span.s-ico",this).show();$("div span.ui-icon-"+r.p.sortorder,this).removeClass("ui-state-disabled")}}}if(r.p.footerrow){at+="<td role='gridcell' "+h(e,0,"",null,"",false)+">&#160;</td>"}}).mousedown(function(e){if($(e.target).closest("th>span.ui-jqgrid-resize").length!==1){return}var t=F(this);if(r.p.forceFit===true){r.p.nv=B(t)}i.dragStart(t,e,j(t));return false}).click(function(e){if(r.p.disableClick){r.p.disableClick=false;return false}var t="th>div.ui-jqgrid-sortable",n,i;if(!r.p.viewsortcols[2]){t="th>div>span>span.ui-grid-ico-sort"}var s=$(e.target).closest(t);if(s.length!==1){return}var o;if(r.p.frozenColumns){var u=$(this)[0].id.substring(r.p.id.length+1);$(r.p.colModel).each(function(e){if(this.name===u){o=e;return false}})}else{o=F(this)}if(!r.p.viewsortcols[2]){n=true;i=s.attr("sort")}if(o!=null){P($("div",this)[0].id,o,n,i,this)}return false});if(r.p.sortable&&$.fn.sortable){try{$(r).jqGrid("sortableColumns",ft)}catch(ct){}}if(r.p.footerrow){at+="</tr></tbody></table>"}lt+="</tr>";G=document.createElement("tbody");this.appendChild(G);$(this).addClass("ui-jqgrid-btable").append(lt);lt=null;var ht=$("<table class='ui-jqgrid-htable' style='width:"+r.p.tblwidth+"px' role='presentation' aria-labelledby='gbox_"+this.id+"' cellspacing='0' cellpadding='0' border='0'></table>").append(U),pt=r.p.caption&&r.p.hiddengrid===true?true:false,dt=$("<div class='ui-jqgrid-hbox"+(o==="rtl"?"-rtl":"")+"'></div>");U=null;i.hDiv=document.createElement("div");$(i.hDiv).css({width:i.width+"px"}).addClass("ui-state-default ui-jqgrid-hdiv").append(dt);$(dt).append(ht);ht=null;if(pt){$(i.hDiv).hide()}if(r.p.pager){if(typeof r.p.pager==="string"){if(r.p.pager.substr(0,1)!=="#"){r.p.pager="#"+r.p.pager}}else{r.p.pager="#"+$(r.p.pager).attr("id")}$(r.p.pager).css({width:i.width+"px"}).addClass("ui-state-default ui-jqgrid-pager ui-corner-bottom").appendTo(f);if(pt){$(r.p.pager).hide()}_(r.p.pager,"")}if(r.p.cellEdit===false&&r.p.hoverrows===true){$(r).bind("mouseover",function(e){Q=$(e.target).closest("tr.jqgrow");if($(Q).attr("class")!=="ui-subgrid"){$(Q).addClass("ui-state-hover")}}).bind("mouseout",function(e){Q=$(e.target).closest("tr.jqgrow");$(Q).removeClass("ui-state-hover")})}var vt,mt,gt;$(r).before(i.hDiv).click(function(e){K=e.target;Q=$(K,r.rows).closest("tr.jqgrow");if($(Q).length===0||Q[0].className.indexOf("ui-state-disabled")>-1||($(K,r).closest("table.ui-jqgrid-btable").attr("id")||"").replace("_frozen","")!==r.id){return this}var t=$(K).hasClass("cbox"),n=$(r).triggerHandler("jqGridBeforeSelectRow",[Q[0].id,e]);n=n===false||n==="stop"?false:true;if($.isFunction(r.p.beforeSelectRow)){var i=r.p.beforeSelectRow.call(r,Q[0].id,e);if(i===false||i==="stop"){n=false}}if(K.tagName==="A"||(K.tagName==="INPUT"||K.tagName==="TEXTAREA"||K.tagName==="OPTION"||K.tagName==="SELECT")&&!t){return}vt=Q[0].id;K=$(K).closest("tr.jqgrow>td");if(K.length>0){mt=$.jgrid.getCellIndex(K);gt=$(K).closest("td,th").html();$(r).triggerHandler("jqGridCellSelect",[vt,mt,gt,e]);if($.isFunction(r.p.onCellSelect)){r.p.onCellSelect.call(r,vt,mt,gt,e)}}if(r.p.cellEdit===true){if(r.p.multiselect&&t&&n){$(r).jqGrid("setSelection",vt,true,e)}else if(K.length>0){vt=Q[0].rowIndex;try{$(r).jqGrid("editCell",vt,mt,true)}catch(s){}}}if(!n){return}if(!r.p.multikey){if(r.p.multiselect&&r.p.multiboxonly){if(t){$(r).jqGrid("setSelection",vt,true,e)}else{var o=r.p.frozenColumns?r.p.id+"_frozen":"";$(r.p.selarrrow).each(function(e,t){var n=$(r).jqGrid("getGridRowById",t);if(n){$(n).removeClass("ui-state-highlight")}$("#jqg_"+$.jgrid.jqID(r.p.id)+"_"+$.jgrid.jqID(t))[r.p.useProp?"prop":"attr"]("checked",false);if(o){$("#"+$.jgrid.jqID(t),"#"+$.jgrid.jqID(o)).removeClass("ui-state-highlight");$("#jqg_"+$.jgrid.jqID(r.p.id)+"_"+$.jgrid.jqID(t),"#"+$.jgrid.jqID(o))[r.p.useProp?"prop":"attr"]("checked",false)}});r.p.selarrrow=[];$(r).jqGrid("setSelection",vt,true,e)}}else{$(r).jqGrid("setSelection",vt,true,e)}}else{if(e[r.p.multikey]){$(r).jqGrid("setSelection",vt,true,e)}else if(r.p.multiselect&&t){t=$("#jqg_"+$.jgrid.jqID(r.p.id)+"_"+vt).is(":checked");$("#jqg_"+$.jgrid.jqID(r.p.id)+"_"+vt)[r.p.useProp?"prop":"attr"]("checked",t)}}}).bind("reloadGrid",function(e,t){if(r.p.treeGrid===true){r.p.datatype=r.p.treedatatype}if(t&&t.current){r.grid.selectionPreserver(r)}if(r.p.datatype==="local"){$(r).jqGrid("resetSelection");if(r.p.data.length){E();S()}}else if(!r.p.treeGrid){r.p.selrow=null;if(r.p.multiselect){r.p.selarrrow=[];M(false)}r.p.savedRow=[]}if(r.p.scroll){w.call(r,true,false)}if(t&&t.page){var n=t.page;if(n>r.p.lastpage){n=r.p.lastpage}if(n<1){n=1}r.p.page=n;if(r.grid.prevRowHeight){r.grid.bDiv.scrollTop=(n-1)*r.grid.prevRowHeight*r.p.rowNum}else{r.grid.bDiv.scrollTop=0}}if(r.grid.prevRowHeight&&r.p.scroll){delete r.p.lastpage;r.grid.populateVisible()}else{r.grid.populate()}if(r.p._inlinenav===true){$(r).jqGrid("showAddEditButtons")}return false}).dblclick(function(e){K=e.target;Q=$(K,r.rows).closest("tr.jqgrow");if($(Q).length===0){return}vt=Q[0].rowIndex;mt=$.jgrid.getCellIndex(K);var t=$(r).triggerHandler("jqGridDblClickRow",[$(Q).attr("id"),vt,mt,e]);if(t!=null){return t}if($.isFunction(r.p.ondblClickRow)){t=r.p.ondblClickRow.call(r,$(Q).attr("id"),vt,mt,e);if(t!=null){return t}}}).bind("contextmenu",function(e){K=e.target;Q=$(K,r.rows).closest("tr.jqgrow");if($(Q).length===0){return}if(!r.p.multiselect){$(r).jqGrid("setSelection",Q[0].id,true,e)}vt=Q[0].rowIndex;mt=$.jgrid.getCellIndex(K);var t=$(r).triggerHandler("jqGridRightClickRow",[$(Q).attr("id"),vt,mt,e]);if(t!=null){return t}if($.isFunction(r.p.onRightClickRow)){t=r.p.onRightClickRow.call(r,$(Q).attr("id"),vt,mt,e);if(t!=null){return t}}});i.bDiv=document.createElement("div");if(a){if(String(r.p.height).toLowerCase()==="auto"){r.p.height="100%"}}$(i.bDiv).append($('<div style="position:relative;'+(a&&$.jgrid.msiever()<8?"height:0.01%;":"")+'"></div>').append("<div></div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:r.p.height+(isNaN(r.p.height)?"":"px"),width:i.width+"px"}).scroll(i.scrollGrid);$("table:first",i.bDiv).css({width:r.p.tblwidth+"px"});if(!$.support.tbody){if($("tbody",this).length===2){$("tbody:gt(0)",this).remove()}}if(r.p.multikey){if($.jgrid.msie){$(i.bDiv).bind("selectstart",function(){return false})}else{$(i.bDiv).bind("mousedown",function(){return false})}}if(pt){$(i.bDiv).hide()}i.cDiv=document.createElement("div");var yt=r.p.hidegrid===true?$("<a role='link' class='ui-jqgrid-titlebar-close ui-corner-all HeaderButton' "+(r.p.showhide?"title='"+r.p.showhide+"'":"")+" />").hover(function(){yt.addClass("ui-state-hover")},function(){yt.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-circle-triangle-n'></span>").css(o==="rtl"?"left":"right","0px"):"";$(i.cDiv).append(yt).append("<span class='ui-jqgrid-title'>"+r.p.caption+"</span>").addClass("ui-jqgrid-titlebar ui-jqgrid-caption"+(o==="rtl"?"-rtl":"")+" ui-widget-header ui-corner-top ui-helper-clearfix");$(i.cDiv).insertBefore(i.hDiv);if(r.p.toolbar[0]){i.uDiv=document.createElement("div");if(r.p.toolbar[1]==="top"){$(i.uDiv).insertBefore(i.hDiv)}else if(r.p.toolbar[1]==="bottom"){$(i.uDiv).insertAfter(i.hDiv)}if(r.p.toolbar[1]==="both"){i.ubDiv=document.createElement("div");$(i.uDiv).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id).insertBefore(i.hDiv);$(i.ubDiv).addClass("ui-userdata ui-state-default").attr("id","tb_"+this.id).insertAfter(i.hDiv);if(pt){$(i.ubDiv).hide()}}else{$(i.uDiv).width(i.width).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id)}if(pt){$(i.uDiv).hide()}}if(r.p.toppager){r.p.toppager=$.jgrid.jqID(r.p.id)+"_toppager";i.topDiv=$("<div id='"+r.p.toppager+"'></div>")[0];r.p.toppager="#"+r.p.toppager;$(i.topDiv).addClass("ui-state-default ui-jqgrid-toppager").width(i.width).insertBefore(i.hDiv);_(r.p.toppager,"_t")}if(r.p.footerrow){i.sDiv=$("<div class='ui-jqgrid-sdiv'></div>")[0];dt=$("<div class='ui-jqgrid-hbox"+(o==="rtl"?"-rtl":"")+"'></div>");$(i.sDiv).append(dt).width(i.width).insertAfter(i.hDiv);$(dt).append(at);i.footers=$(".ui-jqgrid-ftable",i.sDiv)[0].rows[0].cells;if(r.p.rownumbers){i.footers[0].className="ui-state-default jqgrid-rownum"}if(pt){$(i.sDiv).hide()}}dt=null;if(r.p.caption){var bt=r.p.datatype;if(r.p.hidegrid===true){$(".ui-jqgrid-titlebar-close",i.cDiv).click(function(e){var t=$.isFunction(r.p.onHeaderClick),n=".ui-jqgrid-bdiv, .ui-jqgrid-hdiv, .ui-jqgrid-pager, .ui-jqgrid-sdiv",s,o=this;if(r.p.toolbar[0]===true){if(r.p.toolbar[1]==="both"){n+=", #"+$(i.ubDiv).attr("id")}n+=", #"+$(i.uDiv).attr("id")}s=$(n,"#gview_"+$.jgrid.jqID(r.p.id)).length;if(r.p.gridstate==="visible"){$(n,"#gbox_"+$.jgrid.jqID(r.p.id)).slideUp("fast",function(){s--;if(s===0){$("span",o).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s");r.p.gridstate="hidden";if($("#gbox_"+$.jgrid.jqID(r.p.id)).hasClass("ui-resizable")){$(".ui-resizable-handle","#gbox_"+$.jgrid.jqID(r.p.id)).hide()}$(r).triggerHandler("jqGridHeaderClick",[r.p.gridstate,e]);if(t){if(!pt){r.p.onHeaderClick.call(r,r.p.gridstate,e)}}}})}else if(r.p.gridstate==="hidden"){$(n,"#gbox_"+$.jgrid.jqID(r.p.id)).slideDown("fast",function(){s--;if(s===0){$("span",o).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n");if(pt){r.p.datatype=bt;O();pt=false}r.p.gridstate="visible";if($("#gbox_"+$.jgrid.jqID(r.p.id)).hasClass("ui-resizable")){$(".ui-resizable-handle","#gbox_"+$.jgrid.jqID(r.p.id)).show()}$(r).triggerHandler("jqGridHeaderClick",[r.p.gridstate,e]);if(t){if(!pt){r.p.onHeaderClick.call(r,r.p.gridstate,e)}}}})}return false});if(pt){r.p.datatype="local";$(".ui-jqgrid-titlebar-close",i.cDiv).trigger("click")}}}else{$(i.cDiv).hide();if(!r.p.toppager){$(i.hDiv).addClass("ui-corner-top")}}$(i.hDiv).after(i.bDiv).mousemove(function(e){if(i.resizing){i.dragMove(e);return false}});$(".ui-jqgrid-labels",i.hDiv).bind("selectstart",function(){return false});$(document).bind("mouseup.jqGrid"+r.p.id,function(){if(i.resizing){i.dragEnd();return false}return true});r.formatCol=h;r.sortData=P;r.updatepager=k;r.refreshIndex=S;r.setHeadCheckBox=M;r.constructTr=x;r.formatter=function(e,t,n,r,i){return d(e,t,n,r,i)};$.extend(i,{populate:O,emptyRows:w,beginReq:L,endReq:A});this.grid=i;r.addXmlData=function(e){T(e,r.grid.bDiv)};r.addJSONData=function(e){N(e,r.grid.bDiv)};this.grid.cols=this.rows[0].cells;$(r).triggerHandler("jqGridInitGrid");if($.isFunction(r.p.onInitGrid)){r.p.onInitGrid.call(r)}O();r.p.hiddengrid=false})};$.jgrid.extend({getGridParam:function(e){var t=this[0];if(!t||!t.grid){return}if(!e){return t.p}return t.p[e]!==undefined?t.p[e]:null},setGridParam:function(e,t){return this.each(function(){if(t==null){t=false}if(this.grid&&typeof e==="object"){if(t===true){var n=$.extend({},this.p,e);this.p=n}else{$.extend(true,this.p,e)}}})},getGridRowById:function(e){var t;this.each(function(){try{var n=this.rows.length;while(n--){if(e.toString()===this.rows[n].id){t=this.rows[n];break}}}catch(r){t=$(this.grid.bDiv).find("#"+$.jgrid.jqID(e))}});return t},getDataIDs:function(){var e=[],t=0,n,r=0;this.each(function(){n=this.rows.length;if(n&&n>0){while(t<n){if($(this.rows[t]).hasClass("jqgrow")){e[r]=this.rows[t].id;r++}t++}}});return e},setSelection:function(e,t,n){return this.each(function(){function c(e){var t=$(r.grid.bDiv)[0].clientHeight,n=$(r.grid.bDiv)[0].scrollTop,i=$(r.rows[e]).position().top,s=r.rows[e].clientHeight;if(i+s>=t+n){$(r.grid.bDiv)[0].scrollTop=i-(t+n)+s+n}else if(i<t+n){if(i<n){$(r.grid.bDiv)[0].scrollTop=i}}}var r=this,i,s,o,u,a,f,l;if(e===undefined){return}t=t===false?false:true;s=$(r).jqGrid("getGridRowById",e);if(!s||!s.className||s.className.indexOf("ui-state-disabled")>-1){return}if(r.p.scrollrows===true){o=$(r).jqGrid("getGridRowById",e).rowIndex;if(o>=0){c(o)}}if(r.p.frozenColumns===true){f=r.p.id+"_frozen"}if(!r.p.multiselect){if(s.className!=="ui-subgrid"){if(r.p.selrow!==s.id){l=$(r).jqGrid("getGridRowById",r.p.selrow);if(l){$(l).removeClass("ui-state-highlight").attr({"aria-selected":"false",tabindex:"-1"})}$(s).addClass("ui-state-highlight").attr({"aria-selected":"true",tabindex:"0"});if(f){$("#"+$.jgrid.jqID(r.p.selrow),"#"+$.jgrid.jqID(f)).removeClass("ui-state-highlight");$("#"+$.jgrid.jqID(e),"#"+$.jgrid.jqID(f)).addClass("ui-state-highlight")}i=true}else{i=false}r.p.selrow=s.id;if(t){$(r).triggerHandler("jqGridSelectRow",[s.id,i,n]);if(r.p.onSelectRow){r.p.onSelectRow.call(r,s.id,i,n)}}}}else{r.setHeadCheckBox(false);r.p.selrow=s.id;u=$.inArray(r.p.selrow,r.p.selarrrow);if(u===-1){if(s.className!=="ui-subgrid"){$(s).addClass("ui-state-highlight").attr("aria-selected","true")}i=true;r.p.selarrrow.push(r.p.selrow)}else{if(s.className!=="ui-subgrid"){$(s).removeClass("ui-state-highlight").attr("aria-selected","false")}i=false;r.p.selarrrow.splice(u,1);a=r.p.selarrrow[0];r.p.selrow=a===undefined?null:a}$("#jqg_"+$.jgrid.jqID(r.p.id)+"_"+$.jgrid.jqID(s.id))[r.p.useProp?"prop":"attr"]("checked",i);if(f){if(u===-1){$("#"+$.jgrid.jqID(e),"#"+$.jgrid.jqID(f)).addClass("ui-state-highlight")}else{$("#"+$.jgrid.jqID(e),"#"+$.jgrid.jqID(f)).removeClass("ui-state-highlight")}$("#jqg_"+$.jgrid.jqID(r.p.id)+"_"+$.jgrid.jqID(e),"#"+$.jgrid.jqID(f))[r.p.useProp?"prop":"attr"]("checked",i)}if(t){$(r).triggerHandler("jqGridSelectRow",[s.id,i,n]);if(r.p.onSelectRow){r.p.onSelectRow.call(r,s.id,i,n)}}}})},resetSelection:function(e){return this.each(function(){var t=this,n,r;if(t.p.frozenColumns===true){r=t.p.id+"_frozen"}if(e!==undefined){n=e===t.p.selrow?t.p.selrow:e;$("#"+$.jgrid.jqID(t.p.id)+" tbody:first tr#"+$.jgrid.jqID(n)).removeClass("ui-state-highlight").attr("aria-selected","false");if(r){$("#"+$.jgrid.jqID(n),"#"+$.jgrid.jqID(r)).removeClass("ui-state-highlight")}if(t.p.multiselect){$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(n),"#"+$.jgrid.jqID(t.p.id))[t.p.useProp?"prop":"attr"]("checked",false);if(r){$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(n),"#"+$.jgrid.jqID(r))[t.p.useProp?"prop":"attr"]("checked",false)}t.setHeadCheckBox(false);var i=$.inArray($.jgrid.jqID(n),t.p.selarrrow);if(i!==-1){t.p.selarrrow.splice(i,1)}}n=null}else if(!t.p.multiselect){if(t.p.selrow){$("#"+$.jgrid.jqID(t.p.id)+" tbody:first tr#"+$.jgrid.jqID(t.p.selrow)).removeClass("ui-state-highlight").attr("aria-selected","false");if(r){$("#"+$.jgrid.jqID(t.p.selrow),"#"+$.jgrid.jqID(r)).removeClass("ui-state-highlight")}t.p.selrow=null}}else{$(t.p.selarrrow).each(function(e,n){$($(t).jqGrid("getGridRowById",n)).removeClass("ui-state-highlight").attr("aria-selected","false");$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(n))[t.p.useProp?"prop":"attr"]("checked",false);if(r){$("#"+$.jgrid.jqID(n),"#"+$.jgrid.jqID(r)).removeClass("ui-state-highlight");$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(n),"#"+$.jgrid.jqID(r))[t.p.useProp?"prop":"attr"]("checked",false)}});t.setHeadCheckBox(false);t.p.selarrrow=[];t.p.selrow=null}if(t.p.cellEdit===true){if(parseInt(t.p.iCol,10)>=0&&parseInt(t.p.iRow,10)>=0){$("td:eq("+t.p.iCol+")",t.rows[t.p.iRow]).removeClass("edit-cell ui-state-highlight");$(t.rows[t.p.iRow]).removeClass("selected-row ui-state-hover")}}t.p.savedRow=[]})},getRowData:function(e){var t={},n,r=false,i,s=0;this.each(function(){var o=this,u,a;if(e===undefined){r=true;n=[];i=o.rows.length}else{a=$(o).jqGrid("getGridRowById",e);if(!a){return t}i=2}while(s<i){if(r){a=o.rows[s]}if($(a).hasClass("jqgrow")){$('td[role="gridcell"]',a).each(function(e){u=o.p.colModel[e].name;if(u!=="cb"&&u!=="subgrid"&&u!=="rn"){if(o.p.treeGrid===true&&u===o.p.ExpandColumn){t[u]=$.jgrid.htmlDecode($("span:first",this).html())}else{try{t[u]=$.unformat.call(o,this,{rowId:a.id,colModel:o.p.colModel[e]},e)}catch(n){t[u]=$.jgrid.htmlDecode($(this).html())}}}});if(r){n.push(t);t={}}}s++}});return n||t},delRowData:function(e){var t=false,n,r,i;this.each(function(){var s=this;n=$(s).jqGrid("getGridRowById",e);if(!n){return false}if(s.p.subGrid){i=$(n).next();if(i.hasClass("ui-subgrid")){i.remove()}}$(n).remove();s.p.records--;s.p.reccount--;s.updatepager(true,false);t=true;if(s.p.multiselect){r=$.inArray(e,s.p.selarrrow);if(r!==-1){s.p.selarrrow.splice(r,1)}}if(s.p.multiselect&&s.p.selarrrow.length>0){s.p.selrow=s.p.selarrrow[s.p.selarrrow.length-1]}else{s.p.selrow=null}if(s.p.datatype==="local"){var o=$.jgrid.stripPref(s.p.idPrefix,e),u=s.p._index[o];if(u!==undefined){s.p.data.splice(u,1);s.refreshIndex()}}if(s.p.altRows===true&&t){var a=s.p.altclass;$(s.rows).each(function(e){if(e%2===1){$(this).addClass(a)}else{$(this).removeClass(a)}})}});return t},setRowData:function(e,t,n){var r,i=true,s;this.each(function(){if(!this.grid){return false}var o=this,u,a,f=typeof n,l={};a=$(this).jqGrid("getGridRowById",e);if(!a){return false}if(t){try{$(this.p.colModel).each(function(n){r=this.name;var i=$.jgrid.getAccessor(t,r);if(i!==undefined){l[r]=this.formatter&&typeof this.formatter==="string"&&this.formatter==="date"?$.unformat.date.call(o,i,this):i;u=o.formatter(e,l[r],n,t,"edit");s=this.title?{title:$.jgrid.stripHtml(u)}:{};if(o.p.treeGrid===true&&r===o.p.ExpandColumn){$("td[role='gridcell']:eq("+n+") > span:first",a).html(u).attr(s)}else{$("td[role='gridcell']:eq("+n+")",a).html(u).attr(s)}}});if(o.p.datatype==="local"){var c=$.jgrid.stripPref(o.p.idPrefix,e),h=o.p._index[c],p;if(o.p.treeGrid){for(p in o.p.treeReader){if(o.p.treeReader.hasOwnProperty(p)){delete l[o.p.treeReader[p]]}}}if(h!==undefined){o.p.data[h]=$.extend(true,o.p.data[h],l)}l=null}}catch(d){i=false}}if(i){if(f==="string"){$(a).addClass(n)}else if(n!==null&&f==="object"){$(a).css(n)}$(o).triggerHandler("jqGridAfterGridComplete")}});return i},addRowData:function(e,t,n,r){if(["first","last","before","after"].indexOf(n)==-1){n="last"}var i=false,s,o,u,a,f,l,c,h,p="",d,v,m,g,y,b;if(t){if($.isArray(t)){d=true;v=e}else{t=[t];d=false}this.each(function(){var w=this,E=t.length;f=w.p.rownumbers===true?1:0;u=w.p.multiselect===true?1:0;a=w.p.subGrid===true?1:0;if(!d){if(e!==undefined){e=String(e)}else{e=$.jgrid.randId();if(w.p.keyName!==false){v=w.p.keyName;if(t[0][v]!==undefined){e=t[0][v]}}}}m=w.p.altclass;var S=0,x="",T={},N=$.isFunction(w.p.afterInsertRow)?true:false;while(S<E){g=t[S];o=[];if(d){try{e=g[v];if(e===undefined){e=$.jgrid.randId()}}catch(C){e=$.jgrid.randId()}x=w.p.altRows===true?(w.rows.length-1)%2===0?m:"":""}b=e;e=w.p.idPrefix+e;if(f){p=w.formatCol(0,1,"",null,e,true);o[o.length]='<td role="gridcell" class="ui-state-default jqgrid-rownum" '+p+">0</td>"}if(u){h='<input role="checkbox" type="checkbox"'+' id="jqg_'+w.p.id+"_"+e+'" class="cbox"/>';p=w.formatCol(f,1,"",null,e,true);o[o.length]='<td role="gridcell" '+p+">"+h+"</td>"}if(a){o[o.length]=$(w).jqGrid("addSubGridCell",u+f,1)}for(c=u+a+f;c<w.p.colModel.length;c++){y=w.p.colModel[c];s=y.name;T[s]=g[s];h=w.formatter(e,$.jgrid.getAccessor(g,s),c,g);p=w.formatCol(c,1,h,g,e,T);o[o.length]='<td role="gridcell" '+p+">"+h+"</td>"}o.unshift(w.constructTr(e,false,x,T,g,false));o[o.length]="</tr>";if(w.rows.length===0){$("table:first",w.grid.bDiv).append(o.join(""))}else{switch(n){case"last":$(w.rows[w.rows.length-1]).after(o.join(""));l=w.rows.length-1;break;case"first":$(w.rows[0]).after(o.join(""));l=1;break;case"after":l=$(w).jqGrid("getGridRowById",r);if(l){if($(w.rows[l.rowIndex+1]).hasClass("ui-subgrid")){$(w.rows[l.rowIndex+1]).after(o)}else{$(l).after(o.join(""))}l=l.rowIndex+1}break;case"before":l=$(w).jqGrid("getGridRowById",r);if(l){$(l).before(o.join(""));l=l.rowIndex-1}break}}if(w.p.subGrid===true){$(w).jqGrid("addSubGrid",u+f,l)}w.p.records++;w.p.reccount++;$(w).triggerHandler("jqGridAfterInsertRow",[e,g,g]);if(N){w.p.afterInsertRow.call(w,e,g,g)}S++;if(w.p.datatype==="local"){T[w.p.localReader.id]=b;w.p._index[b]=w.p.data.length;w.p.data.push(T);T={}}}if(w.p.altRows===true&&!d){if(n==="last"){if((w.rows.length-1)%2===1){$(w.rows[w.rows.length-1]).addClass(m)}}else{$(w.rows).each(function(e){if(e%2===1){$(this).addClass(m)}else{$(this).removeClass(m)}})}}w.updatepager(true,true);i=true})}return i},footerData:function(e,t,n){function u(e){var t;for(t in e){if(e.hasOwnProperty(t)){return false}}return true}var r,i=false,s={},o;if(e==undefined){e="get"}if(typeof n!=="boolean"){n=true}e=e.toLowerCase();this.each(function(){var a=this,f;if(!a.grid||!a.p.footerrow){return false}if(e==="set"){if(u(t)){return false}}i=true;$(this.p.colModel).each(function(u){r=this.name;if(e==="set"){if(t[r]!==undefined){f=n?a.formatter("",t[r],u,t,"edit"):t[r];o=this.title?{title:$.jgrid.stripHtml(f)}:{};$("tr.footrow td:eq("+u+")",a.grid.sDiv).html(f).attr(o);i=true}}else if(e==="get"){s[r]=$("tr.footrow td:eq("+u+")",a.grid.sDiv).html()}})});return e==="get"?s:i},showHideCol:function(e,t){return this.each(function(){var n=this,r=false,i=$.jgrid.cell_width?0:n.p.cellLayout,s;if(!n.grid){return}if(typeof e==="string"){e=[e]}t=t!=="none"?"":"none";var o=t===""?true:false,u=n.p.groupHeader&&(typeof n.p.groupHeader==="object"||$.isFunction(n.p.groupHeader));if(u){$(n).jqGrid("destroyGroupHeader",false)}$(this.p.colModel).each(function(u){if($.inArray(this.name,e)!==-1&&this.hidden===o){if(n.p.frozenColumns===true&&this.frozen===true){return true}$("tr[role=row]",n.grid.hDiv).each(function(){$(this.cells[u]).css("display",t)});$(n.rows).each(function(){if(!$(this).hasClass("jqgroup")){$(this.cells[u]).css("display",t)}});if(n.p.footerrow){$("tr.footrow td:eq("+u+")",n.grid.sDiv).css("display",t)}s=parseInt(this.width,10);if(t==="none"){n.p.tblwidth-=s+i}else{n.p.tblwidth+=s+i}this.hidden=!o;r=true;$(n).triggerHandler("jqGridShowHideCol",[o,this.name,u])}});if(r===true){if(n.p.shrinkToFit===true&&!isNaN(n.p.height)){n.p.tblwidth+=parseInt(n.p.scrollOffset,10)}$(n).jqGrid("setGridWidth",n.p.shrinkToFit===true?n.p.tblwidth:n.p.width)}if(u){$(n).jqGrid("setGroupHeaders",n.p.groupHeader)}})},hideCol:function(e){return this.each(function(){$(this).jqGrid("showHideCol",e,"none")})},showCol:function(e){return this.each(function(){$(this).jqGrid("showHideCol",e,"")})},remapColumns:function(e,t,n){function r(t){var n;if(t.length){n=$.makeArray(t)}else{n=$.extend({},t)}$.each(e,function(e){t[e]=n[this]})}function s(t,n){$(">tr"+(n||""),t).each(function(){var t=this;var n=$.makeArray(t.cells);$.each(e,function(){var e=n[this];if(e){t.appendChild(e)}})})}var i=this.get(0);r(i.p.colModel);r(i.p.colNames);r(i.grid.headers);s($("thead:first",i.grid.hDiv),n&&":not(.ui-jqgrid-labels)");if(t){s($("#"+$.jgrid.jqID(i.p.id)+" tbody:first"),".jqgfirstrow, tr.jqgrow, tr.jqfoot")}if(i.p.footerrow){s($("tbody:first",i.grid.sDiv))}if(i.p.remapColumns){if(!i.p.remapColumns.length){i.p.remapColumns=$.makeArray(e)}else{r(i.p.remapColumns)}}i.p.lastsort=$.inArray(i.p.lastsort,e);if(i.p.treeGrid){i.p.expColInd=$.inArray(i.p.expColInd,e)}$(i).triggerHandler("jqGridRemapColumns",[e,t,n])},setGridWidth:function(e,t){return this.each(function(){if(!this.grid){return}var n=this,r,i=0,s=$.jgrid.cell_width?0:n.p.cellLayout,o,u=0,a=false,f=n.p.scrollOffset,l,c=0,h;if(typeof t!=="boolean"){t=n.p.shrinkToFit}if(isNaN(e)){return}e=parseInt(e,10);n.grid.width=n.p.width=e;$("#gbox_"+$.jgrid.jqID(n.p.id)).css("width",e+"px");$("#gview_"+$.jgrid.jqID(n.p.id)).css("width",e+"px");$(n.grid.bDiv).css("width",e+"px");$(n.grid.hDiv).css("width",e+"px");if(n.p.pager){$(n.p.pager).css("width",e+"px")}if(n.p.toppager){$(n.p.toppager).css("width",e+"px")}if(n.p.toolbar[0]===true){$(n.grid.uDiv).css("width",e+"px");if(n.p.toolbar[1]==="both"){$(n.grid.ubDiv).css("width",e+"px")}}if(n.p.footerrow){$(n.grid.sDiv).css("width",e+"px")}if(t===false&&n.p.forceFit===true){n.p.forceFit=false}if(t===true){$.each(n.p.colModel,function(){if(this.hidden===false){r=this.widthOrg;i+=r+s;if(this.fixed){c+=r+s}else{u++}}});if(u===0){return}n.p.tblwidth=i;l=e-s*u-c;if(!isNaN(n.p.height)){if($(n.grid.bDiv)[0].clientHeight<$(n.grid.bDiv)[0].scrollHeight||n.rows.length===1){a=true;l-=f}}i=0;var p=n.grid.cols.length>0;$.each(n.p.colModel,function(e){if(this.hidden===false&&!this.fixed){r=this.widthOrg;r=Math.round(l*r/(n.p.tblwidth-s*u-c));if(r<0){return}this.width=r;i+=r;n.grid.headers[e].width=r;n.grid.headers[e].el.style.width=r+"px";if(n.p.footerrow){n.grid.footers[e].style.width=r+"px"}if(p){n.grid.cols[e].style.width=r+"px"}o=e}});if(!o){return}h=0;if(a){if(e-c-(i+s*u)!==f){h=e-c-(i+s*u)-f}}else if(Math.abs(e-c-(i+s*u))!==1){h=e-c-(i+s*u)}n.p.colModel[o].width+=h;n.p.tblwidth=i+h+s*u+c;if(n.p.tblwidth>e){var d=n.p.tblwidth-parseInt(e,10);n.p.tblwidth=e;r=n.p.colModel[o].width=n.p.colModel[o].width-d}else{r=n.p.colModel[o].width}n.grid.headers[o].width=r;n.grid.headers[o].el.style.width=r+"px";if(p){n.grid.cols[o].style.width=r+"px"}if(n.p.footerrow){n.grid.footers[o].style.width=r+"px"}}if(n.p.tblwidth){$("table:first",n.grid.bDiv).css("width",n.p.tblwidth+"px");$("table:first",n.grid.hDiv).css("width",n.p.tblwidth+"px");n.grid.hDiv.scrollLeft=n.grid.bDiv.scrollLeft;if(n.p.footerrow){$("table:first",n.grid.sDiv).css("width",n.p.tblwidth+"px")}}})},setGridHeight:function(e){return this.each(function(){var t=this;if(!t.grid){return}var n=$(t.grid.bDiv);n.css({height:e+(isNaN(e)?"":"px")});if(t.p.frozenColumns===true){$("#"+$.jgrid.jqID(t.p.id)+"_frozen").parent().height(n.height()-16)}t.p.height=e;if(t.p.scroll){t.grid.populateVisible()}})},setCaption:function(e){return this.each(function(){this.p.caption=e;$("span.ui-jqgrid-title, span.ui-jqgrid-title-rtl",this.grid.cDiv).html(e);$(this.grid.cDiv).show();$(this.grid.hDiv).removeClass("ui-corner-top")})},setLabel:function(e,t,n,r){return this.each(function(){var i=this,s=-1;if(!i.grid){return}if(e!==undefined){$(i.p.colModel).each(function(t){if(this.name===e){s=t;return false}})}else{return}if(s>=0){var o=$("tr.ui-jqgrid-labels th:eq("+s+")",i.grid.hDiv);if(t){var u=$(".s-ico",o);$("[id^=jqgh_]",o).empty().html(t).append(u);i.p.colNames[s]=t}if(n){if(typeof n==="string"){$(o).addClass(n)}else{$(o).css(n)}}if(typeof r==="object"){$(o).attr(r)}}})},setCell:function(e,t,n,r,i,s){return this.each(function(){var o=this,u=-1,a,f;if(!o.grid){return}if(isNaN(t)){$(o.p.colModel).each(function(e){if(this.name===t){u=e;return false}})}else{u=parseInt(t,10)}if(u>=0){var l=$(o).jqGrid("getGridRowById",e);if(l){var c=$("td:eq("+u+")",l),h=0,p=[];if(n!==""||s===true){while(h<l.cells.length){p.push(l.cells[h].innerHTML);h++}a=o.formatter(e,n,u,p,"edit");f=o.p.colModel[u].title?{title:$.jgrid.stripHtml(a)}:{};if(o.p.treeGrid&&$(".tree-wrap",$(c)).length>0){$("span",$(c)).html(a).attr(f)}else{$(c).html(a).attr(f)}if(o.p.datatype==="local"){var d=o.p.colModel[u],v;n=d.formatter&&typeof d.formatter==="string"&&d.formatter==="date"?$.unformat.date.call(o,n,d):n;v=o.p._index[$.jgrid.stripPref(o.p.idPrefix,e)];if(v!==undefined){o.p.data[v][d.name]=n}}}if(typeof r==="string"){$(c).addClass(r)}else if(r){$(c).css(r)}if(typeof i==="object"){$(c).attr(i)}}}})},getCell:function(e,t){var n=false;this.each(function(){var r=this,i=-1;if(!r.grid){return}if(isNaN(t)){$(r.p.colModel).each(function(e){if(this.name===t){i=e;return false}})}else{i=parseInt(t,10)}if(i>=0){var s=$(r).jqGrid("getGridRowById",e);if(s){try{n=$.unformat.call(r,$("td:eq("+i+")",s),{rowId:s.id,colModel:r.p.colModel[i]},i)}catch(o){n=$.jgrid.htmlDecode($("td:eq("+i+")",s).html())}}}});return n},getCol:function(e,t,n){var r=[],i,s=0,o,u,a;t=typeof t!=="boolean"?false:t;if(n===undefined){n=false}this.each(function(){var f=this,l=-1;if(!f.grid){return}if(isNaN(e)){$(f.p.colModel).each(function(t){if(this.name===e){l=t;return false}})}else{l=parseInt(e,10)}if(l>=0){var c=f.rows.length,h=0,p=0;if(c&&c>0){while(h<c){if($(f.rows[h]).hasClass("jqgrow")){try{i=$.unformat.call(f,$(f.rows[h].cells[l]),{rowId:f.rows[h].id,colModel:f.p.colModel[l]},l)}catch(d){i=$.jgrid.htmlDecode(f.rows[h].cells[l].innerHTML)}if(n){a=parseFloat(i);if(!isNaN(a)){s+=a;if(u===undefined){u=o=a}o=Math.min(o,a);u=Math.max(u,a);p++}}else if(t){r.push({id:f.rows[h].id,value:i})}else{r.push(i)}}h++}if(n){switch(n.toLowerCase()){case"sum":r=s;break;case"avg":r=s/p;break;case"count":r=c-1;break;case"min":r=o;break;case"max":r=u;break}}}}});return r},clearGridData:function(e){return this.each(function(){var t=this;if(!t.grid){return}if(typeof e!=="boolean"){e=false}if(t.p.deepempty){$("#"+$.jgrid.jqID(t.p.id)+" tbody:first tr:gt(0)").remove()}else{var n=$("#"+$.jgrid.jqID(t.p.id)+" tbody:first tr:first")[0];$("#"+$.jgrid.jqID(t.p.id)+" tbody:first").empty().append(n)}if(t.p.footerrow&&e){$(".ui-jqgrid-ftable td",t.grid.sDiv).html("&#160;")}t.p.selrow=null;t.p.selarrrow=[];t.p.savedRow=[];t.p.records=0;t.p.page=1;t.p.lastpage=0;t.p.reccount=0;t.p.data=[];t.p._index={};t.updatepager(true,false)})},getInd:function(e,t){var n=false,r;this.each(function(){r=$(this).jqGrid("getGridRowById",e);if(r){n=t===true?r:r.rowIndex}});return n},bindKeys:function(e){var t=$.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:true},e||{});return this.each(function(){var e=this;if(!$("body").is("[role]")){$("body").attr("role","application")}e.p.scrollrows=t.scrollingRows;$(e).keydown(function(n){var r=$(e).find("tr[tabindex=0]")[0],i,s,u,a=e.p.treeReader.expanded_field;if(r){u=e.p._index[$.jgrid.stripPref(e.p.idPrefix,r.id)];if(n.keyCode===37||n.keyCode===38||n.keyCode===39||n.keyCode===40){if(n.keyCode===38){s=r.previousSibling;i="";if(s){if($(s).is(":hidden")){while(s){s=s.previousSibling;if(!$(s).is(":hidden")&&$(s).hasClass("jqgrow")){i=s.id;break}}}else{i=s.id}}$(e).jqGrid("setSelection",i,true,n);n.preventDefault()}if(n.keyCode===40){s=r.nextSibling;i="";if(s){if($(s).is(":hidden")){while(s){s=s.nextSibling;if(!$(s).is(":hidden")&&$(s).hasClass("jqgrow")){i=s.id;break}}}else{i=s.id}}$(e).jqGrid("setSelection",i,true,n);n.preventDefault()}if(n.keyCode===37){if(e.p.treeGrid&&e.p.data[u][a]){$(r).find("div.treeclick").trigger("click")}$(e).triggerHandler("jqGridKeyLeft",[e.p.selrow]);if($.isFunction(t.onLeftKey)){t.onLeftKey.call(e,e.p.selrow)}}if(n.keyCode===39){if(e.p.treeGrid&&!e.p.data[u][a]){$(r).find("div.treeclick").trigger("click")}$(e).triggerHandler("jqGridKeyRight",[e.p.selrow]);if($.isFunction(t.onRightKey)){t.onRightKey.call(e,e.p.selrow)}}}else if(n.keyCode===13){$(e).triggerHandler("jqGridKeyEnter",[e.p.selrow]);if($.isFunction(t.onEnter)){t.onEnter.call(e,e.p.selrow)}}else if(n.keyCode===32){$(e).triggerHandler("jqGridKeySpace",[e.p.selrow]);if($.isFunction(t.onSpace)){t.onSpace.call(e,e.p.selrow)}}}})})},unbindKeys:function(){return this.each(function(){$(this).unbind("keydown")})},getLocalRow:function(e){var t=false,n;this.each(function(){if(e!==undefined){n=this.p._index[$.jgrid.stripPref(this.p.idPrefix,e)];if(n>=0){t=this.p.data[n]}}});return t},progressBar:function(e){e=$.extend({htmlcontent:"",method:"hide",loadtype:"disable"},e||{});return this.each(function(){var t=e.method==="show"?true:false;if(e.htmlcontent!==""){$("#load_"+$.jgrid.jqID(this.p.id)).html(e.htmlcontent)}switch(e.loadtype){case"disable":break;case"enable":$("#load_"+$.jgrid.jqID(this.p.id)).toggle(t);break;case"block":$("#lui_"+$.jgrid.jqID(this.p.id)).toggle(t);$("#load_"+$.jgrid.jqID(this.p.id)).toggle(t);break}})},getColProp:function(e){var t={},n=this[0];if(!n.grid){return false}var r=n.p.colModel,i;for(i=0;i<r.length;i++){if(r[i].name===e){t=r[i];break}}return t},setColProp:function(e,t){return this.each(function(){if(this.grid){if(t){var n=this.p.colModel,r;for(r=0;r<n.length;r++){if(n[r].name===e){$.extend(true,this.p.colModel[r],t);break}}}}})},sortGrid:function(e,t,n){return this.each(function(){var r=this,i=-1,s,o=false;if(!r.grid){return}if(!e){e=r.p.sortname}for(s=0;s<r.p.colModel.length;s++){if(r.p.colModel[s].index===e||r.p.colModel[s].name===e){i=s;if(r.p.frozenColumns===true&&r.p.colModel[s].frozen===true){o=r.grid.fhDiv.find("#"+r.p.id+"_"+e)}break}}if(i!==-1){var u=r.p.colModel[i].sortable;if(!o){o=r.grid.headers[i].el}if(typeof u!=="boolean"){u=true}if(typeof t!=="boolean"){t=false}if(u){r.sortData("jqgh_"+r.p.id+"_"+e,i,t,n,o)}}})},clearBeforeUnload:function(){return this.each(function(){var e=this.grid;if($.isFunction(e.emptyRows)){e.emptyRows.call(this,true,true)}$(document).unbind("mouseup.jqGrid"+this.p.id);$(e.hDiv).unbind("mousemove");$(this).unbind();e.dragEnd=null;e.dragMove=null;e.dragStart=null;e.emptyRows=null;e.populate=null;e.populateVisible=null;e.scrollGrid=null;e.selectionPreserver=null;e.bDiv=null;e.cDiv=null;e.hDiv=null;e.cols=null;var t,n=e.headers.length;for(t=0;t<n;t++){e.headers[t].el=null}this.formatCol=null;this.sortData=null;this.updatepager=null;this.refreshIndex=null;this.setHeadCheckBox=null;this.constructTr=null;this.formatter=null;this.addXmlData=null;this.addJSONData=null;this.grid=null})},GridDestroy:function(){return this.each(function(){if(this.grid){if(this.p.pager){$(this.p.pager).remove()}try{$(this).jqGrid("clearBeforeUnload");$("#gbox_"+$.jgrid.jqID(this.id)).remove();$("#alertmod_"+$.jgrid.jqID(this.id)).remove()}catch(e){}}})},GridUnload:function(){return this.each(function(){if(!this.grid){return}var e={id:$(this).attr("id"),cl:$(this).attr("class")};if(this.p.pager){$(this.p.pager).empty().removeClass("ui-state-default ui-jqgrid-pager ui-corner-bottom")}var t=document.createElement("table");$(t).attr({id:e.id});t.className=e.cl;var n=$.jgrid.jqID(this.id);$(t).removeClass("ui-jqgrid-btable");if($(this.p.pager).parents("#gbox_"+n).length===1){$(t).insertBefore("#gbox_"+n).show();$(this.p.pager).insertBefore("#gbox_"+n)}else{$(t).insertBefore("#gbox_"+n).show()}$(this).jqGrid("clearBeforeUnload");$("#gbox_"+n).remove()})},setGridState:function(e){return this.each(function(){if(!this.grid){return}var t=this;if(e==="hidden"){$(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+$.jgrid.jqID(t.p.id)).slideUp("fast");if(t.p.pager){$(t.p.pager).slideUp("fast")}if(t.p.toppager){$(t.p.toppager).slideUp("fast")}if(t.p.toolbar[0]===true){if(t.p.toolbar[1]==="both"){$(t.grid.ubDiv).slideUp("fast")}$(t.grid.uDiv).slideUp("fast")}if(t.p.footerrow){$(".ui-jqgrid-sdiv","#gbox_"+$.jgrid.jqID(t.p.id)).slideUp("fast")}$(".ui-jqgrid-titlebar-close span",t.grid.cDiv).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s");t.p.gridstate="hidden"}else if(e==="visible"){$(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+$.jgrid.jqID(t.p.id)).slideDown("fast");if(t.p.pager){$(t.p.pager).slideDown("fast")}if(t.p.toppager){$(t.p.toppager).slideDown("fast")}if(t.p.toolbar[0]===true){if(t.p.toolbar[1]==="both"){$(t.grid.ubDiv).slideDown("fast")}$(t.grid.uDiv).slideDown("fast")}if(t.p.footerrow){$(".ui-jqgrid-sdiv","#gbox_"+$.jgrid.jqID(t.p.id)).slideDown("fast")}$(".ui-jqgrid-titlebar-close span",t.grid.cDiv).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n");t.p.gridstate="visible"}})},destroyGroupHeader:function(e){if(e===undefined){e=true}return this.each(function(){var t=this,n,r,i,s,o,u,a=t.grid,f=$("table.ui-jqgrid-htable thead",a.hDiv),l=t.p.colModel,c;if(!a){return}$(this).unbind(".setGroupHeaders");n=$("<tr>",{role:"row"}).addClass("ui-jqgrid-labels");s=a.headers;for(r=0,i=s.length;r<i;r++){c=l[r].hidden?"none":"";o=$(s[r].el).width(s[r].width).css("display",c);try{o.removeAttr("rowSpan")}catch(h){o.attr("rowSpan",1)}n.append(o);u=o.children("span.ui-jqgrid-resize");if(u.length>0){u[0].style.height=""}o.children("div")[0].style.top=""}$(f).children("tr.ui-jqgrid-labels").remove();$(f).prepend(n);if(e===true){$(t).jqGrid("setGridParam",{groupHeader:null})}})},setGroupHeaders:function(e){e=$.extend({useColSpanStyle:false,groupHeaders:[]},e||{});return this.each(function(){this.p.groupHeader=e;var t=this,n,r,i=0,s,u,a,f,l,c,h,p,d,v,m=t.p.colModel,g=m.length,y=t.grid.headers,b=$("table.ui-jqgrid-htable",t.grid.hDiv),w=b.children("thead").children("tr.ui-jqgrid-labels:last").addClass("jqg-second-row-header"),E=b.children("thead"),S,x=b.find(".jqg-first-row-header");if(x[0]===undefined){x=$("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto")}else{x.empty()}var T,N=function(e,t){var n=t.length,r;for(r=0;r<n;r++){if(t[r].startColumnName===e){return r}}return-1};$(t).prepend(E);s=$("<tr>",{role:"row"}).addClass("ui-jqgrid-labels jqg-third-row-header");for(n=0;n<g;n++){a=y[n].el;f=$(a);r=m[n];l={height:"0px",width:y[n].width+"px",display:r.hidden?"none":""};$("<th>",{role:"gridcell"}).css(l).addClass("ui-first-th-"+t.p.direction).appendTo(x);a.style.width="";c=N(r.name,e.groupHeaders);if(c>=0){h=e.groupHeaders[c];p=h.numberOfColumns;d=h.titleText;for(v=0,c=0;c<p&&n+c<g;c++){if(!m[n+c].hidden){v++}}u=$("<th>").attr({role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+t.p.direction).css({height:"22px","border-top":"0 none"}).html(d);if(v>0){u.attr("colspan",String(v))}if(t.p.headertitles){u.attr("title",u.text())}if(v===0){u.hide()}f.before(u);s.append(a);i=p-1}else{if(i===0){if(e.useColSpanStyle){f.attr("rowspan","2")}else{$("<th>",{role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+t.p.direction).css({display:r.hidden?"none":"","border-top":"0 none"}).insertBefore(f);s.append(a)}}else{s.append(a);i--}}}S=$(t).children("thead");S.prepend(x);s.insertAfter(w);b.append(S);if(e.useColSpanStyle){b.find("span.ui-jqgrid-resize").each(function(){var e=$(this).parent();if(e.is(":visible")){this.style.cssText="height: "+e.height()+"px !important; cursor: col-resize;"}});b.find("div.ui-jqgrid-sortable").each(function(){var e=$(this),t=e.parent();if(t.is(":visible")&&t.is(":has(span.ui-jqgrid-resize)")){e.css("top",(t.height()-e.outerHeight())/2+"px")}})}T=S.find("tr.jqg-first-row-header");$(t).bind("jqGridResizeStop.setGroupHeaders",function(e,t,n){T.find("th").eq(n).width(t)})})},setFrozenColumns:function(){return this.each(function(){if(!this.grid){return}var e=this,t=e.p.colModel,n=0,r=t.length,i=-1,s=false;if(e.p.subGrid===true||e.p.treeGrid===true||e.p.cellEdit===true||e.p.sortable||e.p.scroll){return}if(e.p.rownumbers){n++}if(e.p.multiselect){n++}while(n<r){if(t[n].frozen===true){s=true;i=n}else{break}n++}if(i>=0&&s){var o=e.p.caption?$(e.grid.cDiv).outerHeight():0,u=$(".ui-jqgrid-htable","#gview_"+$.jgrid.jqID(e.p.id)).height();if(e.p.toppager){o=o+$(e.grid.topDiv).outerHeight()}if(e.p.toolbar[0]===true){if(e.p.toolbar[1]!=="bottom"){o=o+$(e.grid.uDiv).outerHeight()}}e.grid.fhDiv=$('<div style="position:absolute;left:0px;top:'+o+"px;height:"+u+'px;" class="frozen-div ui-state-default ui-jqgrid-hdiv"></div>');e.grid.fbDiv=$('<div style="position:absolute;left:0px;top:'+(parseInt(o,10)+parseInt(u,10)+1)+'px;overflow-y:hidden" class="frozen-bdiv ui-jqgrid-bdiv"></div>');$("#gview_"+$.jgrid.jqID(e.p.id)).append(e.grid.fhDiv);var a=$(".ui-jqgrid-htable","#gview_"+$.jgrid.jqID(e.p.id)).clone(true);if(e.p.groupHeader){$("tr.jqg-first-row-header, tr.jqg-third-row-header",a).each(function(){$("th:gt("+i+")",this).remove()});var f=-1,l=-1,c,h;$("tr.jqg-second-row-header th",a).each(function(){c=parseInt($(this).attr("colspan"),10);h=parseInt($(this).attr("rowspan"),10);if(h){f++;l++}if(c){f=f+c;l++}if(f===i){return false}});if(f!==i){l=i}$("tr.jqg-second-row-header",a).each(function(){$("th:gt("+l+")",this).remove()})}else{$("tr",a).each(function(){$("th:gt("+i+")",this).remove()})}$(a).width(1);$(e.grid.fhDiv).append(a).mousemove(function(t){if(e.grid.resizing){e.grid.dragMove(t);return false}});if(e.p.footerrow){var p=$(".ui-jqgrid-bdiv","#gview_"+$.jgrid.jqID(e.p.id)).height();e.grid.fsDiv=$('<div style="position:absolute;left:0px;top:'+(parseInt(o,10)+parseInt(u,10)+parseInt(p,10)+1)+'px;" class="frozen-sdiv ui-jqgrid-sdiv"></div>');$("#gview_"+$.jgrid.jqID(e.p.id)).append(e.grid.fsDiv);var d=$(".ui-jqgrid-ftable","#gview_"+$.jgrid.jqID(e.p.id)).clone(true);$("tr",d).each(function(){$("td:gt("+i+")",this).remove()});$(d).width(1);$(e.grid.fsDiv).append(d)}$(e).bind("jqGridResizeStop.setFrozenColumns",function(t,n,r){var i=$(".ui-jqgrid-htable",e.grid.fhDiv);$("th:eq("+r+")",i).width(n);var s=$(".ui-jqgrid-btable",e.grid.fbDiv);$("tr:first td:eq("+r+")",s).width(n);if(e.p.footerrow){var o=$(".ui-jqgrid-ftable",e.grid.fsDiv);$("tr:first td:eq("+r+")",o).width(n)}});$(e).bind("jqGridSortCol.setFrozenColumns",function(t,n,r){var i=$("tr.ui-jqgrid-labels:last th:eq("+e.p.lastsort+")",e.grid.fhDiv),s=$("tr.ui-jqgrid-labels:last th:eq("+r+")",e.grid.fhDiv);$("span.ui-grid-ico-sort",i).addClass("ui-state-disabled");$(i).attr("aria-selected","false");$("span.ui-icon-"+e.p.sortorder,s).removeClass("ui-state-disabled");$(s).attr("aria-selected","true");if(!e.p.viewsortcols[0]){if(e.p.lastsort!==r){$("span.s-ico",i).hide();$("span.s-ico",s).show()}}});$("#gview_"+$.jgrid.jqID(e.p.id)).append(e.grid.fbDiv);$(e.grid.bDiv).scroll(function(){$(e.grid.fbDiv).scrollTop($(this).scrollTop())});if(e.p.hoverrows===true){$("#"+$.jgrid.jqID(e.p.id)).unbind("mouseover").unbind("mouseout")}$(e).bind("jqGridAfterGridComplete.setFrozenColumns",function(){$("#"+$.jgrid.jqID(e.p.id)+"_frozen").remove();$(e.grid.fbDiv).height($(e.grid.bDiv).height()-16);var t=$("#"+$.jgrid.jqID(e.p.id)).clone(true);$("tr[role=row]",t).each(function(){$("td[role=gridcell]:gt("+i+")",this).remove()});$(t).width(1).attr("id",e.p.id+"_frozen");$(e.grid.fbDiv).append(t);if(e.p.hoverrows===true){$("tr.jqgrow",t).hover(function(){$(this).addClass("ui-state-hover");$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID(e.p.id)).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover");$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID(e.p.id)).removeClass("ui-state-hover")});$("tr.jqgrow","#"+$.jgrid.jqID(e.p.id)).hover(function(){$(this).addClass("ui-state-hover");$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID(e.p.id)+"_frozen").addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover");$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID(e.p.id)+"_frozen").removeClass("ui-state-hover")})}t=null});if(!e.grid.hDiv.loading){$(e).triggerHandler("jqGridAfterGridComplete")}e.p.frozenColumns=true}})},destroyFrozenColumns:function(){return this.each(function(){if(!this.grid){return}if(this.p.frozenColumns===true){var e=this;$(e.grid.fhDiv).remove();$(e.grid.fbDiv).remove();e.grid.fhDiv=null;e.grid.fbDiv=null;if(e.p.footerrow){$(e.grid.fsDiv).remove();e.grid.fsDiv=null}$(this).unbind(".setFrozenColumns");if(e.p.hoverrows===true){var t;$("#"+$.jgrid.jqID(e.p.id)).bind("mouseover",function(e){t=$(e.target).closest("tr.jqgrow");if($(t).attr("class")!=="ui-subgrid"){$(t).addClass("ui-state-hover")}}).bind("mouseout",function(e){t=$(e.target).closest("tr.jqgrow");$(t).removeClass("ui-state-hover")})}this.p.frozenColumns=false}})},navGrid:function(e,t,n,r,i,s,o){t=$.extend({edit:true,editicon:"ui-icon-pencil",add:true,addicon:"ui-icon-plus",del:true,delicon:"ui-icon-trash",search:true,searchicon:"ui-icon-search",refresh:true,refreshicon:"ui-icon-refresh",refreshstate:"firstpage",view:false,viewicon:"ui-icon-document",position:"left",closeOnEscape:true,beforeRefresh:null,afterRefresh:null,cloneToTop:false,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null},$.jgrid.nav,t||{});return this.each(function(){if(this.nav){return}var u={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id},a=this,f,l;if(!a.grid||typeof e!=="string"){return}if($("#"+u.themodal)[0]===undefined){if(!t.alerttop&&!t.alertleft){if(window.innerWidth!==undefined){t.alertleft=window.innerWidth;t.alerttop=window.innerHeight}else if(document.documentElement!==undefined&&document.documentElement.clientWidth!==undefined&&document.documentElement.clientWidth!==0){t.alertleft=document.documentElement.clientWidth;t.alerttop=document.documentElement.clientHeight}else{t.alertleft=1024;t.alerttop=768}t.alertleft=t.alertleft/2-parseInt(t.alertwidth,10)/2;t.alerttop=t.alerttop/2-25}}var c=1,h,p=function(){if(!$(this).hasClass("ui-state-disabled")){$(this).addClass("ui-state-hover")}},d=function(){$(this).removeClass("ui-state-hover")};if(t.cloneToTop&&a.p.toppager){c=2}for(h=0;h<c;h++){var v,m=$("<table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table navtable' style='float:left;table-layout:auto;'><tbody><tr></tr></tbody></table>"),g="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>",y,b;if(h===0){y=e;b=a.p.id;if(y===a.p.toppager){b+="_top";c=1}}else{y=a.p.toppager;b=a.p.id+"_top"}if(a.p.direction==="rtl"){$(m).attr("dir","rtl").css("float","right")}if(t.add){r=r||{};v=$("<td class='ui-pg-button ui-corner-all'></td>");$(v).append("<div class='ui-pg-div'><span class='ui-icon "+t.addicon+"'></span>"+t.addtext+"</div>");$("tr",m).append(v);$(v,m).attr({title:t.addtitle||"",id:r.id||"add_"+b}).click(function(){if(!$(this).hasClass("ui-state-disabled")){if($.isFunction(t.addfunc)){t.addfunc.call(a)}else{$(a).jqGrid("editGridRow","new",r)}}return false}).hover(p,d);v=null}if(t.edit){v=$("<td class='ui-pg-button ui-corner-all'></td>");n=n||{};$(v).append("<div class='ui-pg-div'><span class='ui-icon "+t.editicon+"'></span>"+t.edittext+"</div>");$("tr",m).append(v);$(v,m).attr({title:t.edittitle||"",id:n.id||"edit_"+b}).click(function(){if(!$(this).hasClass("ui-state-disabled")){var e=a.p.selrow;if(e){if($.isFunction(t.editfunc)){t.editfunc.call(a,e)}else{$(a).jqGrid("editGridRow",e,n)}}else{$.jgrid.viewModal("#"+u.themodal,{gbox:"#gbox_"+$.jgrid.jqID(a.p.id),jqm:true});$("#jqg_alrt").focus()}}return false}).hover(p,d);v=null}if(t.view){v=$("<td class='ui-pg-button ui-corner-all'></td>");o=o||{};$(v).append("<div class='ui-pg-div'><span class='ui-icon "+t.viewicon+"'></span>"+t.viewtext+"</div>");$("tr",m).append(v);$(v,m).attr({title:t.viewtitle||"",id:o.id||"view_"+b}).click(function(){if(!$(this).hasClass("ui-state-disabled")){var e=a.p.selrow;if(e){if($.isFunction(t.viewfunc)){t.viewfunc.call(a,e)}else{$(a).jqGrid("viewGridRow",e,o)}}else{$.jgrid.viewModal("#"+u.themodal,{gbox:"#gbox_"+$.jgrid.jqID(a.p.id),jqm:true});$("#jqg_alrt").focus()}}return false}).hover(p,d);v=null}if(t.del){v=$("<td class='ui-pg-button ui-corner-all'></td>");i=i||{};$(v).append("<div class='ui-pg-div'><span class='ui-icon "+t.delicon+"'></span>"+t.deltext+"</div>");$("tr",m).append(v);$(v,m).attr({title:t.deltitle||"",id:i.id||"del_"+b}).click(function(){if(!$(this).hasClass("ui-state-disabled")){var e;if(a.p.multiselect){e=a.p.selarrrow;if(e.length===0){e=null}}else{e=a.p.selrow}if(e){if($.isFunction(t.delfunc)){t.delfunc.call(a,e)}else{$(a).jqGrid("delGridRow",e,i)}}else{$.jgrid.viewModal("#"+u.themodal,{gbox:"#gbox_"+$.jgrid.jqID(a.p.id),jqm:true});$("#jqg_alrt").focus()}}return false}).hover(p,d);v=null}if(t.add||t.edit||t.del||t.view){$("tr",m).append(g)}if(t.search){v=$("<td class='ui-pg-button ui-corner-all'></td>");s=s||{};$(v).append("<div class='ui-pg-div'><span class='ui-icon "+t.searchicon+"'></span>"+t.searchtext+"</div>");$("tr",m).append(v);$(v,m).attr({title:t.searchtitle||"",id:s.id||"search_"+b}).click(function(){if(!$(this).hasClass("ui-state-disabled")){if($.isFunction(t.searchfunc)){t.searchfunc.call(a,s)}else{$(a).jqGrid("searchGrid",s)}}return false}).hover(p,d);if(s.showOnLoad&&s.showOnLoad===true){$(v,m).click()}v=null}if(t.refresh){v=$("<td class='ui-pg-button ui-corner-all'></td>");$(v).append("<div class='ui-pg-div'><span class='ui-icon "+t.refreshicon+"'></span>"+t.refreshtext+"</div>");$("tr",m).append(v);$(v,m).attr({title:t.refreshtitle||"",id:"refresh_"+b}).click(function(){if(!$(this).hasClass("ui-state-disabled")){if($.isFunction(t.beforeRefresh)){t.beforeRefresh.call(a)}a.p.search=false;a.p.resetsearch=true;try{if(t.refreshstate!=="currentfilter"){var e=a.p.id;a.p.postData.filters="";try{$("#fbox_"+$.jgrid.jqID(e)).jqFilter("resetFilter")}catch(n){}if($.isFunction(a.clearToolbar)){a.clearToolbar.call(a,false)}}}catch(r){}switch(t.refreshstate){case"firstpage":$(a).trigger("reloadGrid",[{page:1}]);break;case"current":case"currentfilter":$(a).trigger("reloadGrid",[{current:true}]);break}if($.isFunction(t.afterRefresh)){t.afterRefresh.call(a)}}return false}).hover(p,d);v=null}l=$(".ui-jqgrid").css("font-size")||"11px";$("body").append("<div id='testpg2' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+l+";visibility:hidden;' ></div>");f=$(m).clone().appendTo("#testpg2").width();$("#testpg2").remove();$(y+"_"+t.position,y).append(m);if(a.p._nvtd){if(f>a.p._nvtd[0]){$(y+"_"+t.position,y).width(f);a.p._nvtd[0]=f}a.p._nvtd[1]=f}l=null;f=null;m=null;this.nav=true}})},navButtonAdd:function(e,t){t=$.extend({caption:"newButton",title:"",buttonicon:"ui-icon-newwin",onClickButton:null,position:"last",cursor:"pointer"},t||{});return this.each(function(){if(!this.grid){return}if(typeof e==="string"&&e.indexOf("#")!==0){e="#"+$.jgrid.jqID(e)}var n=$(".navtable",e)[0],r=this;if(n){if(t.id&&$("#"+$.jgrid.jqID(t.id),n)[0]!==undefined){return}var i=$("<td></td>");if(t.buttonicon.toString().toUpperCase()==="NONE"){$(i).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'>"+t.caption+"</div>")}else{$(i).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'><span class='ui-icon "+t.buttonicon+"'></span>"+t.caption+"</div>")}if(t.id){$(i).attr("id",t.id)}if(t.position==="first"){if(n.rows[0].cells.length===0){$("tr",n).append(i)}else{$("tr td:eq(0)",n).before(i)}}else{$("tr",n).append(i)}$(i,n).attr("title",t.title||"").click(function(e){if(!$(this).hasClass("ui-state-disabled")){if($.isFunction(t.onClickButton)){t.onClickButton.call(r,e)}}return false}).hover(function(){if(!$(this).hasClass("ui-state-disabled")){$(this).addClass("ui-state-hover")}},function(){$(this).removeClass("ui-state-hover")})}})},navSeparatorAdd:function(e,t){t=$.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},t||{});return this.each(function(){if(!this.grid){return}if(typeof e==="string"&&e.indexOf("#")!==0){e="#"+$.jgrid.jqID(e)}var n=$(".navtable",e)[0];if(n){var r="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='"+t.sepclass+"'></span>"+t.sepcontent+"</td>";if(t.position==="first"){if(n.rows[0].cells.length===0){$("tr",n).append(r)}else{$("tr td:eq(0)",n).before(r)}}else{$("tr",n).append(r)}}})}})})(jQuery);(function(e){"use strict";e.extend(e.jgrid,{template:function(t){var n=e.makeArray(arguments).slice(1),r,i=n.length;if(t==null){t=""}return t.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(t,s){if(!isNaN(parseInt(s,10))){return n[parseInt(s,10)]}for(r=0;r<i;r++){if(e.isArray(n[r])){var o=n[r],u=o.length;while(u--){if(s===o[u].nm){return o[u].v}}}}})}});e.jgrid.extend({groupingSetup:function(){return this.each(function(){var t=this,n,r,i,s=t.p.colModel,o=t.p.groupingView;if(o!==null&&(typeof o==="object"||e.isFunction(o))){if(!o.groupField.length){t.p.grouping=false}else{if(o.visibiltyOnNextGrouping===undefined){o.visibiltyOnNextGrouping=[]}o.lastvalues=[];if(!o._locgr){o.groups=[]}o.counters=[];for(n=0;n<o.groupField.length;n++){if(!o.groupOrder[n]){o.groupOrder[n]="asc"}if(!o.groupText[n]){o.groupText[n]="{0}"}if(typeof o.groupColumnShow[n]!=="boolean"){o.groupColumnShow[n]=true}if(typeof o.groupSummary[n]!=="boolean"){o.groupSummary[n]=false}if(!o.groupSummaryPos[n]){o.groupSummaryPos[n]="footer"}if(o.groupColumnShow[n]===true){o.visibiltyOnNextGrouping[n]=true;e(t).jqGrid("showCol",o.groupField[n])}else{o.visibiltyOnNextGrouping[n]=e("#"+e.jgrid.jqID(t.p.id+"_"+o.groupField[n])).is(":visible");e(t).jqGrid("hideCol",o.groupField[n])}}o.summary=[];if(o.hideFirstGroupCol){o.formatDisplayField[0]=function(e){return e}}for(r=0,i=s.length;r<i;r++){if(o.hideFirstGroupCol){if(!s[r].hidden&&o.groupField[0]===s[r].name){s[r].formatter=function(){return""}}}if(s[r].summaryType){if(s[r].summaryDivider){o.summary.push({nm:s[r].name,st:s[r].summaryType,v:"",sd:s[r].summaryDivider,vd:"",sr:s[r].summaryRound,srt:s[r].summaryRoundType||"round"})}else{o.summary.push({nm:s[r].name,st:s[r].summaryType,v:"",sr:s[r].summaryRound,srt:s[r].summaryRoundType||"round"})}}}}}else{t.p.grouping=false}})},groupingPrepare:function(t,n){this.each(function(){var r=this.p.groupingView,i=this,s,o=r.groupField.length,u,a,f,l,c=0;for(s=0;s<o;s++){u=r.groupField[s];f=r.displayField[s];a=t[u];l=f==null?null:t[f];if(l==null){l=a}if(a!==undefined){if(n===0){r.groups.push({idx:s,dataIndex:u,value:a,displayValue:l,startRow:n,cnt:1,summary:[]});r.lastvalues[s]=a;r.counters[s]={cnt:1,pos:r.groups.length-1,summary:e.extend(true,[],r.summary)};e.each(r.counters[s].summary,function(){if(e.isFunction(this.st)){this.v=this.st.call(i,this.v,this.nm,t)}else{this.v=e(i).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,t);if(this.st.toLowerCase()==="avg"&&this.sd){this.vd=e(i).jqGrid("groupingCalculations.handler",this.st,this.vd,this.sd,this.sr,this.srt,t)}}});r.groups[r.counters[s].pos].summary=r.counters[s].summary}else{if(typeof a!=="object"&&(e.isArray(r.isInTheSameGroup)&&e.isFunction(r.isInTheSameGroup[s])?!r.isInTheSameGroup[s].call(i,r.lastvalues[s],a,s,r):r.lastvalues[s]!==a)){r.groups.push({idx:s,dataIndex:u,value:a,displayValue:l,startRow:n,cnt:1,summary:[]});r.lastvalues[s]=a;c=1;r.counters[s]={cnt:1,pos:r.groups.length-1,summary:e.extend(true,[],r.summary)};e.each(r.counters[s].summary,function(){if(e.isFunction(this.st)){this.v=this.st.call(i,this.v,this.nm,t)}else{this.v=e(i).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,t);if(this.st.toLowerCase()==="avg"&&this.sd){this.vd=e(i).jqGrid("groupingCalculations.handler",this.st,this.vd,this.sd,this.sr,this.srt,t)}}});r.groups[r.counters[s].pos].summary=r.counters[s].summary}else{if(c===1){r.groups.push({idx:s,dataIndex:u,value:a,displayValue:l,startRow:n,cnt:1,summary:[]});r.lastvalues[s]=a;r.counters[s]={cnt:1,pos:r.groups.length-1,summary:e.extend(true,[],r.summary)};e.each(r.counters[s].summary,function(){if(e.isFunction(this.st)){this.v=this.st.call(i,this.v,this.nm,t)}else{this.v=e(i).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,t);if(this.st.toLowerCase()==="avg"&&this.sd){this.vd=e(i).jqGrid("groupingCalculations.handler",this.st,this.vd,this.sd,this.sr,this.srt,t)}}});r.groups[r.counters[s].pos].summary=r.counters[s].summary}else{r.counters[s].cnt+=1;r.groups[r.counters[s].pos].cnt=r.counters[s].cnt;e.each(r.counters[s].summary,function(){if(e.isFunction(this.st)){this.v=this.st.call(i,this.v,this.nm,t)}else{this.v=e(i).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,t);if(this.st.toLowerCase()==="avg"&&this.sd){this.vd=e(i).jqGrid("groupingCalculations.handler",this.st,this.vd,this.sd,this.sr,this.srt,t)}}});r.groups[r.counters[s].pos].summary=r.counters[s].summary}}}}}});return this},groupingToggle:function(t){this.each(function(){var n=this,r=n.p.groupingView,i=t.split("_"),s=parseInt(i[i.length-2],10);i.splice(i.length-2,2);var o=i.join("_"),u=r.minusicon,a=r.plusicon,f=e("#"+e.jgrid.jqID(t)),l=f.length?f[0].nextSibling:null,c=e("#"+e.jgrid.jqID(t)+" span."+"tree-wrap-"+n.p.direction),h=function(t){var n=e.map(t.split(" "),function(e){if(e.substring(0,o.length+1)===o+"_"){return parseInt(e.substring(o.length+1),10)}});return n.length>0?n[0]:undefined},p,d,v=false,m=n.p.frozenColumns?n.p.id+"_frozen":false,g=m?e("#"+e.jgrid.jqID(t),"#"+e.jgrid.jqID(m)):false,y=g&&g.length?g[0].nextSibling:null;if(c.hasClass(u)){if(r.showSummaryOnHide){if(l){while(l){p=h(l.className);if(p!==undefined&&p<=s){break}e(l).hide();l=l.nextSibling;if(m){e(y).hide();y=y.nextSibling}}}}else{if(l){while(l){p=h(l.className);if(p!==undefined&&p<=s){break}e(l).hide();l=l.nextSibling;if(m){e(y).hide();y=y.nextSibling}}}}c.removeClass(u).addClass(a);v=true}else{if(l){d=undefined;while(l){p=h(l.className);if(d===undefined){d=p===undefined}if(p!==undefined){if(p<=s){break}if(p===s+1){e(l).show().find(">td>span."+"tree-wrap-"+n.p.direction).removeClass(u).addClass(a);if(m){e(y).show().find(">td>span."+"tree-wrap-"+n.p.direction).removeClass(u).addClass(a)}}}else if(d){e(l).show();if(m){e(y).show()}}l=l.nextSibling;if(m){y=y.nextSibling}}}c.removeClass(a).addClass(u)}e(n).triggerHandler("jqGridGroupingClickGroup",[t,v]);if(e.isFunction(n.p.onClickGroup)){n.p.onClickGroup.call(n,t,v)}});return false},groupingRender:function(t,n,r,i){return this.each(function(){function m(e,t,n){var r=false,i;if(t===0){r=n[e]}else{var s=n[e].idx;if(s===0){r=n[e]}else{for(i=e;i>=0;i--){if(n[i].idx===s-t){r=n[i];break}}}}return r}function g(t,r,i,o){var u=m(t,r,i),a=s.p.colModel,f,l=u.cnt,c="",h;for(h=o;h<n;h++){var p="<td "+s.formatCol(h,1,"")+">&#160;</td>",d="{0}";e.each(u.summary,function(){if(this.nm===a[h].name){if(a[h].summaryTpl){d=a[h].summaryTpl}if(typeof this.st==="string"&&this.st.toLowerCase()==="avg"){if(this.sd&&this.vd){this.v=this.v/this.vd}else if(this.v&&l>0){this.v=this.v/l}}try{this.groupCount=u.cnt;this.groupIndex=u.dataIndex;this.groupValue=u.value;f=s.formatter("",this.v,h,this)}catch(t){f=this.v}p="<td "+s.formatCol(h,1,"")+">"+e.jgrid.format(d,f)+"</td>";return false}});c+=p}return c}var s=this,o=s.p.groupingView,u="",a="",f,l,c=o.groupCollapse?o.plusicon:o.minusicon,h,p=[],d=o.groupField.length;c+=" tree-wrap-"+s.p.direction;e.each(s.p.colModel,function(e,t){var n;for(n=0;n<d;n++){if(o.groupField[n]===t.name){p[n]=e;break}}});var v=0;var y=e.makeArray(o.groupSummary),b;y.reverse();b=s.p.multiselect?' colspan="2"':"";e.each(o.groups,function(m,w){if(o._locgr){if(!(w.startRow+w.cnt>(r-1)*i&&w.startRow<r*i)){return true}}v++;l=s.p.id+"ghead_"+w.idx;f=l+"_"+m;a="<span style='cursor:pointer;' class='ui-icon "+c+"' onclick=\"jQuery('#"+e.jgrid.jqID(s.p.id)+"').jqGrid('groupingToggle','"+f+"');return false;\"></span>";try{if(e.isArray(o.formatDisplayField)&&e.isFunction(o.formatDisplayField[w.idx])){w.displayValue=o.formatDisplayField[w.idx].call(s,w.displayValue,w.value,s.p.colModel[p[w.idx]],w.idx,o);h=w.displayValue}else{h=s.formatter(f,w.displayValue,p[w.idx],w.value)}}catch(E){h=w.displayValue}if(o.groupSummaryPos[w.idx]==="header"){u+='<tr id="'+f+'"'+(o.groupCollapse&&w.idx>0?' style="display:none;" ':" ")+'role="row" class= "ui-widget-content jqgroup ui-row-'+s.p.direction+" "+l+'"><td style="padding-left:'+w.idx*12+"px;"+'"'+b+">"+a+e.jgrid.template(o.groupText[w.idx],h,w.cnt,w.summary)+"</td>";u+=g(m,0,o.groups,o.groupColumnShow[w.idx]===false?b===""?2:3:b===""?1:2);u+="</tr>"}else{u+='<tr id="'+f+'"'+(o.groupCollapse&&w.idx>0?' style="display:none;" ':" ")+'role="row" class= "ui-widget-content jqgroup ui-row-'+s.p.direction+" "+l+'"><td style="padding-left:'+w.idx*12+"px;"+'" colspan="'+(o.groupColumnShow[w.idx]===false?n-1:n)+'">'+a+e.jgrid.template(o.groupText[w.idx],h,w.cnt,w.summary)+"</td></tr>"}var S=d-1===w.idx;if(S){var x=o.groups[m+1],T,N,C=0,k=w.startRow,L=x!==undefined?x.startRow:o.groups[m].startRow+o.groups[m].cnt;if(o._locgr){C=(r-1)*i;if(C>w.startRow){k=C}}for(T=k;T<L;T++){if(!t[T-C]){break}u+=t[T-C].join("")}if(o.groupSummaryPos[w.idx]!=="header"){var A;if(x!==undefined){for(A=0;A<o.groupField.length;A++){if(x.dataIndex===o.groupField[A]){break}}v=o.groupField.length-A}for(N=0;N<v;N++){if(!y[N]){continue}var O="";if(o.groupCollapse&&!o.showSummaryOnHide){O=' style="display:none;"'}u+="<tr"+O+' jqfootlevel="'+(w.idx-N)+'" role="row" class="ui-widget-content jqfoot ui-row-'+s.p.direction+'">';u+=g(m,N,o.groups,0);u+="</tr>"}v=A}}});e("#"+e.jgrid.jqID(s.p.id)+" tbody:first").append(u);u=null})},groupingGroupBy:function(t,n){return this.each(function(){var r=this;if(typeof t==="string"){t=[t]}var i=r.p.groupingView;r.p.grouping=true;i._locgr=false;if(i.visibiltyOnNextGrouping===undefined){i.visibiltyOnNextGrouping=[]}var s;for(s=0;s<i.groupField.length;s++){if(!i.groupColumnShow[s]&&i.visibiltyOnNextGrouping[s]){e(r).jqGrid("showCol",i.groupField[s])}}for(s=0;s<t.length;s++){i.visibiltyOnNextGrouping[s]=e("#"+e.jgrid.jqID(r.p.id)+"_"+e.jgrid.jqID(t[s])).is(":visible")}r.p.groupingView=e.extend(r.p.groupingView,n||{});i.groupField=t;e(r).trigger("reloadGrid")})},groupingRemove:function(t){return this.each(function(){var n=this;if(t===undefined){t=true}n.p.grouping=false;if(t===true){var r=n.p.groupingView,i;for(i=0;i<r.groupField.length;i++){if(!r.groupColumnShow[i]&&r.visibiltyOnNextGrouping[i]){e(n).jqGrid("showCol",r.groupField)}}e("tr.jqgroup, tr.jqfoot","#"+e.jgrid.jqID(n.p.id)+" tbody:first").remove();e("tr.jqgrow:hidden","#"+e.jgrid.jqID(n.p.id)+" tbody:first").show()}else{e(n).trigger("reloadGrid")}})},groupingCalculations:{handler:function(e,t,n,r,i,s){var o={sum:function(){return parseFloat(t||0)+parseFloat(s[n]||0)},min:function(){if(t===""){return parseFloat(s[n]||0)}return Math.min(parseFloat(t),parseFloat(s[n]||0))},max:function(){if(t===""){return parseFloat(s[n]||0)}return Math.max(parseFloat(t),parseFloat(s[n]||0))},count:function(){if(t===""){t=0}if(s.hasOwnProperty(n)){return t+1}return 0},avg:function(){return o.sum()}};if(!o[e]){throw"jqGrid Grouping No such method: "+e}var u=o[e]();if(r!=null){if(i==="fixed"){u=u.toFixed(r)}else{var a=Math.pow(10,r);u=Math.round(u*a)/a}}return u}}})})(jQuery);(function(e){"use strict";e.jgrid.extend({setTreeNode:function(t,n){return this.each(function(){var r=this;if(!r.grid||!r.p.treeGrid){return}var s=r.p.expColInd,o=r.p.treeReader.expanded_field,u=r.p.treeReader.leaf_field,a=r.p.treeReader.level_field,f=r.p.treeReader.icon_field,l=r.p.treeReader.loaded,c,h,p,d,v,m,g,y;while(t<n){var b=e.jgrid.stripPref(r.p.idPrefix,r.rows[t].id),w=r.p._index[b],E;g=r.p.data[w];if(r.p.treeGridModel==="nested"){if(!g[u]){c=parseInt(g[r.p.treeReader.left_field],10);h=parseInt(g[r.p.treeReader.right_field],10);g[u]=h===c+1?"true":"false";r.rows[t].cells[r.p._treeleafpos].innerHTML=g[u]}}p=parseInt(g[a],10);if(r.p.tree_root_level===0){d=p+1;v=p}else{d=p;v=p-1}m="<div class='tree-wrap tree-wrap-"+r.p.direction+"' style='width:"+d*18+"px;'>";m+="<div style='"+(r.p.direction==="rtl"?"right:":"left:")+v*18+"px;' class='ui-icon ";if(g[l]!==undefined){if(g[l]==="true"||g[l]===true){g[l]=true}else{g[l]=false}}if(g[u]==="true"||g[u]===true){m+=(g[f]!==undefined&&g[f]!==""?g[f]:r.p.treeIcons.leaf)+" tree-leaf treeclick";g[u]=true;y="leaf"}else{g[u]=false;y=""}g[o]=(g[o]==="true"||g[o]===true?true:false)&&(g[l]||g[l]===undefined);if(g[o]===false){m+=g[u]===true?"'":r.p.treeIcons.plus+" tree-plus treeclick'"}else{m+=g[u]===true?"'":r.p.treeIcons.minus+" tree-minus treeclick'"}m+="></div></div>";e(r.rows[t].cells[s]).wrapInner("<span class='cell-wrapper"+y+"'></span>").prepend(m);if(p!==parseInt(r.p.tree_root_level,10)){var S=e(r).jqGrid("getNodeParent",g);E=S&&S.hasOwnProperty(o)?S[o]:true;if(!E){e(r.rows[t]).css("display","none")}}e(r.rows[t].cells[s]).find("div.treeclick").bind("click",function(t){var n=t.target||t.srcElement,i=e.jgrid.stripPref(r.p.idPrefix,e(n,r.rows).closest("tr.jqgrow")[0].id),s=r.p._index[i];if(!r.p.data[s][u]){if(r.p.data[s][o]){e(r).jqGrid("collapseRow",r.p.data[s]);e(r).jqGrid("collapseNode",r.p.data[s])}else{e(r).jqGrid("expandRow",r.p.data[s]);e(r).jqGrid("expandNode",r.p.data[s])}}return false});if(r.p.ExpandColClick===true){e(r.rows[t].cells[s]).find("span.cell-wrapper").css("cursor","pointer").bind("click",function(t){var n=t.target||t.srcElement,i=e.jgrid.stripPref(r.p.idPrefix,e(n,r.rows).closest("tr.jqgrow")[0].id),s=r.p._index[i];if(!r.p.data[s][u]){if(r.p.data[s][o]){e(r).jqGrid("collapseRow",r.p.data[s]);e(r).jqGrid("collapseNode",r.p.data[s])}else{e(r).jqGrid("expandRow",r.p.data[s]);e(r).jqGrid("expandNode",r.p.data[s])}}e(r).jqGrid("setSelection",i);return false})}t++}})},setTreeGrid:function(){return this.each(function(){var t=this,n=0,r,i=false,s,o,u,a=[];if(!t.p.treeGrid){return}if(!t.p.treedatatype){e.extend(t.p,{treedatatype:t.p.datatype})}t.p.subGrid=false;t.p.altRows=false;t.p.pgbuttons=false;t.p.pginput=false;t.p.gridview=true;if(t.p.rowTotal===null){t.p.rowNum=1e4}t.p.multiselect=false;t.p.rowList=[];t.p.expColInd=0;r="ui-icon-triangle-1-"+(t.p.direction==="rtl"?"w":"e");t.p.treeIcons=e.extend({plus:r,minus:"ui-icon-triangle-1-s",leaf:"ui-icon-radio-off"},t.p.treeIcons||{});if(t.p.treeGridModel==="nested"){t.p.treeReader=e.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},t.p.treeReader)}else if(t.p.treeGridModel==="adjacency"){t.p.treeReader=e.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},t.p.treeReader)}for(o in t.p.colModel){if(t.p.colModel.hasOwnProperty(o)){s=t.p.colModel[o].name;if(s===t.p.ExpandColumn&&!i){i=true;t.p.expColInd=n}n++;for(u in t.p.treeReader){if(t.p.treeReader.hasOwnProperty(u)&&t.p.treeReader[u]===s){a.push(s)}}}}e.each(t.p.treeReader,function(r,i){if(i&&e.inArray(i,a)===-1){if(r==="leaf_field"){t.p._treeleafpos=n}n++;t.p.colNames.push(i);t.p.colModel.push({name:i,width:1,hidden:true,sortable:false,resizable:false,hidedlg:true,editable:true,search:false})}})})},expandRow:function(t){this.each(function(){var n=this;if(!n.grid||!n.p.treeGrid){return}var r=e(n).jqGrid("getNodeChildren",t),i=n.p.treeReader.expanded_field;e(r).each(function(){var t=n.p.idPrefix+e.jgrid.getAccessor(this,n.p.localReader.id);e(e(n).jqGrid("getGridRowById",t)).css("display","");if(this[i]){e(n).jqGrid("expandRow",this)}})})},collapseRow:function(t){this.each(function(){var n=this;if(!n.grid||!n.p.treeGrid){return}var r=e(n).jqGrid("getNodeChildren",t),i=n.p.treeReader.expanded_field;e(r).each(function(){var t=n.p.idPrefix+e.jgrid.getAccessor(this,n.p.localReader.id);e(e(n).jqGrid("getGridRowById",t)).css("display","none");if(this[i]){e(n).jqGrid("collapseRow",this)}})})},getRootNodes:function(){var t=[];this.each(function(){var n=this;if(!n.grid||!n.p.treeGrid){return}switch(n.p.treeGridModel){case"nested":var r=n.p.treeReader.level_field;e(n.p.data).each(function(){if(parseInt(this[r],10)===parseInt(n.p.tree_root_level,10)){t.push(this)}});break;case"adjacency":var i=n.p.treeReader.parent_id_field;e(n.p.data).each(function(){if(this[i]===null||String(this[i]).toLowerCase()==="null"){t.push(this)}});break}});return t},getNodeDepth:function(t){var n=null;this.each(function(){if(!this.grid||!this.p.treeGrid){return}var r=this;switch(r.p.treeGridModel){case"nested":var i=r.p.treeReader.level_field;n=parseInt(t[i],10)-parseInt(r.p.tree_root_level,10);break;case"adjacency":n=e(r).jqGrid("getNodeAncestors",t).length;break}});return n},getNodeParent:function(t){var n=null;this.each(function(){var r=this;if(!r.grid||!r.p.treeGrid){return}switch(r.p.treeGridModel){case"nested":var i=r.p.treeReader.left_field,s=r.p.treeReader.right_field,o=r.p.treeReader.level_field,u=parseInt(t[i],10),a=parseInt(t[s],10),f=parseInt(t[o],10);e(this.p.data).each(function(){if(parseInt(this[o],10)===f-1&&parseInt(this[i],10)<u&&parseInt(this[s],10)>a){n=this;return false}});break;case"adjacency":var l=r.p.treeReader.parent_id_field,c=r.p.localReader.id,h=t[c],p=r.p._index[h];while(p--){if(r.p.data[p][c]===e.jgrid.stripPref(r.p.idPrefix,t[l])){n=r.p.data[p];break}}break}});return n},getNodeChildren:function(t){var n=[];this.each(function(){var r=this;if(!r.grid||!r.p.treeGrid){return}switch(r.p.treeGridModel){case"nested":var i=r.p.treeReader.left_field,s=r.p.treeReader.right_field,o=r.p.treeReader.level_field,u=parseInt(t[i],10),a=parseInt(t[s],10),f=parseInt(t[o],10);e(this.p.data).each(function(){if(parseInt(this[o],10)===f+1&&parseInt(this[i],10)>u&&parseInt(this[s],10)<a){n.push(this)}});break;case"adjacency":var l=r.p.treeReader.parent_id_field,c=r.p.localReader.id;e(this.p.data).each(function(){if(this[l]==e.jgrid.stripPref(r.p.idPrefix,t[c])){n.push(this)}});break}});return n},getFullTreeNode:function(t){var n=[];this.each(function(){var r=this,i;if(!r.grid||!r.p.treeGrid){return}switch(r.p.treeGridModel){case"nested":var s=r.p.treeReader.left_field,o=r.p.treeReader.right_field,u=r.p.treeReader.level_field,a=parseInt(t[s],10),f=parseInt(t[o],10),l=parseInt(t[u],10);e(this.p.data).each(function(){if(parseInt(this[u],10)>=l&&parseInt(this[s],10)>=a&&parseInt(this[s],10)<=f){n.push(this)}});break;case"adjacency":if(t){n.push(t);var c=r.p.treeReader.parent_id_field,h=r.p.localReader.id;e(this.p.data).each(function(t){i=n.length;for(t=0;t<i;t++){if(e.jgrid.stripPref(r.p.idPrefix,n[t][h])===this[c]){n.push(this);break}}})}break}});return n},getNodeAncestors:function(t){var n=[];this.each(function(){if(!this.grid||!this.p.treeGrid){return}var r=e(this).jqGrid("getNodeParent",t);while(r){n.push(r);r=e(this).jqGrid("getNodeParent",r)}});return n},isVisibleNode:function(t){var n=true;this.each(function(){var r=this;if(!r.grid||!r.p.treeGrid){return}var i=e(r).jqGrid("getNodeAncestors",t),s=r.p.treeReader.expanded_field;e(i).each(function(){n=n&&this[s];if(!n){return false}})});return n},isNodeLoaded:function(t){var n;this.each(function(){var r=this;if(!r.grid||!r.p.treeGrid){return}var i=r.p.treeReader.leaf_field,s=r.p.treeReader.loaded;if(t!==undefined){if(t[s]!==undefined){n=t[s]}else if(t[i]||e(r).jqGrid("getNodeChildren",t).length>0){n=true}else{n=false}}else{n=false}});return n},expandNode:function(t){return this.each(function(){if(!this.grid||!this.p.treeGrid){return}var n=this.p.treeReader.expanded_field,r=this.p.treeReader.parent_id_field,i=this.p.treeReader.loaded,s=this.p.treeReader.level_field,o=this.p.treeReader.left_field,u=this.p.treeReader.right_field;if(!t[n]){var a=e.jgrid.getAccessor(t,this.p.localReader.id);var f=e("#"+this.p.idPrefix+e.jgrid.jqID(a),this.grid.bDiv)[0];var l=this.p._index[a];if(e(this).jqGrid("isNodeLoaded",this.p.data[l])){t[n]=true;e("div.treeclick",f).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus")}else if(!this.grid.hDiv.loading){t[n]=true;e("div.treeclick",f).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus");this.p.treeANode=f.rowIndex;this.p.datatype=this.p.treedatatype;if(this.p.treeGridModel==="nested"){e(this).jqGrid("setGridParam",{postData:{nodeid:a,n_left:t[o],n_right:t[u],n_level:t[s]}})}else{e(this).jqGrid("setGridParam",{postData:{nodeid:a,parentid:t[r],n_level:t[s]}})}e(this).trigger("reloadGrid");t[i]=true;if(this.p.treeGridModel==="nested"){e(this).jqGrid("setGridParam",{postData:{nodeid:"",n_left:"",n_right:"",n_level:""}})}else{e(this).jqGrid("setGridParam",{postData:{nodeid:"",parentid:"",n_level:""}})}}}})},collapseNode:function(t){return this.each(function(){if(!this.grid||!this.p.treeGrid){return}var n=this.p.treeReader.expanded_field;if(t[n]){t[n]=false;var r=e.jgrid.getAccessor(t,this.p.localReader.id);var i=e("#"+this.p.idPrefix+e.jgrid.jqID(r),this.grid.bDiv)[0];e("div.treeclick",i).removeClass(this.p.treeIcons.minus+" tree-minus").addClass(this.p.treeIcons.plus+" tree-plus")}})},SortTree:function(t,n,r,i){return this.each(function(){if(!this.grid||!this.p.treeGrid){return}var s,o,u,a=[],f=this,l,c,h=e(this).jqGrid("getRootNodes");l=e.jgrid.from(h);l.orderBy(t,n,r,i);c=l.select();for(s=0,o=c.length;s<o;s++){u=c[s];a.push(u);e(this).jqGrid("collectChildrenSortTree",a,u,t,n,r,i)}e.each(a,function(t){var n=e.jgrid.getAccessor(this,f.p.localReader.id);e("#"+e.jgrid.jqID(f.p.id)+" tbody tr:eq("+t+")").after(e("tr#"+e.jgrid.jqID(n),f.grid.bDiv))});l=null;c=null;a=null})},collectChildrenSortTree:function(t,n,r,i,s,o){return this.each(function(){if(!this.grid||!this.p.treeGrid){return}var u,a,f,l,c,h;l=e(this).jqGrid("getNodeChildren",n);c=e.jgrid.from(l);c.orderBy(r,i,s,o);h=c.select();for(u=0,a=h.length;u<a;u++){f=h[u];t.push(f);e(this).jqGrid("collectChildrenSortTree",t,f,r,i,s,o)}})},setTreeRow:function(t,n){var r=false;this.each(function(){var i=this;if(!i.grid||!i.p.treeGrid){return}r=e(i).jqGrid("setRowData",t,n)});return r},delTreeNode:function(t){return this.each(function(){var n=this,r=n.p.localReader.id,i,s=n.p.treeReader.left_field,o=n.p.treeReader.right_field,u,a,f,l;if(!n.grid||!n.p.treeGrid){return}var c=n.p._index[t];if(c!==undefined){u=parseInt(n.p.data[c][o],10);a=u-parseInt(n.p.data[c][s],10)+1;var h=e(n).jqGrid("getFullTreeNode",n.p.data[c]);if(h.length>0){for(i=0;i<h.length;i++){e(n).jqGrid("delRowData",h[i][r])}}if(n.p.treeGridModel==="nested"){f=e.jgrid.from(n.p.data).greater(s,u,{stype:"integer"}).select();if(f.length){for(l in f){if(f.hasOwnProperty(l)){f[l][s]=parseInt(f[l][s],10)-a}}}f=e.jgrid.from(n.p.data).greater(o,u,{stype:"integer"}).select();if(f.length){for(l in f){if(f.hasOwnProperty(l)){f[l][o]=parseInt(f[l][o],10)-a}}}}}})},addChildNode:function(t,n,r,i){var s=this[0];if(r){var o=s.p.treeReader.expanded_field,u=s.p.treeReader.leaf_field,a=s.p.treeReader.level_field,f=s.p.treeReader.parent_id_field,l=s.p.treeReader.left_field,c=s.p.treeReader.right_field,h=s.p.treeReader.loaded,p,d,v,m,g,y,b=0,w=n,E,S;if(i===undefined){i=false}if(t==null){g=s.p.data.length-1;if(g>=0){while(g>=0){b=Math.max(b,parseInt(s.p.data[g][s.p.localReader.id],10));g--}}t=b+1}var x=e(s).jqGrid("getInd",n);E=false;if(n===undefined||n===null||n===""){n=null;w=null;p="last";m=s.p.tree_root_level;g=s.p.data.length+1}else{p="after";d=s.p._index[n];v=s.p.data[d];n=v[s.p.localReader.id];m=parseInt(v[a],10)+1;var T=e(s).jqGrid("getFullTreeNode",v);if(T.length){g=T[T.length-1][s.p.localReader.id];w=g;g=e(s).jqGrid("getInd",w)+1}else{g=e(s).jqGrid("getInd",n)+1}if(v[u]){E=true;v[o]=true;e(s.rows[x]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass(s.p.treeIcons.leaf+" tree-leaf").addClass(s.p.treeIcons.minus+" tree-minus");s.p.data[d][u]=false;v[h]=true}}y=g+1;if(r[o]===undefined){r[o]=false}if(r[h]===undefined){r[h]=false}r[a]=m;if(r[u]===undefined){r[u]=true}if(s.p.treeGridModel==="adjacency"){r[f]=n}if(s.p.treeGridModel==="nested"){var N,C,k;if(n!==null){S=parseInt(v[c],10);N=e.jgrid.from(s.p.data);N=N.greaterOrEquals(c,S,{stype:"integer"});C=N.select();if(C.length){for(k in C){if(C.hasOwnProperty(k)){C[k][l]=C[k][l]>S?parseInt(C[k][l],10)+2:C[k][l];C[k][c]=C[k][c]>=S?parseInt(C[k][c],10)+2:C[k][c]}}}r[l]=S;r[c]=S+1}else{S=parseInt(e(s).jqGrid("getCol",c,false,"max"),10);C=e.jgrid.from(s.p.data).greater(l,S,{stype:"integer"}).select();if(C.length){for(k in C){if(C.hasOwnProperty(k)){C[k][l]=parseInt(C[k][l],10)+2}}}C=e.jgrid.from(s.p.data).greater(c,S,{stype:"integer"}).select();if(C.length){for(k in C){if(C.hasOwnProperty(k)){C[k][c]=parseInt(C[k][c],10)+2}}}r[l]=S+1;r[c]=S+2}}if(n===null||e(s).jqGrid("isNodeLoaded",v)||E){e(s).jqGrid("addRowData",t,r,p,w);e(s).jqGrid("setTreeNode",g,y)}if(v&&!v[o]&&i){e(s.rows[x]).find("div.treeclick").click()}}}})})(jQuery);(function($){"use strict";if($.jgrid.msie&&$.jgrid.msiever()===8){$.expr[":"].hidden=function(e){return e.offsetWidth===0||e.offsetHeight===0||e.style.display==="none"}}$.jgrid._multiselect=false;if($.ui){if($.ui.multiselect){if($.ui.multiselect.prototype._setSelected){var setSelected=$.ui.multiselect.prototype._setSelected;$.ui.multiselect.prototype._setSelected=function(e,t){var n=setSelected.call(this,e,t);if(t&&this.selectedList){var r=this.element;this.selectedList.find("li").each(function(){if($(this).data("optionLink")){$(this).data("optionLink").remove().appendTo(r)}})}return n}}if($.ui.multiselect.prototype.destroy){$.ui.multiselect.prototype.destroy=function(){this.element.show();this.container.remove();if($.Widget===undefined){$.widget.prototype.destroy.apply(this,arguments)}else{$.Widget.prototype.destroy.apply(this,arguments)}}}$.jgrid._multiselect=true}}$.jgrid.extend({sortableColumns:function(e){return this.each(function(){function r(){t.p.disableClick=true}var t=this,n=$.jgrid.jqID(t.p.id);var i={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_"+n+"_cb"+",#jqgh_"+n+"_rn"+",#jqgh_"+n+"_subgrid),:hidden)",placeholder:{element:function(e){var t=$(document.createElement(e[0].nodeName)).addClass(e[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0];return t},update:function(e,t){t.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10));t.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10))}},update:function(e,n){var r=$(n.item).parent(),i=$(">th",r),s=t.p.colModel,o={},u=t.p.id+"_";$.each(s,function(e){o[this.name]=e});var a=[];i.each(function(){var e=$(">div",this).get(0).id.replace(/^jqgh_/,"").replace(u,"");if(o.hasOwnProperty(e)){a.push(o[e])}});$(t).jqGrid("remapColumns",a,true,true);if($.isFunction(t.p.sortable.update)){t.p.sortable.update(a)}setTimeout(function(){t.p.disableClick=false},50)}};if(t.p.sortable.options){$.extend(i,t.p.sortable.options)}else if($.isFunction(t.p.sortable)){t.p.sortable={update:t.p.sortable}}if(i.start){var s=i.start;i.start=function(e,t){r();s.call(this,e,t)}}else{i.start=r}if(t.p.sortable.exclude){i.items+=":not("+t.p.sortable.exclude+")"}var o=e.sortable(i),u=o.data("sortable")||o.data("uiSortable");if(u!=null){u.data("sortable").floating=true}})},columnChooser:function(e){function d(e,t,n){var r,i;if(t>=0){r=e.slice();i=r.splice(t,Math.max(e.length-t,t));if(t>e.length){t=e.length}r[t]=n;return r.concat(i)}return e}function v(e,t){if(!e){return}if(typeof e==="string"){if($.fn[e]){$.fn[e].apply(t,$.makeArray(arguments).slice(2))}}else if($.isFunction(e)){e.apply(t,$.makeArray(arguments).slice(2))}}var t=this,n,r,i={},s=[],o,u,a,f,l,c=t.jqGrid("getGridParam","colModel"),h=t.jqGrid("getGridParam","colNames"),p=function(e){return $.ui.multiselect.prototype&&e.data($.ui.multiselect.prototype.widgetFullName||$.ui.multiselect.prototype.widgetName)||e.data("ui-multiselect")||e.data("multiselect")};if($("#colchooser_"+$.jgrid.jqID(t[0].p.id)).length){return}n=$('<div id="colchooser_'+t[0].p.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>');r=$("select",n);e=$.extend({width:400,height:240,classname:null,done:function(e){if(e){t.jqGrid("remapColumns",e,true)}},msel:"multiselect",dlog:"dialog",dialog_opts:{minWidth:470,dialogClass:"ui-jqdialog"},dlog_opts:function(e){var t={};t[e.bSubmit]=function(){e.apply_perm();e.cleanup(false)};t[e.bCancel]=function(){e.cleanup(true)};return $.extend(true,{buttons:t,close:function(){e.cleanup(true)},modal:e.modal||false,resizable:e.resizable||true,width:e.width+70,resize:function(){var e=p(r),t=e.container.closest(".ui-dialog-content");if(t.length>0&&typeof t[0].style==="object"){t[0].style.width=""}else{t.css("width","")}e.selectedList.height(Math.max(e.selectedContainer.height()-e.selectedActions.outerHeight()-1,1));e.availableList.height(Math.max(e.availableContainer.height()-e.availableActions.outerHeight()-1,1))}},e.dialog_opts||{})},apply_perm:function(){var n=[];$("option",r).each(function(){if($(this).is("[selected]")){t.jqGrid("showCol",c[this.value].name)}else{t.jqGrid("hideCol",c[this.value].name)}});$("option[selected]",r).each(function(){n.push(parseInt(this.value,10))});$.each(n,function(){delete i[c[parseInt(this,10)].name]});$.each(i,function(){var e=parseInt(this,10);n=d(n,e,e)});if(e.done){e.done.call(t,n)}t.jqGrid("setGridWidth",t[0].p.tblwidth,t[0].p.shrinkToFit)},cleanup:function(i){v(e.dlog,n,"destroy");v(e.msel,r,"destroy");n.remove();if(i&&e.done){e.done.call(t)}},msel_opts:{}},$.jgrid.col,e||{});if($.ui){if($.ui.multiselect&&$.ui.multiselect.defaults){if(!$.jgrid._multiselect){alert("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");return}e.msel_opts=$.extend($.ui.multiselect.defaults,e.msel_opts)}}if(e.caption){n.attr("title",e.caption)}if(e.classname){n.addClass(e.classname);r.addClass(e.classname)}if(e.width){$(">div",n).css({width:e.width,margin:"0 auto"});r.css("width",e.width)}if(e.height){$(">div",n).css("height",e.height);r.css("height",e.height-10)}r.empty();$.each(c,function(e){i[this.name]=e;if(this.hidedlg){if(!this.hidden){s.push(e)}return}r.append("<option value='"+e+"' "+(this.hidden?"":"selected='selected'")+">"+$.jgrid.stripHtml(h[e])+"</option>")});o=$.isFunction(e.dlog_opts)?e.dlog_opts.call(t,e):e.dlog_opts;v(e.dlog,n,o);u=$.isFunction(e.msel_opts)?e.msel_opts.call(t,e):e.msel_opts;v(e.msel,r,u);a=$("#colchooser_"+$.jgrid.jqID(t[0].p.id));a.css({margin:"auto"});a.find(">div").css({width:"100%",height:"100%",margin:"auto"});f=p(r);f.container.css({width:"100%",height:"100%",margin:"auto"});f.selectedContainer.css({width:f.options.dividerLocation*100+"%",height:"100%",margin:"auto",boxSizing:"border-box"});f.availableContainer.css({width:100-f.options.dividerLocation*100+"%",height:"100%",margin:"auto",boxSizing:"border-box"});f.selectedList.css("height","auto");f.availableList.css("height","auto");l=Math.max(f.selectedList.height(),f.availableList.height());l=Math.min(l,$(window).height());f.selectedList.css("height",l);f.availableList.css("height",l)},sortableRows:function(e){return this.each(function(){var t=this;if(!t.grid){return}if(t.p.treeGrid){return}if($.fn.sortable){e=$.extend({cursor:"move",axis:"y",items:".jqgrow"},e||{});if(e.start&&$.isFunction(e.start)){e._start_=e.start;delete e.start}else{e._start_=false}if(e.update&&$.isFunction(e.update)){e._update_=e.update;delete e.update}else{e._update_=false}e.start=function(n,r){$(r.item).css("border-width","0");$("td",r.item).each(function(e){this.style.width=t.grid.cols[e].style.width});if(t.p.subGrid){var i=$(r.item).attr("id");try{$(t).jqGrid("collapseSubGridRow",i)}catch(s){}}if(e._start_){e._start_.apply(this,[n,r])}};e.update=function(n,r){$(r.item).css("border-width","");if(t.p.rownumbers===true){$("td.jqgrid-rownum",t.rows).each(function(e){$(this).html(e+1+(parseInt(t.p.page,10)-1)*parseInt(t.p.rowNum,10))})}if(e._update_){e._update_.apply(this,[n,r])}};$("tbody:first",t).sortable(e);$("tbody:first",t).disableSelection()}})},gridDnD:function(e){return this.each(function(){function i(){var e=$.data(t,"dnd");$("tr.jqgrow:not(.ui-draggable)",t).draggable($.isFunction(e.drag)?e.drag.call($(t),e):e.drag)}var t=this,n,r;if(!t.grid){return}if(t.p.treeGrid){return}if(!$.fn.draggable||!$.fn.droppable){return}var s="<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>";if($("#jqgrid_dnd")[0]===undefined){$("body").append(s)}if(typeof e==="string"&&e==="updateDnD"&&t.p.jqgdnd===true){i();return}e=$.extend({drag:function(e){return $.extend({start:function(n,r){var i,s;if(t.p.subGrid){s=$(r.helper).attr("id");try{$(t).jqGrid("collapseSubGridRow",s)}catch(o){}}for(i=0;i<$.data(t,"dnd").connectWith.length;i++){if($($.data(t,"dnd").connectWith[i]).jqGrid("getGridParam","reccount")===0){$($.data(t,"dnd").connectWith[i]).jqGrid("addRowData","jqg_empty_row",{})}}r.helper.addClass("ui-state-highlight");$("td",r.helper).each(function(e){this.style.width=t.grid.headers[e].width+"px"});if(e.onstart&&$.isFunction(e.onstart)){e.onstart.call($(t),n,r)}},stop:function(n,r){var i,s;if(r.helper.dropped&&!e.dragcopy){s=$(r.helper).attr("id");if(s===undefined){s=$(this).attr("id")}$(t).jqGrid("delRowData",s)}for(i=0;i<$.data(t,"dnd").connectWith.length;i++){$($.data(t,"dnd").connectWith[i]).jqGrid("delRowData","jqg_empty_row")}if(e.onstop&&$.isFunction(e.onstop)){e.onstop.call($(t),n,r)}}},e.drag_opts||{})},drop:function(e){return $.extend({accept:function(e){if(!$(e).hasClass("jqgrow")){return e}var t=$(e).closest("table.ui-jqgrid-btable");if(t.length>0&&$.data(t[0],"dnd")!==undefined){var n=$.data(t[0],"dnd").connectWith;return $.inArray("#"+$.jgrid.jqID(this.id),n)!==-1?true:false}return false},drop:function(n,r){if(!$(r.draggable).hasClass("jqgrow")){return}var i=$(r.draggable).attr("id");var s=r.draggable.parent().parent().jqGrid("getRowData",i);if(!e.dropbyname){var o=0,u={},a,f;var l=$("#"+$.jgrid.jqID(this.id)).jqGrid("getGridParam","colModel");try{for(f in s){if(s.hasOwnProperty(f)){a=l[o].name;if(!(a==="cb"||a==="rn"||a==="subgrid")){if(s.hasOwnProperty(f)&&l[o]){u[a]=s[f]}}o++}}s=u}catch(c){}}r.helper.dropped=true;if(e.beforedrop&&$.isFunction(e.beforedrop)){var h=e.beforedrop.call(this,n,r,s,$("#"+$.jgrid.jqID(t.p.id)),$(this));if(h!==undefined&&h!==null&&typeof h==="object"){s=h}}if(r.helper.dropped){var p;if(e.autoid){if($.isFunction(e.autoid)){p=e.autoid.call(this,s)}else{p=Math.ceil(Math.random()*1e3);p=e.autoidprefix+p}}$("#"+$.jgrid.jqID(this.id)).jqGrid("addRowData",p,s,e.droppos)}if(e.ondrop&&$.isFunction(e.ondrop)){e.ondrop.call(this,n,r,s)}}},e.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{activeClass:"ui-state-active",hoverClass:"ui-state-hover"},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5e3},dragcopy:false,dropbyname:false,droppos:"first",autoid:true,autoidprefix:"dnd_"},e||{});if(!e.connectWith){return}e.connectWith=e.connectWith.split(",");e.connectWith=$.map(e.connectWith,function(e){return $.trim(e)});$.data(t,"dnd",e);if(t.p.reccount!==0&&!t.p.jqgdnd){i()}t.p.jqgdnd=true;for(n=0;n<e.connectWith.length;n++){r=e.connectWith[n];$(r).droppable($.isFunction(e.drop)?e.drop.call($(t),e):e.drop)}})},gridResize:function(opts){return this.each(function(){var $t=this,gID=$.jgrid.jqID($t.p.id);if(!$t.grid||!$.fn.resizable){return}opts=$.extend({},opts||{});if(opts.alsoResize){opts._alsoResize_=opts.alsoResize;delete opts.alsoResize}else{opts._alsoResize_=false}if(opts.stop&&$.isFunction(opts.stop)){opts._stop_=opts.stop;delete opts.stop}else{opts._stop_=false}opts.stop=function(e,t){$($t).jqGrid("setGridParam",{height:$("#gview_"+gID+" .ui-jqgrid-bdiv").height()});$($t).jqGrid("setGridWidth",t.size.width,opts.shrinkToFit);if(opts._stop_){opts._stop_.call($t,e,t)}};if(opts._alsoResize_){var optstest="{'#gview_"+gID+" .ui-jqgrid-bdiv':true,'"+opts._alsoResize_+"':true}";opts.alsoResize=eval("("+optstest+")")}else{opts.alsoResize=$(".ui-jqgrid-bdiv","#gview_"+gID)}delete opts._alsoResize_;$("#gbox_"+gID).resizable(opts)})}})})(jQuery);(function(e){"use strict";e.fmatter={};e.extend(e.fmatter,{isBoolean:function(e){return typeof e==="boolean"},isObject:function(t){return t&&(typeof t==="object"||e.isFunction(t))||false},isString:function(e){return typeof e==="string"},isNumber:function(e){return typeof e==="number"&&isFinite(e)},isValue:function(e){return this.isObject(e)||this.isString(e)||this.isNumber(e)||this.isBoolean(e)},isEmpty:function(t){if(!this.isString(t)&&this.isValue(t)){return false}if(!this.isValue(t)){return true}t=e.trim(t).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,"");return t===""}});e.fn.fmatter=function(t,n,r,i,s){var o=n;r=e.extend({},e.jgrid.formatter,r);try{o=e.fn.fmatter[t].call(this,n,r,i,s)}catch(u){}return o};e.fmatter.util={NumberFormat:function(t,n){if(!e.fmatter.isNumber(t)){t*=1}if(e.fmatter.isNumber(t)){var r=t<0;var i=String(t);var s=n.decimalSeparator||".";var o;if(e.fmatter.isNumber(n.decimalPlaces)){var u=n.decimalPlaces;var a=Math.pow(10,u);i=String(Math.round(t*a)/a);o=i.lastIndexOf(".");if(u>0){if(o<0){i+=s;o=i.length-1}else if(s!=="."){i=i.replace(".",s)}while(i.length-1-o<u){i+="0"}}}if(n.thousandsSeparator){var f=n.thousandsSeparator;o=i.lastIndexOf(s);o=o>-1?o:i.length;var l=i.substring(o);var c=-1,h;for(h=o;h>0;h--){c++;if(c%3===0&&h!==o&&(!r||h>1)){l=f+l}l=i.charAt(h-1)+l}i=l}i=n.prefix?n.prefix+i:i;i=n.suffix?i+n.suffix:i;return i}return t}};e.fn.fmatter.defaultFormat=function(t,n){return e.fmatter.isValue(t)&&t!==""?t:n.defaultValue||"&#160;"};e.fn.fmatter.email=function(t,n){if(!e.fmatter.isEmpty(t)){return'<a href="mailto:'+t+'">'+t+"</a>"}return e.fn.fmatter.defaultFormat(t,n)};e.fn.fmatter.checkbox=function(t,n){var r=e.extend({},n.checkbox),i;if(n.colModel!==undefined&&n.colModel.formatoptions!==undefined){r=e.extend({},r,n.colModel.formatoptions)}if(r.disabled===true){i='disabled="disabled"'}else{i=""}if(e.fmatter.isEmpty(t)||t===undefined){t=e.fn.fmatter.defaultFormat(t,r)}t=String(t);t=(t+"").toLowerCase();var s=t.search(/(false|f|0|no|n|off|undefined)/i)<0?" checked='checked' ":"";return'<input type="checkbox" '+s+' value="'+t+'" offval="no" '+i+"/>"};e.fn.fmatter.link=function(t,n){var r={target:n.target};var i="";if(n.colModel!==undefined&&n.colModel.formatoptions!==undefined){r=e.extend({},r,n.colModel.formatoptions)}if(r.target){i="target="+r.target}if(!e.fmatter.isEmpty(t)){return"<a "+i+' href="'+t+'">'+t+"</a>"}return e.fn.fmatter.defaultFormat(t,n)};e.fn.fmatter.showlink=function(t,n){var r={baseLinkUrl:n.baseLinkUrl,showAction:n.showAction,addParam:n.addParam||"",target:n.target,idName:n.idName},i="",s;if(n.colModel!==undefined&&n.colModel.formatoptions!==undefined){r=e.extend({},r,n.colModel.formatoptions)}if(r.target){i="target="+r.target}s=r.baseLinkUrl+r.showAction+"?"+r.idName+"="+n.rowId+r.addParam;if(e.fmatter.isString(t)||e.fmatter.isNumber(t)){return"<a "+i+' href="'+s+'">'+t+"</a>"}return e.fn.fmatter.defaultFormat(t,n)};e.fn.fmatter.integer=function(t,n){var r=e.extend({},n.integer);if(n.colModel!==undefined&&n.colModel.formatoptions!==undefined){r=e.extend({},r,n.colModel.formatoptions)}if(e.fmatter.isEmpty(t)){return r.defaultValue}return e.fmatter.util.NumberFormat(t,r)};e.fn.fmatter.number=function(t,n){var r=e.extend({},n.number);if(n.colModel!==undefined&&n.colModel.formatoptions!==undefined){r=e.extend({},r,n.colModel.formatoptions)}if(e.fmatter.isEmpty(t)){return r.defaultValue}return e.fmatter.util.NumberFormat(t,r)};e.fn.fmatter.currency=function(t,n){var r=e.extend({},n.currency);if(n.colModel!==undefined&&n.colModel.formatoptions!==undefined){r=e.extend({},r,n.colModel.formatoptions)}if(e.fmatter.isEmpty(t)){return r.defaultValue}return e.fmatter.util.NumberFormat(t,r)};e.fn.fmatter.date=function(t,n,r,i){var s=e.extend({},n.date);if(n.colModel!==undefined&&n.colModel.formatoptions!==undefined){s=e.extend({},s,n.colModel.formatoptions)}if(!s.reformatAfterEdit&&i==="edit"){return e.fn.fmatter.defaultFormat(t,n)}if(!e.fmatter.isEmpty(t)){return e.jgrid.parseDate(s.srcformat,t,s.newformat,s)}return e.fn.fmatter.defaultFormat(t,n)};e.fn.fmatter.select=function(t,n){t=String(t);var r=false,i=[],s,o;if(n.colModel.formatoptions!==undefined){r=n.colModel.formatoptions.value;s=n.colModel.formatoptions.separator===undefined?":":n.colModel.formatoptions.separator;o=n.colModel.formatoptions.delimiter===undefined?";":n.colModel.formatoptions.delimiter}else if(n.colModel.editoptions!==undefined){r=n.colModel.editoptions.value;s=n.colModel.editoptions.separator===undefined?":":n.colModel.editoptions.separator;o=n.colModel.editoptions.delimiter===undefined?";":n.colModel.editoptions.delimiter}if(r){var u=(n.colModel.editoptions!=null&&n.colModel.editoptions.multiple===true)===true?true:false,a=[],f;if(u){a=t.split(",");a=e.map(a,function(t){return e.trim(t)})}if(e.fmatter.isString(r)){var l=r.split(o),c=0,h;for(h=0;h<l.length;h++){f=l[h].split(s);if(f.length>2){f[1]=e.map(f,function(e,t){if(t>0){return e}}).join(s)}if(u){if(e.inArray(f[0],a)>-1){i[c]=f[1];c++}}else if(e.trim(f[0])===e.trim(t)){i[0]=f[1];break}}}else if(e.fmatter.isObject(r)){if(u){i=e.map(a,function(e){return r[e]})}else{i[0]=r[t]||""}}}t=i.join(", ");return t===""?e.fn.fmatter.defaultFormat(t,n):t};e.fn.fmatter.rowactions=function(t){var n=e(this).closest("tr.jqgrow"),r=n.attr("id"),i=e(this).closest("table.ui-jqgrid-btable").attr("id").replace(/_frozen([^_]*)$/,"$1"),s=e("#"+i),o=s[0],u=o.p,a=u.colModel[e.jgrid.getCellIndex(this)],f=a.frozen?e("tr#"+r+" td:eq("+e.jgrid.getCellIndex(this)+") > div",s):e(this).parent(),l={extraparam:{}},c=function(t,n){if(e.isFunction(l.afterSave)){l.afterSave.call(o,t,n)}f.find("div.ui-inline-edit,div.ui-inline-del").show();f.find("div.ui-inline-save,div.ui-inline-cancel").hide()},h=function(t){if(e.isFunction(l.afterRestore)){l.afterRestore.call(o,t)}f.find("div.ui-inline-edit,div.ui-inline-del").show();f.find("div.ui-inline-save,div.ui-inline-cancel").hide()};if(a.formatoptions!==undefined){l=e.extend(l,a.formatoptions)}if(u.editOptions!==undefined){l.editOptions=u.editOptions}if(u.delOptions!==undefined){l.delOptions=u.delOptions}if(n.hasClass("jqgrid-new-row")){l.extraparam[u.prmNames.oper]=u.prmNames.addoper}var p={keys:l.keys,oneditfunc:l.onEdit,successfunc:l.onSuccess,url:l.url,extraparam:l.extraparam,aftersavefunc:c,errorfunc:l.onError,afterrestorefunc:h,restoreAfterError:l.restoreAfterError,mtype:l.mtype};switch(t){case"edit":s.jqGrid("editRow",r,p);f.find("div.ui-inline-edit,div.ui-inline-del").hide();f.find("div.ui-inline-save,div.ui-inline-cancel").show();s.triggerHandler("jqGridAfterGridComplete");break;case"save":if(s.jqGrid("saveRow",r,p)){f.find("div.ui-inline-edit,div.ui-inline-del").show();f.find("div.ui-inline-save,div.ui-inline-cancel").hide();s.triggerHandler("jqGridAfterGridComplete")}break;case"cancel":s.jqGrid("restoreRow",r,h);f.find("div.ui-inline-edit,div.ui-inline-del").show();f.find("div.ui-inline-save,div.ui-inline-cancel").hide();s.triggerHandler("jqGridAfterGridComplete");break;case"del":s.jqGrid("delGridRow",r,l.delOptions);break;case"formedit":s.jqGrid("setSelection",r);s.jqGrid("editGridRow",r,l.editOptions);break}};e.fn.fmatter.actions=function(t,n){var r={keys:false,editbutton:true,delbutton:true,editformbutton:false},i=n.rowId,s="",o;if(n.colModel.formatoptions!==undefined){r=e.extend(r,n.colModel.formatoptions)}if(i===undefined||e.fmatter.isEmpty(i)){return""}if(r.editformbutton){o="id='jEditButton_"+i+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'formedit'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ";s+="<div title='"+e.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+o+"><span class='ui-icon ui-icon-pencil'></span></div>"}else if(r.editbutton){o="id='jEditButton_"+i+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'edit'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover') ";s+="<div title='"+e.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+o+"><span class='ui-icon ui-icon-pencil'></span></div>"}if(r.delbutton){o="id='jDeleteButton_"+i+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'del'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ";s+="<div title='"+e.jgrid.nav.deltitle+"' style='float:left;margin-left:5px;' class='ui-pg-div ui-inline-del' "+o+"><span class='ui-icon ui-icon-trash'></span></div>"}o="id='jSaveButton_"+i+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'save'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ";s+="<div title='"+e.jgrid.edit.bSubmit+"' style='float:left;display:none' class='ui-pg-div ui-inline-save' "+o+"><span class='ui-icon ui-icon-disk'></span></div>";o="id='jCancelButton_"+i+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'cancel'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ";s+="<div title='"+e.jgrid.edit.bCancel+"' style='float:left;display:none;margin-left:5px;' class='ui-pg-div ui-inline-cancel' "+o+"><span class='ui-icon ui-icon-cancel'></span></div>";return"<div style='margin-left:8px;'>"+s+"</div>"};e.unformat=function(t,n,r,i){var s,o=n.colModel.formatter,u=n.colModel.formatoptions||{},a,f=/([\.\*\_\'\(\)\{\}\+\?\\])/g,l=n.colModel.unformat||e.fn.fmatter[o]&&e.fn.fmatter[o].unformat;if(l!==undefined&&e.isFunction(l)){s=l.call(this,e(t).text(),n,t)}else if(o!==undefined&&e.fmatter.isString(o)){var c=e.jgrid.formatter||{},h;switch(o){case"integer":u=e.extend({},c.integer,u);a=u.thousandsSeparator.replace(f,"\\$1");h=new RegExp(a,"g");s=e(t).text().replace(h,"");break;case"number":u=e.extend({},c.number,u);a=u.thousandsSeparator.replace(f,"\\$1");h=new RegExp(a,"g");s=e(t).text().replace(h,"").replace(u.decimalSeparator,".");break;case"currency":u=e.extend({},c.currency,u);a=u.thousandsSeparator.replace(f,"\\$1");h=new RegExp(a,"g");s=e(t).text();if(u.prefix&&u.prefix.length){s=s.substr(u.prefix.length)}if(u.suffix&&u.suffix.length){s=s.substr(0,s.length-u.suffix.length)}s=s.replace(h,"").replace(u.decimalSeparator,".");break;case"checkbox":var p=n.colModel.editoptions?n.colModel.editoptions.value.split(":"):["Yes","No"];s=e("input",t).is(":checked")?p[0]:p[1];break;case"select":s=e.unformat.select(t,n,r,i);break;case"actions":return"";default:s=e(t).text()}}return s!==undefined?s:i===true?e(t).text():e.jgrid.htmlDecode(e(t).html())};e.unformat.select=function(t,n,r,i){var s=[];var o=e(t).text();if(i===true){return o}var u=e.extend({},n.colModel.formatoptions!==undefined?n.colModel.formatoptions:n.colModel.editoptions),a=u.separator===undefined?":":u.separator,f=u.delimiter===undefined?";":u.delimiter;if(u.value){var l=u.value,c=u.multiple===true?true:false,h=[],p;if(c){h=o.split(",");h=e.map(h,function(t){return e.trim(t)})}if(e.fmatter.isString(l)){var d=l.split(f),v=0,m;for(m=0;m<d.length;m++){p=d[m].split(a);if(p.length>2){p[1]=e.map(p,function(e,t){if(t>0){return e}}).join(a)}if(c){if(e.inArray(p[1],h)>-1){s[v]=p[0];v++}}else if(e.trim(p[1])===e.trim(o)){s[0]=p[0];break}}}else if(e.fmatter.isObject(l)||e.isArray(l)){if(!c){h[0]=o}s=e.map(h,function(t){var n;e.each(l,function(e,r){if(r===t){n=e;return false}});if(n!==undefined){return n}})}return s.join(", ")}return o||""};e.unformat.date=function(t,n){var r=e.jgrid.formatter.date||{};if(n.formatoptions!==undefined){r=e.extend({},r,n.formatoptions)}if(!e.fmatter.isEmpty(t)){return e.jgrid.parseDate(r.newformat,t,r.srcformat,r)}return e.fn.fmatter.defaultFormat(t,n)}})(jQuery)