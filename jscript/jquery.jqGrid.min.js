/*
 jqGrid  4.5.2 - jQuery Grid
 Copyright (c) 2008, Tony Tomov, tony@trirand.com
 Dual licensed under the MIT and GPL licenses
 http://www.opensource.org/licenses/mit-license.php
 http://www.gnu.org/licenses/gpl-2.0.html
 Date: 2013-05-21
*/
(function(a){a.jgrid=a.jgrid||{};a.extend(a.jgrid,{version:"4.5.2",htmlDecode:function(a){return a&&("&nbsp;"===a||"&#160;"===a||1===a.length&&160===a.charCodeAt(0))?"":a?String(a).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):a},htmlEncode:function(a){return a?String(a).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):a},format:function(e){var d=a.makeArray(arguments).slice(1);null==e&&(e="");return e.replace(/\{(\d+)\}/g,
function(a,e){return d[e]})},msie:"Microsoft Internet Explorer"===navigator.appName,msiever:function(){var a=-1;null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&(a=parseFloat(RegExp.$1));return a},getCellIndex:function(e){e=a(e);if(e.is("tr"))return-1;e=(e.is("td")||e.is("th")?e:e.closest("td,th"))[0];return a.jgrid.msie?a.inArray(e,e.parentNode.cells):e.cellIndex},stripHtml:function(a){a=String(a);var d=/<("[^"]*"|'[^']*'|[^'">])*>/gi;return a?(a=a.replace(d,""))&&"&nbsp;"!==a&&"&#160;"!==
a?a.replace(/\"/g,"'"):"":a},stripPref:function(e,d){var c=a.type(e);if("string"===c||"number"===c)e=String(e),d=""!==e?String(d).replace(String(e),""):d;return d},parse:function(e){"while(1);"===e.substr(0,9)&&(e=e.substr(9));"/*"===e.substr(0,2)&&(e=e.substr(2,e.length-4));e||(e="{}");return!0===a.jgrid.useJSON&&"object"===typeof JSON&&"function"===typeof JSON.parse?JSON.parse(e):eval("("+e+")")},parseDate:function(e,d,c,g){var b=/^\/Date\((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?\)\/$/,h="string"===
typeof d?d.match(b):null,b=function(a,b){a=String(a);for(b=parseInt(b,10)||2;a.length<b;)a="0"+a;return a},f={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},k=0,m,n,k=function(a,b){0===a?12===b&&(b=0):12!==b&&(b+=12);return b};void 0===g&&(g=a.jgrid.formatter.date);void 0===g.parseRe&&(g.parseRe=/[Tt\\\/:_;.,\t\s-]/);g.masks.hasOwnProperty(e)&&(e=g.masks[e]);if(d&&null!=d)if(isNaN(d-0)||"u"!==String(e).toLowerCase())if(d.constructor===Date)k=d;else if(null!==h)k=new Date(parseInt(h[1],10)),h[3]&&(e=60*Number(h[5])+
Number(h[6]),e*="-"===h[4]?1:-1,e-=k.getTimezoneOffset(),k.setTime(Number(Number(k)+6E4*e)));else{d=String(d).replace(/\\T/g,"T").replace(/\\t/,"t").split(g.parseRe);e=e.replace(/\\T/g,"T").replace(/\\t/,"t").split(g.parseRe);m=0;for(n=e.length;m<n;m++)"M"===e[m]&&(h=a.inArray(d[m],g.monthNames),-1!==h&&12>h&&(d[m]=h+1,f.m=d[m])),"F"===e[m]&&(h=a.inArray(d[m],g.monthNames,12),-1!==h&&11<h&&(d[m]=h+1-12,f.m=d[m])),"a"===e[m]&&(h=a.inArray(d[m],g.AmPm),-1!==h&&2>h&&d[m]===g.AmPm[h]&&(d[m]=h,f.h=k(d[m],
f.h))),"A"===e[m]&&(h=a.inArray(d[m],g.AmPm),-1!==h&&1<h&&d[m]===g.AmPm[h]&&(d[m]=h-2,f.h=k(d[m],f.h))),"g"===e[m]&&(f.h=parseInt(d[m],10)),void 0!==d[m]&&(f[e[m].toLowerCase()]=parseInt(d[m],10));f.f&&(f.m=f.f);if(0===f.m&&0===f.y&&0===f.d)return"&#160;";f.m=parseInt(f.m,10)-1;k=f.y;70<=k&&99>=k?f.y=1900+f.y:0<=k&&69>=k&&(f.y=2E3+f.y);k=new Date(f.y,f.m,f.d,f.h,f.i,f.s,f.u)}else k=new Date(1E3*parseFloat(d));else k=new Date(f.y,f.m,f.d,f.h,f.i,f.s,f.u);if(void 0===c)return k;g.masks.hasOwnProperty(c)?
c=g.masks[c]:c||(c="Y-m-d");e=k.getHours();d=k.getMinutes();f=k.getDate();h=k.getMonth()+1;m=k.getTimezoneOffset();n=k.getSeconds();var p=k.getMilliseconds(),r=k.getDay(),q=k.getFullYear(),l=(r+6)%7+1,t=(new Date(q,h-1,f)-new Date(q,0,1))/864E5,s={d:b(f),D:g.dayNames[r],j:f,l:g.dayNames[r+7],N:l,S:g.S(f),w:r,z:t,W:5>l?Math.floor((t+l-1)/7)+1:Math.floor((t+l-1)/7)||(4>((new Date(q-1,0,1)).getDay()+6)%7?53:52),F:g.monthNames[h-1+12],m:b(h),M:g.monthNames[h-1],n:h,t:"?",L:"?",o:"?",Y:q,y:String(q).substring(2),
a:12>e?g.AmPm[0]:g.AmPm[1],A:12>e?g.AmPm[2]:g.AmPm[3],B:"?",g:e%12||12,G:e,h:b(e%12||12),H:b(e),i:b(d),s:b(n),u:p,e:"?",I:"?",O:(0<m?"-":"+")+b(100*Math.floor(Math.abs(m)/60)+Math.abs(m)%60,4),P:"?",T:(String(k).match(/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g)||[""]).pop().replace(/[^-+\dA-Z]/g,""),Z:"?",c:"?",r:"?",U:Math.floor(k/1E3)};return c.replace(/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,function(a){return s.hasOwnProperty(a)?
s[a]:a.substring(1)})},jqID:function(a){return String(a).replace(/[!"#$%&'()*+,.\/:; <=>?@\[\\\]\^`{|}~]/g,"\\$&")},guid:1,uidPref:"jqg",randId:function(e){return(e||a.jgrid.uidPref)+a.jgrid.guid++},getAccessor:function(a,d){var c,g,b=[],h;if("function"===typeof d)return d(a);c=a[d];if(void 0===c)try{if("string"===typeof d&&(b=d.split(".")),h=b.length)for(c=a;c&&h--;)g=b.shift(),c=c[g]}catch(f){}return c},getXmlData:function(e,d,c){var g="string"===typeof d?d.match(/^(.*)\[(\w+)\]$/):null;if("function"===
typeof d)return d(e);if(g&&g[2])return g[1]?a(g[1],e).attr(g[2]):a(e).attr(g[2]);e=a(d,e);return c?e:0<e.length?a(e).text():void 0},cellWidth:function(){var e=a("<div class='ui-jqgrid' style='left:10000px'><table class='ui-jqgrid-btable' style='width:5px;'><tr class='jqgrow'><td style='width:5px;display:block;'></td></tr></table></div>"),d=e.appendTo("body").find("td").width();e.remove();return 0.1<Math.abs(d-5)},cell_width:!0,ajaxOptions:{},from:function(e){return new function(d,c){"string"===typeof d&&
(d=a.data(d));var e=this,b=d,h=!0,f=!1,k=c,m=/[\$,%]/g,n=null,p=null,r=0,q=!1,l="",t=[],s=!0;if("object"===typeof d&&d.push)0<d.length&&(s="object"!==typeof d[0]?!1:!0);else throw"data provides is not an array";this._hasData=function(){return null===b?!1:0===b.length?!1:!0};this._getStr=function(a){var b=[];f&&b.push("jQuery.trim(");b.push("String("+a+")");f&&b.push(")");h||b.push(".toLowerCase()");return b.join("")};this._strComp=function(a){return"string"===typeof a?".toString()":""};this._group=
function(a,b){return{field:a.toString(),unique:b,items:[]}};this._toStr=function(b){f&&(b=a.trim(b));b=b.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"');return h?b:b.toLowerCase()};this._funcLoop=function(e){var c=[];a.each(b,function(a,b){c.push(e(b))});return c};this._append=function(a){var b;k=null===k?"":k+(""===l?" && ":l);for(b=0;b<r;b++)k+="(";q&&(k+="!");k+="("+a+")";q=!1;l="";r=0};this._setCommand=function(a,b){n=a;p=b};this._resetNegate=function(){q=!1};this._repeatCommand=function(a,
b){return null===n?e:null!==a&&null!==b?n(a,b):null!==p&&s?n(p,a):n(a)};this._equals=function(a,b){return 0===e._compare(a,b,1)};this._compare=function(a,b,e){var c=Object.prototype.toString;void 0===e&&(e=1);void 0===a&&(a=null);void 0===b&&(b=null);if(null===a&&null===b)return 0;if(null===a&&null!==b)return 1;if(null!==a&&null===b)return-1;if("[object Date]"===c.call(a)&&"[object Date]"===c.call(b))return a<b?-e:a>b?e:0;h||"number"===typeof a||"number"===typeof b||(a=String(a),b=String(b));return a<
b?-e:a>b?e:0};this._performSort=function(){0!==t.length&&(b=e._doSort(b,0))};this._doSort=function(a,b){var c=t[b].by,d=t[b].dir,f=t[b].type,h=t[b].datefmt;if(b===t.length-1)return e._getOrder(a,c,d,f,h);b++;for(var c=e._getGroup(a,c,d,f,h),d=[],k,f=0;f<c.length;f++)for(k=e._doSort(c[f].items,b),h=0;h<k.length;h++)d.push(k[h]);return d};this._getOrder=function(b,c,d,f,k){var l=[],n=[],p="a"===d?1:-1,r,q;void 0===f&&(f="text");q="float"===f||"number"===f||"currency"===f||"numeric"===f?function(a){a=
parseFloat(String(a).replace(m,""));return isNaN(a)?0:a}:"int"===f||"integer"===f?function(a){return a?parseFloat(String(a).replace(m,"")):0}:"date"===f||"datetime"===f?function(b){return a.jgrid.parseDate(k,b).getTime()}:a.isFunction(f)?f:function(b){b=b?a.trim(String(b)):"";return h?b:b.toLowerCase()};a.each(b,function(b,e){r=""!==c?a.jgrid.getAccessor(e,c):e;void 0===r&&(r="");r=q(r,e);n.push({vSort:r,index:b})});n.sort(function(a,b){a=a.vSort;b=b.vSort;return e._compare(a,b,p)});f=0;for(var s=
b.length;f<s;)d=n[f].index,l.push(b[d]),f++;return l};this._getGroup=function(b,c,d,f,h){var k=[],l=null,m=null,n;a.each(e._getOrder(b,c,d,f,h),function(b,d){n=a.jgrid.getAccessor(d,c);null==n&&(n="");e._equals(m,n)||(m=n,null!==l&&k.push(l),l=e._group(c,n));l.items.push(d)});null!==l&&k.push(l);return k};this.ignoreCase=function(){h=!1;return e};this.useCase=function(){h=!0;return e};this.trim=function(){f=!0;return e};this.noTrim=function(){f=!1;return e};this.execute=function(){var c=k,d=[];if(null===
c)return e;a.each(b,function(){eval(c)&&d.push(this)});b=d;return e};this.data=function(){return b};this.select=function(c){e._performSort();if(!e._hasData())return[];e.execute();if(a.isFunction(c)){var d=[];a.each(b,function(a,b){d.push(c(b))});return d}return b};this.hasMatch=function(){if(!e._hasData())return!1;e.execute();return 0<b.length};this.andNot=function(a,b,c){q=!q;return e.and(a,b,c)};this.orNot=function(a,b,c){q=!q;return e.or(a,b,c)};this.not=function(a,b,c){return e.andNot(a,b,c)};
this.and=function(a,b,c){l=" && ";return void 0===a?e:e._repeatCommand(a,b,c)};this.or=function(a,b,c){l=" || ";return void 0===a?e:e._repeatCommand(a,b,c)};this.orBegin=function(){r++;return e};this.orEnd=function(){null!==k&&(k+=")");return e};this.isNot=function(a){q=!q;return e.is(a)};this.is=function(a){e._append("this."+a);e._resetNegate();return e};this._compareValues=function(b,c,d,f,h){var k;k=s?"jQuery.jgrid.getAccessor(this,'"+c+"')":"this";void 0===d&&(d=null);var l=d,n=void 0===h.stype?
"text":h.stype;if(null!==d)switch(n){case "int":case "integer":l=isNaN(Number(l))||""===l?"0":l;k="parseInt("+k+",10)";l="parseInt("+l+",10)";break;case "float":case "number":case "numeric":l=String(l).replace(m,"");l=isNaN(Number(l))||""===l?"0":l;k="parseFloat("+k+")";l="parseFloat("+l+")";break;case "date":case "datetime":l=String(a.jgrid.parseDate(h.newfmt||"Y-m-d",l).getTime());k='jQuery.jgrid.parseDate("'+h.srcfmt+'",'+k+").getTime()";break;default:k=e._getStr(k),l=e._getStr('"'+e._toStr(l)+
'"')}e._append(k+" "+f+" "+l);e._setCommand(b,c);e._resetNegate();return e};this.equals=function(a,b,c){return e._compareValues(e.equals,a,b,"==",c)};this.notEquals=function(a,b,c){return e._compareValues(e.equals,a,b,"!==",c)};this.isNull=function(a,b,c){return e._compareValues(e.equals,a,null,"===",c)};this.greater=function(a,b,c){return e._compareValues(e.greater,a,b,">",c)};this.less=function(a,b,c){return e._compareValues(e.less,a,b,"<",c)};this.greaterOrEquals=function(a,b,c){return e._compareValues(e.greaterOrEquals,
a,b,">=",c)};this.lessOrEquals=function(a,b,c){return e._compareValues(e.lessOrEquals,a,b,"<=",c)};this.startsWith=function(b,c){var d=null==c?b:c,d=f?a.trim(d.toString()).length:d.toString().length;s?e._append(e._getStr("jQuery.jgrid.getAccessor(this,'"+b+"')")+".substr(0,"+d+") == "+e._getStr('"'+e._toStr(c)+'"')):(d=f?a.trim(c.toString()).length:c.toString().length,e._append(e._getStr("this")+".substr(0,"+d+") == "+e._getStr('"'+e._toStr(b)+'"')));e._setCommand(e.startsWith,b);e._resetNegate();
return e};this.endsWith=function(b,c){var d=null==c?b:c,d=f?a.trim(d.toString()).length:d.toString().length;s?e._append(e._getStr("jQuery.jgrid.getAccessor(this,'"+b+"')")+".substr("+e._getStr("jQuery.jgrid.getAccessor(this,'"+b+"')")+".length-"+d+","+d+') == "'+e._toStr(c)+'"'):e._append(e._getStr("this")+".substr("+e._getStr("this")+'.length-"'+e._toStr(b)+'".length,"'+e._toStr(b)+'".length) == "'+e._toStr(b)+'"');e._setCommand(e.endsWith,b);e._resetNegate();return e};this.contains=function(a,b){s?
e._append(e._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+'.indexOf("'+e._toStr(b)+'",0) > -1'):e._append(e._getStr("this")+'.indexOf("'+e._toStr(a)+'",0) > -1');e._setCommand(e.contains,a);e._resetNegate();return e};this.groupBy=function(a,c,d,f){return e._hasData()?e._getGroup(b,a,c,d,f):null};this.orderBy=function(b,c,d,f){c=null==c?"a":a.trim(c.toString().toLowerCase());null==d&&(d="text");null==f&&(f="Y-m-d");if("desc"===c||"descending"===c)c="d";if("asc"===c||"ascending"===c)c="a";t.push({by:b,
dir:c,type:d,datefmt:f});return e};return e}(e,null)},getMethod:function(e){return this.getAccessor(a.fn.jqGrid,e)},extend:function(e){a.extend(a.fn.jqGrid,e);this.no_legacy_api||a.fn.extend(e)}});a.fn.jqGrid=function(e){if("string"===typeof e){var d=a.jgrid.getMethod(e);if(!d)throw"jqGrid - No such method: "+e;var c=a.makeArray(arguments).slice(1);return d.apply(this,c)}return this.each(function(){if(!this.grid){var c=a.extend(!0,{url:"",height:150,page:1,rowNum:20,rowTotal:null,records:0,pager:"",
pgbuttons:!0,pginput:!0,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:!1,selarrrow:[],savedRow:[],shrinkToFit:!0,xmlReader:{},jsonReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,onInitGrid:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,
beforeProcessing:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,multiselect:!1,multikey:!1,editurl:null,search:!1,caption:"",hidegrid:!0,hiddengrid:!1,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:!1,gridstate:"visible",
cellEdit:!1,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,multiboxonly:!1,deselectAfterSort:!0,scrollrows:!1,autowidth:!1,scrollOffset:18,cellLayout:5,subGridWidth:20,multiselectWidth:20,gridview:!1,rownumWidth:25,rownumbers:!1,pagerpos:"center",recordpos:"right",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,altclass:"ui-priority-secondary",viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!1,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:!1,headertitles:!1,
scrollTimeout:40,data:[],_index:{},grouping:!1,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:!1,sortitems:[],sortnames:[],summary:[],summaryval:[],plusicon:"ui-icon-circlesmall-plus",minusicon:"ui-icon-circlesmall-minus",displayField:[]},ignoreCase:!1,cmTemplate:{},idPrefix:"",multiSort:!1},a.jgrid.defaults,e||{}),b=this,d={headers:[],cols:[],footers:[],dragStart:function(d,e,f){this.resizing={idx:d,startX:e.clientX,sOL:e.clientX-6};this.hDiv.style.cursor=
"col-resize";this.curGbox=a("#rs_m"+a.jgrid.jqID(c.id),"#gbox_"+a.jgrid.jqID(c.id));this.curGbox.css({display:"block",left:e.clientX-6,top:f[1],height:f[2]});a(b).triggerHandler("jqGridResizeStart",[e,d]);a.isFunction(c.resizeStart)&&c.resizeStart.call(b,e,d);document.onselectstart=function(){return!1}},dragMove:function(a){if(this.resizing){var b=a.clientX-this.resizing.startX;a=this.headers[this.resizing.idx];var d="ltr"===c.direction?a.width+b:a.width-b,e;33<d&&(this.curGbox.css({left:this.resizing.sOL+
b}),!0===c.forceFit?(e=this.headers[this.resizing.idx+c.nv],b="ltr"===c.direction?e.width-b:e.width+b,33<b&&(a.newWidth=d,e.newWidth=b)):(this.newWidth="ltr"===c.direction?c.tblwidth+b:c.tblwidth-b,a.newWidth=d))}},dragEnd:function(){this.hDiv.style.cursor="default";if(this.resizing){var d=this.resizing.idx,e=this.headers[d].newWidth||this.headers[d].width,e=parseInt(e,10);this.resizing=!1;a("#rs_m"+a.jgrid.jqID(c.id)).css("display","none");c.colModel[d].width=e;this.headers[d].width=e;this.headers[d].el.style.width=
e+"px";this.cols[d].style.width=e+"px";0<this.footers.length&&(this.footers[d].style.width=e+"px");!0===c.forceFit?(e=this.headers[d+c.nv].newWidth||this.headers[d+c.nv].width,this.headers[d+c.nv].width=e,this.headers[d+c.nv].el.style.width=e+"px",this.cols[d+c.nv].style.width=e+"px",0<this.footers.length&&(this.footers[d+c.nv].style.width=e+"px"),c.colModel[d+c.nv].width=e):(c.tblwidth=this.newWidth||c.tblwidth,a("table:first",this.bDiv).css("width",c.tblwidth+"px"),a("table:first",this.hDiv).css("width",
c.tblwidth+"px"),this.hDiv.scrollLeft=this.bDiv.scrollLeft,c.footerrow&&(a("table:first",this.sDiv).css("width",c.tblwidth+"px"),this.sDiv.scrollLeft=this.bDiv.scrollLeft));a(b).triggerHandler("jqGridResizeStop",[e,d]);a.isFunction(c.resizeStop)&&c.resizeStop.call(b,e,d)}this.curGbox=null;document.onselectstart=function(){return!0}},populateVisible:function(){d.timer&&clearTimeout(d.timer);d.timer=null;var b=a(d.bDiv).height();if(b){var e=a("table:first",d.bDiv),f,k;if(e[0].rows.length)try{k=(f=e[0].rows[1])?
a(f).outerHeight()||d.prevRowHeight:d.prevRowHeight}catch(l){k=d.prevRowHeight}if(k){d.prevRowHeight=k;var m=c.rowNum;f=d.scrollTop=d.bDiv.scrollTop;var n=Math.round(e.position().top)-f,p=n+e.height();k*=m;var r,q,s;p<b&&0>=n&&(void 0===c.lastpage||parseInt((p+f+k-1)/k,10)<=c.lastpage)&&(q=parseInt((b-p+k-1)/k,10),0<=p||2>q||!0===c.scroll?(r=Math.round((p+f)/k)+1,n=-1):n=1);0<n&&(r=parseInt(f/k,10)+1,q=parseInt((f+b)/k,10)+2-r,s=!0);!q||c.lastpage&&(r>c.lastpage||1===c.lastpage||r===c.page&&r===c.lastpage)||
(d.hDiv.loading?d.timer=setTimeout(d.populateVisible,c.scrollTimeout):(c.page=r,s&&(d.selectionPreserver(e[0]),d.emptyRows.call(e[0],!1,!1)),d.populate(q)))}}},scrollGrid:function(a){if(c.scroll){var b=d.bDiv.scrollTop;void 0===d.scrollTop&&(d.scrollTop=0);b!==d.scrollTop&&(d.scrollTop=b,d.timer&&clearTimeout(d.timer),d.timer=setTimeout(d.populateVisible,c.scrollTimeout))}d.hDiv.scrollLeft=d.bDiv.scrollLeft;c.footerrow&&(d.sDiv.scrollLeft=d.bDiv.scrollLeft);a&&a.stopPropagation()},selectionPreserver:function(b){var d=
b.p,c=d.selrow,e=d.selarrrow?a.makeArray(d.selarrrow):null,g=b.grid.bDiv.scrollLeft,f=function(){var k;d.selrow=null;d.selarrrow=[];if(d.multiselect&&e&&0<e.length)for(k=0;k<e.length;k++)e[k]!==c&&a(b).jqGrid("setSelection",e[k],!1,null);c&&a(b).jqGrid("setSelection",c,!1,null);b.grid.bDiv.scrollLeft=g;a(b).unbind(".selectionPreserver",f)};a(b).bind("jqGridGridComplete.selectionPreserver",f)}};if("TABLE"!==this.tagName.toUpperCase())alert("Element is not a table");else if(void 0!==document.documentMode&&
5>=document.documentMode)alert("Grid can not be used in this ('quirks') mode!");else{a(this).empty().attr("tabindex","0");this.p=c;this.p.useProp=!!a.fn.prop;var f,k;if(0===this.p.colNames.length)for(f=0;f<this.p.colModel.length;f++)this.p.colNames[f]=this.p.colModel[f].label||this.p.colModel[f].name;if(this.p.colNames.length!==this.p.colModel.length)alert(a.jgrid.errors.model);else{var m=a("<div class='ui-jqgrid-view'></div>"),n=a.jgrid.msie;b.p.direction=a.trim(b.p.direction.toLowerCase());-1===
a.inArray(b.p.direction,["ltr","rtl"])&&(b.p.direction="ltr");k=b.p.direction;a(m).insertBefore(this);a(this).removeClass("scroll").appendTo(m);var p=a("<div class='ui-jqgrid ui-widget ui-widget-content ui-corner-all'></div>");a(p).attr({id:"gbox_"+this.id,dir:k}).insertBefore(m);a(m).attr("id","gview_"+this.id).appendTo(p);a("<div class='ui-widget-overlay jqgrid-overlay' id='lui_"+this.id+"'></div>").insertBefore(m);a("<div class='loading ui-state-default ui-state-active' id='load_"+this.id+"'>"+
this.p.loadtext+"</div>").insertBefore(m);a(this).attr({cellspacing:"0",cellpadding:"0",border:"0",role:"grid","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});var r=function(a,b){a=parseInt(a,10);return isNaN(a)?b||0:a},q=function(c,e,g,f,k,l){var m=b.p.colModel[c],n=m.align,p='style="',r=m.classes,q=m.name,s=[];n&&(p+="text-align:"+n+";");!0===m.hidden&&(p+="display:none;");if(0===e)p+="width: "+d.headers[c].width+"px;";else if(m.cellattr&&a.isFunction(m.cellattr)&&
(c=m.cellattr.call(b,k,g,f,m,l))&&"string"===typeof c)if(c=c.replace(/style/i,"style").replace(/title/i,"title"),-1<c.indexOf("title")&&(m.title=!1),-1<c.indexOf("class")&&(r=void 0),s=c.replace("-style","-sti").split(/style/),2===s.length){s[1]=a.trim(s[1].replace("-sti","-style").replace("=",""));if(0===s[1].indexOf("'")||0===s[1].indexOf('"'))s[1]=s[1].substring(1);p+=s[1].replace(/'/gi,'"')}else p+='"';s.length||(s[0]="",p+='"');p+=(void 0!==r?' class="'+r+'"':"")+(m.title&&g?' title="'+a.jgrid.stripHtml(g)+
'"':"");p+=' aria-describedby="'+b.p.id+"_"+q+'"';return p+s[0]},l=function(c){return null==c||""===c?"&#160;":b.p.autoencode?a.jgrid.htmlEncode(c):String(c)},t=function(c,d,e,g,f){var k=b.p.colModel[e];void 0!==k.formatter?(c=""!==String(b.p.idPrefix)?a.jgrid.stripPref(b.p.idPrefix,c):c,c={rowId:c,colModel:k,gid:b.p.id,pos:e},d=a.isFunction(k.formatter)?k.formatter.call(b,d,c,g,f):a.fmatter?a.fn.fmatter.call(b,k.formatter,d,c,g,f):l(d)):d=l(d);return d},s=function(a,b,c,d,e,g){b=t(a,b,c,e,"add");
return'<td role="gridcell" '+q(c,d,b,e,a,g)+">"+b+"</td>"},w=function(a,c,d,e){e='<input role="checkbox" type="checkbox" id="jqg_'+b.p.id+"_"+a+'" class="cbox" name="jqg_'+b.p.id+"_"+a+'"'+(e?'checked="checked"':"")+"/>";return'<td role="gridcell" '+q(c,d,"",null,a,!0)+">"+e+"</td>"},v=function(a,b,c,d){c=(parseInt(c,10)-1)*parseInt(d,10)+1+b;return'<td role="gridcell" class="ui-state-default jqgrid-rownum" '+q(a,b,c,null,b,!0)+">"+c+"</td>"},x=function(a){var c,d=[],e=0,g;for(g=0;g<b.p.colModel.length;g++)c=
b.p.colModel[g],"cb"!==c.name&&"subgrid"!==c.name&&"rn"!==c.name&&(d[e]="local"===a?c.name:"xml"===a||"xmlstring"===a?c.xmlmap||c.name:c.jsonmap||c.name,!1!==b.p.keyIndex&&!0===c.key&&(b.p.keyName=d[e]),e++);return d},G=function(c){var d=b.p.remapColumns;d&&d.length||(d=a.map(b.p.colModel,function(a,b){return b}));c&&(d=a.map(d,function(a){return a<c?null:a-c}));return d},C=function(b,c){var d;this.p.deepempty?a(this.rows).slice(1).remove():(d=0<this.rows.length?this.rows[0]:null,a(this.firstChild).empty().append(d));
b&&this.p.scroll&&(a(this.grid.bDiv.firstChild).css({height:"auto"}),a(this.grid.bDiv.firstChild.firstChild).css({height:0,display:"none"}),0!==this.grid.bDiv.scrollTop&&(this.grid.bDiv.scrollTop=0));!0===c&&this.p.treeGrid&&(this.p.data=[],this.p._index={})},z=function(){var c=b.p.data.length,d,e,g;d=!0===b.p.rownumbers?1:0;e=!0===b.p.multiselect?1:0;g=!0===b.p.subGrid?1:0;d=!1===b.p.keyIndex||!0===b.p.loadonce?b.p.localReader.id:b.p.colModel[b.p.keyIndex+e+g+d].name;for(e=0;e<c;e++)g=a.jgrid.getAccessor(b.p.data[e],
d),void 0===g&&(g=String(e+1)),b.p._index[g]=e},S=function(c,d,e,g,f,k){var l="-1",h="",m;d=d?"display:none;":"";e="ui-widget-content jqgrow ui-row-"+b.p.direction+(e?" "+e:"")+(k?" ui-state-highlight":"");k=a(b).triggerHandler("jqGridRowAttr",[g,f,c]);"object"!==typeof k&&(k=a.isFunction(b.p.rowattr)?b.p.rowattr.call(b,g,f,c):{});if(!a.isEmptyObject(k)){k.hasOwnProperty("id")&&(c=k.id,delete k.id);k.hasOwnProperty("tabindex")&&(l=k.tabindex,delete k.tabindex);k.hasOwnProperty("style")&&(d+=k.style,
delete k.style);k.hasOwnProperty("class")&&(e+=" "+k["class"],delete k["class"]);try{delete k.role}catch(n){}for(m in k)k.hasOwnProperty(m)&&(h+=" "+m+"="+k[m])}return'<tr role="row" id="'+c+'" tabindex="'+l+'" class="'+e+'"'+(""===d?"":' style="'+d+'"')+h+">"},y=function(c,d,e,g,f){var k=new Date,h="local"!==b.p.datatype&&b.p.loadonce||"xmlstring"===b.p.datatype,l=b.p.xmlReader,m="local"===b.p.datatype?"local":"xml";h&&(b.p.data=[],b.p._index={},b.p.localReader.id="_id_");b.p.reccount=0;if(a.isXMLDoc(c)){-1!==
b.p.treeANode||b.p.scroll?e=1<e?e:1:(C.call(b,!1,!0),e=1);var n=a(b),p,q,A=0,t,y=!0===b.p.multiselect?1:0,L=0,u,z=!0===b.p.rownumbers?1:0,H,J=[],O,E={},K,F,D=[],M=!0===b.p.altRows?b.p.altclass:"",B;!0===b.p.subGrid&&(L=1,u=a.jgrid.getMethod("addSubGridCell"));l.repeatitems||(J=x(m));H=!1===b.p.keyIndex?a.isFunction(l.id)?l.id.call(b,c):l.id:b.p.keyIndex;0<J.length&&!isNaN(H)&&(H=b.p.keyName);m=-1===String(H).indexOf("[")?J.length?function(b,c){return a(H,b).text()||c}:function(b,c){return a(l.cell,
b).eq(H).text()||c}:function(a,b){return a.getAttribute(H.replace(/[\[\]]/g,""))||b};b.p.userData={};b.p.page=r(a.jgrid.getXmlData(c,l.page),b.p.page);b.p.lastpage=r(a.jgrid.getXmlData(c,l.total),1);b.p.records=r(a.jgrid.getXmlData(c,l.records));a.isFunction(l.userdata)?b.p.userData=l.userdata.call(b,c)||{}:a.jgrid.getXmlData(c,l.userdata,!0).each(function(){b.p.userData[this.getAttribute("name")]=a(this).text()});c=a.jgrid.getXmlData(c,l.root,!0);(c=a.jgrid.getXmlData(c,l.row,!0))||(c=[]);var Q=
c.length,I=0,V=[],X=parseInt(b.p.rowNum,10),T=b.p.scroll?a.jgrid.randId():1;0<Q&&0>=b.p.page&&(b.p.page=1);if(c&&Q){f&&(X*=f+1);f=a.isFunction(b.p.afterInsertRow);var N=!1,R;b.p.grouping&&(N=!0===b.p.groupingView.groupCollapse,R=a.jgrid.getMethod("groupingPrepare"));for(;I<Q;){K=c[I];F=m(K,T+I);F=b.p.idPrefix+F;p=0===e?0:e+1;B=1===(p+I)%2?M:"";var P=D.length;D.push("");z&&D.push(v(0,I,b.p.page,b.p.rowNum));y&&D.push(w(F,z,I,!1));L&&D.push(u.call(n,y+z,I+e));if(l.repeatitems){O||(O=G(y+L+z));var U=
a.jgrid.getXmlData(K,l.cell,!0);a.each(O,function(a){var c=U[this];if(!c)return!1;t=c.textContent||c.text;E[b.p.colModel[a+y+L+z].name]=t;D.push(s(F,t,a+y+L+z,I+e,K,E))})}else for(p=0;p<J.length;p++)t=a.jgrid.getXmlData(K,J[p]),E[b.p.colModel[p+y+L+z].name]=t,D.push(s(F,t,p+y+L+z,I+e,K,E));D[P]=S(F,N,B,E,K,!1);D.push("</tr>");b.p.grouping&&(V=R.call(n,D,V,E,I),D=[]);if(h||!0===b.p.treeGrid)E._id_=a.jgrid.stripPref(b.p.idPrefix,F),b.p.data.push(E),b.p._index[E._id_]=b.p.data.length-1;!1===b.p.gridview&&
(a("tbody:first",d).append(D.join("")),n.triggerHandler("jqGridAfterInsertRow",[F,E,K]),f&&b.p.afterInsertRow.call(b,F,E,K),D=[]);E={};A++;I++;if(A===X)break}}!0===b.p.gridview&&(q=-1<b.p.treeANode?b.p.treeANode:0,b.p.grouping?(n.jqGrid("groupingRender",V,b.p.colModel.length),V=null):!0===b.p.treeGrid&&0<q?a(b.rows[q]).after(D.join("")):a("tbody:first",d).append(D.join("")));if(!0===b.p.subGrid)try{n.jqGrid("addSubGrid",y+z)}catch(fa){}b.p.totaltime=new Date-k;0<A&&0===b.p.records&&(b.p.records=Q);
D=null;if(!0===b.p.treeGrid)try{n.jqGrid("setTreeNode",q+1,A+q+1)}catch(W){}b.p.treeGrid||b.p.scroll||(b.grid.bDiv.scrollTop=0);b.p.reccount=A;b.p.treeANode=-1;b.p.userDataOnFooter&&n.jqGrid("footerData","set",b.p.userData,!0);h&&(b.p.records=Q,b.p.lastpage=Math.ceil(Q/X));g||b.updatepager(!1,!0);if(h)for(;A<Q;){K=c[A];F=m(K,A+T);F=b.p.idPrefix+F;if(l.repeatitems){O||(O=G(y+L+z));var $=a.jgrid.getXmlData(K,l.cell,!0);a.each(O,function(a){var c=$[this];if(!c)return!1;t=c.textContent||c.text;E[b.p.colModel[a+
y+L+z].name]=t})}else for(p=0;p<J.length;p++)t=a.jgrid.getXmlData(K,J[p]),E[b.p.colModel[p+y+L+z].name]=t;E._id_=a.jgrid.stripPref(b.p.idPrefix,F);b.p.data.push(E);b.p._index[E._id_]=b.p.data.length-1;E={};A++}}},H=function(c,d,e,g,f){var k=new Date;if(c){-1!==b.p.treeANode||b.p.scroll?e=1<e?e:1:(C.call(b,!1,!0),e=1);var l,h="local"!==b.p.datatype&&b.p.loadonce||"jsonstring"===b.p.datatype;h&&(b.p.data=[],b.p._index={},b.p.localReader.id="_id_");b.p.reccount=0;"local"===b.p.datatype?(d=b.p.localReader,
l="local"):(d=b.p.jsonReader,l="json");var m=a(b),n=0,p,q,A,t=[],y=b.p.multiselect?1:0,L=!0===b.p.subGrid?1:0,u,z=!0===b.p.rownumbers?1:0,E=G(y+L+z);l=x(l);var H,J,F,K={},O,D,I=[],Q=!0===b.p.altRows?b.p.altclass:"",M;b.p.page=r(a.jgrid.getAccessor(c,d.page),b.p.page);b.p.lastpage=r(a.jgrid.getAccessor(c,d.total),1);b.p.records=r(a.jgrid.getAccessor(c,d.records));b.p.userData=a.jgrid.getAccessor(c,d.userdata)||{};L&&(u=a.jgrid.getMethod("addSubGridCell"));F=!1===b.p.keyIndex?a.isFunction(d.id)?d.id.call(b,
c):d.id:b.p.keyIndex;d.repeatitems||(t=l,0<t.length&&!isNaN(F)&&(F=b.p.keyName));J=a.jgrid.getAccessor(c,d.root);null==J&&a.isArray(c)&&(J=c);J||(J=[]);c=J.length;q=0;0<c&&0>=b.p.page&&(b.p.page=1);var B=parseInt(b.p.rowNum,10),V=b.p.scroll?a.jgrid.randId():1,X=!1,T;f&&(B*=f+1);"local"!==b.p.datatype||b.p.deselectAfterSort||(X=!0);var N=a.isFunction(b.p.afterInsertRow),R=[],P=!1,U;b.p.grouping&&(P=!0===b.p.groupingView.groupCollapse,U=a.jgrid.getMethod("groupingPrepare"));for(;q<c;){f=J[q];D=a.jgrid.getAccessor(f,
F);void 0===D&&("number"===typeof F&&null!=b.p.colModel[F+y+L+z]&&(D=a.jgrid.getAccessor(f,b.p.colModel[F+y+L+z].name)),void 0===D&&(D=V+q,0===t.length&&d.cell&&(p=a.jgrid.getAccessor(f,d.cell)||f,D=null!=p&&void 0!==p[F]?p[F]:D)));D=b.p.idPrefix+D;p=1===e?0:e;M=1===(p+q)%2?Q:"";X&&(T=b.p.multiselect?-1!==a.inArray(D,b.p.selarrrow):D===b.p.selrow);var fa=I.length;I.push("");z&&I.push(v(0,q,b.p.page,b.p.rowNum));y&&I.push(w(D,z,q,T));L&&I.push(u.call(m,y+z,q+e));H=l;d.repeatitems&&(d.cell&&(f=a.jgrid.getAccessor(f,
d.cell)||f),a.isArray(f)&&(H=E));for(A=0;A<H.length;A++)p=a.jgrid.getAccessor(f,H[A]),K[b.p.colModel[A+y+L+z].name]=p,I.push(s(D,p,A+y+L+z,q+e,f,K));I[fa]=S(D,P,M,K,f,T);I.push("</tr>");b.p.grouping&&(R=U.call(m,I,R,K,q),I=[]);if(h||!0===b.p.treeGrid)K._id_=a.jgrid.stripPref(b.p.idPrefix,D),b.p.data.push(K),b.p._index[K._id_]=b.p.data.length-1;!1===b.p.gridview&&(a("#"+a.jgrid.jqID(b.p.id)+" tbody:first").append(I.join("")),m.triggerHandler("jqGridAfterInsertRow",[D,K,f]),N&&b.p.afterInsertRow.call(b,
D,K,f),I=[]);K={};n++;q++;if(n===B)break}!0===b.p.gridview&&(O=-1<b.p.treeANode?b.p.treeANode:0,b.p.grouping?m.jqGrid("groupingRender",R,b.p.colModel.length):!0===b.p.treeGrid&&0<O?a(b.rows[O]).after(I.join("")):a("#"+a.jgrid.jqID(b.p.id)+" tbody:first").append(I.join("")));if(!0===b.p.subGrid)try{m.jqGrid("addSubGrid",y+z)}catch($){}b.p.totaltime=new Date-k;0<n&&0===b.p.records&&(b.p.records=c);if(!0===b.p.treeGrid)try{m.jqGrid("setTreeNode",O+1,n+O+1)}catch(W){}b.p.treeGrid||b.p.scroll||(b.grid.bDiv.scrollTop=
0);b.p.reccount=n;b.p.treeANode=-1;b.p.userDataOnFooter&&m.jqGrid("footerData","set",b.p.userData,!0);h&&(b.p.records=c,b.p.lastpage=Math.ceil(c/B));g||b.updatepager(!1,!0);if(h)for(;n<c&&J[n];){f=J[n];D=a.jgrid.getAccessor(f,F);void 0===D&&("number"===typeof F&&null!=b.p.colModel[F+y+L+z]&&(D=a.jgrid.getAccessor(f,b.p.colModel[F+y+L+z].name)),void 0===D&&(D=V+n,0===t.length&&d.cell&&(e=a.jgrid.getAccessor(f,d.cell)||f,D=null!=e&&void 0!==e[F]?e[F]:D)));if(f){D=b.p.idPrefix+D;H=l;d.repeatitems&&(d.cell&&
(f=a.jgrid.getAccessor(f,d.cell)||f),a.isArray(f)&&(H=E));for(A=0;A<H.length;A++)K[b.p.colModel[A+y+L+z].name]=a.jgrid.getAccessor(f,H[A]);K._id_=a.jgrid.stripPref(b.p.idPrefix,D);b.p.data.push(K);b.p._index[K._id_]=b.p.data.length-1;K={}}n++}}},T=function(){function c(a){var b=0,d,e,g,k,l;if(null!=a.groups){(e=a.groups.length&&"OR"===a.groupOp.toString().toUpperCase())&&A.orBegin();for(d=0;d<a.groups.length;d++){0<b&&e&&A.or();try{c(a.groups[d])}catch(h){alert(h)}b++}e&&A.orEnd()}if(null!=a.rules)try{(g=
a.rules.length&&"OR"===a.groupOp.toString().toUpperCase())&&A.orBegin();for(d=0;d<a.rules.length;d++)l=a.rules[d],k=a.groupOp.toString().toUpperCase(),s[l.op]&&l.field&&(0<b&&k&&"OR"===k&&(A=A.or()),A=s[l.op](A,k)(l.field,l.data,f[l.field])),b++;g&&A.orEnd()}catch(m){alert(m)}}var d=b.p.multiSort?[]:"",e=[],g=!1,f={},k=[],l=[],h,m,n;if(a.isArray(b.p.data)){var p=b.p.grouping?b.p.groupingView:!1,r,q;a.each(b.p.colModel,function(){m=this.sorttype||"text";"date"===m||"datetime"===m?(this.formatter&&
"string"===typeof this.formatter&&"date"===this.formatter?(h=this.formatoptions&&this.formatoptions.srcformat?this.formatoptions.srcformat:a.jgrid.formatter.date.srcformat,n=this.formatoptions&&this.formatoptions.newformat?this.formatoptions.newformat:a.jgrid.formatter.date.newformat):h=n=this.datefmt||"Y-m-d",f[this.name]={stype:m,srcfmt:h,newfmt:n}):f[this.name]={stype:m,srcfmt:"",newfmt:""};if(b.p.grouping)for(q=0,r=p.groupField.length;q<r;q++)if(this.name===p.groupField[q]){var c=this.name;this.index&&
(c=this.index);k[q]=f[c];l[q]=c}b.p.multiSort?this.lso&&(d.push(this.name),c=this.lso.split("-"),e.push(c[c.length-1])):g||this.index!==b.p.sortname&&this.name!==b.p.sortname||(d=this.name,g=!0)});if(b.p.treeGrid)a(b).jqGrid("SortTree",d,b.p.sortorder,f[d].stype||"text",f[d].srcfmt||"");else{var s={eq:function(a){return a.equals},ne:function(a){return a.notEquals},lt:function(a){return a.less},le:function(a){return a.lessOrEquals},gt:function(a){return a.greater},ge:function(a){return a.greaterOrEquals},
cn:function(a){return a.contains},nc:function(a,b){return"OR"===b?a.orNot().contains:a.andNot().contains},bw:function(a){return a.startsWith},bn:function(a,b){return"OR"===b?a.orNot().startsWith:a.andNot().startsWith},en:function(a,b){return"OR"===b?a.orNot().endsWith:a.andNot().endsWith},ew:function(a){return a.endsWith},ni:function(a,b){return"OR"===b?a.orNot().equals:a.andNot().equals},"in":function(a){return a.equals},nu:function(a){return a.isNull},nn:function(a,b){return"OR"===b?a.orNot().isNull:
a.andNot().isNull}},A=a.jgrid.from(b.p.data);b.p.ignoreCase&&(A=A.ignoreCase());if(!0===b.p.search){var t=b.p.postData.filters;if(t)"string"===typeof t&&(t=a.jgrid.parse(t)),c(t);else try{A=s[b.p.postData.searchOper](A)(b.p.postData.searchField,b.p.postData.searchString,f[b.p.postData.searchField])}catch(y){}}if(b.p.grouping)for(q=0;q<r;q++)A.orderBy(l[q],p.groupOrder[q],k[q].stype,k[q].srcfmt);b.p.multiSort?a.each(d,function(a){A.orderBy(this,e[a],f[this].stype,f[this].srcfmt)}):d&&b.p.sortorder&&
g&&("DESC"===b.p.sortorder.toUpperCase()?A.orderBy(b.p.sortname,"d",f[d].stype,f[d].srcfmt):A.orderBy(b.p.sortname,"a",f[d].stype,f[d].srcfmt));var t=A.select(),L=parseInt(b.p.rowNum,10),w=t.length,z=parseInt(b.p.page,10),v=Math.ceil(w/L),u={},t=t.slice((z-1)*L,z*L),f=A=null;u[b.p.localReader.total]=v;u[b.p.localReader.page]=z;u[b.p.localReader.records]=w;u[b.p.localReader.root]=t;u[b.p.localReader.userdata]=b.p.userData;t=null;return u}}},u=function(){b.grid.hDiv.loading=!0;if(!b.p.hiddengrid)switch(b.p.loadui){case "enable":a("#load_"+
a.jgrid.jqID(b.p.id)).show();break;case "block":a("#lui_"+a.jgrid.jqID(b.p.id)).show(),a("#load_"+a.jgrid.jqID(b.p.id)).show()}},P=function(){b.grid.hDiv.loading=!1;switch(b.p.loadui){case "enable":a("#load_"+a.jgrid.jqID(b.p.id)).hide();break;case "block":a("#lui_"+a.jgrid.jqID(b.p.id)).hide(),a("#load_"+a.jgrid.jqID(b.p.id)).hide()}},B=function(c){if(!b.grid.hDiv.loading){var d=b.p.scroll&&!1===c,e={},g,f=b.p.prmNames;0>=b.p.page&&(b.p.page=Math.min(1,b.p.lastpage));null!==f.search&&(e[f.search]=
b.p.search);null!==f.nd&&(e[f.nd]=(new Date).getTime());null!==f.rows&&(e[f.rows]=b.p.rowNum);null!==f.page&&(e[f.page]=b.p.page);null!==f.sort&&(e[f.sort]=b.p.sortname);null!==f.order&&(e[f.order]=b.p.sortorder);null!==b.p.rowTotal&&null!==f.totalrows&&(e[f.totalrows]=b.p.rowTotal);var k=a.isFunction(b.p.loadComplete),l=k?b.p.loadComplete:null,h=0;c=c||1;1<c?null!==f.npage?(e[f.npage]=c,h=c-1,c=1):l=function(a){b.p.page++;b.grid.hDiv.loading=!1;k&&b.p.loadComplete.call(b,a);B(c-1)}:null!==f.npage&&
delete b.p.postData[f.npage];if(b.p.grouping){a(b).jqGrid("groupingSetup");var m=b.p.groupingView,n,p="";for(n=0;n<m.groupField.length;n++){var r=m.groupField[n];a.each(b.p.colModel,function(a,b){b.name===r&&b.index&&(r=b.index)});p+=r+" "+m.groupOrder[n]+", "}e[f.sort]=p+e[f.sort]}a.extend(b.p.postData,e);var q=b.p.scroll?b.rows.length-1:1,e=a(b).triggerHandler("jqGridBeforeRequest");if(!1!==e&&"stop"!==e)if(a.isFunction(b.p.datatype))b.p.datatype.call(b,b.p.postData,"load_"+b.p.id,q,c,h);else{if(a.isFunction(b.p.beforeRequest)&&
(e=b.p.beforeRequest.call(b),void 0===e&&(e=!0),!1===e))return;g=b.p.datatype.toLowerCase();switch(g){case "json":case "jsonp":case "xml":case "script":a.ajax(a.extend({url:b.p.url,type:b.p.mtype,dataType:g,data:a.isFunction(b.p.serializeGridData)?b.p.serializeGridData.call(b,b.p.postData):b.p.postData,success:function(e,f,k){if(a.isFunction(b.p.beforeProcessing)&&!1===b.p.beforeProcessing.call(b,e,f,k))P();else{"xml"===g?y(e,b.grid.bDiv,q,1<c,h):H(e,b.grid.bDiv,q,1<c,h);a(b).triggerHandler("jqGridLoadComplete",
[e]);l&&l.call(b,e);a(b).triggerHandler("jqGridAfterLoadComplete",[e]);d&&b.grid.populateVisible();if(b.p.loadonce||b.p.treeGrid)b.p.datatype="local";1===c&&P()}},error:function(d,e,g){a.isFunction(b.p.loadError)&&b.p.loadError.call(b,d,e,g);1===c&&P()},beforeSend:function(c,d){var e=!0;a.isFunction(b.p.loadBeforeSend)&&(e=b.p.loadBeforeSend.call(b,c,d));void 0===e&&(e=!0);if(!1===e)return!1;u()}},a.jgrid.ajaxOptions,b.p.ajaxGridOptions));break;case "xmlstring":u();e="string"!==typeof b.p.datastr?
b.p.datastr:a.parseXML(b.p.datastr);y(e,b.grid.bDiv);a(b).triggerHandler("jqGridLoadComplete",[e]);k&&b.p.loadComplete.call(b,e);a(b).triggerHandler("jqGridAfterLoadComplete",[e]);b.p.datatype="local";b.p.datastr=null;P();break;case "jsonstring":u();e="string"===typeof b.p.datastr?a.jgrid.parse(b.p.datastr):b.p.datastr;H(e,b.grid.bDiv);a(b).triggerHandler("jqGridLoadComplete",[e]);k&&b.p.loadComplete.call(b,e);a(b).triggerHandler("jqGridAfterLoadComplete",[e]);b.p.datatype="local";b.p.datastr=null;
P();break;case "local":case "clientside":u(),b.p.datatype="local",e=T(),H(e,b.grid.bDiv,q,1<c,h),a(b).triggerHandler("jqGridLoadComplete",[e]),l&&l.call(b,e),a(b).triggerHandler("jqGridAfterLoadComplete",[e]),d&&b.grid.populateVisible(),P()}}}},U=function(c){a("#cb_"+a.jgrid.jqID(b.p.id),b.grid.hDiv)[b.p.useProp?"prop":"attr"]("checked",c);if(b.p.frozenColumns&&b.p.id+"_frozen")a("#cb_"+a.jgrid.jqID(b.p.id),b.grid.fhDiv)[b.p.useProp?"prop":"attr"]("checked",c)},ba=function(c,d){var e="",g="<table cellspacing='0' cellpadding='0' border='0' style='table-layout:auto;' class='ui-pg-table'><tbody><tr>",
f="",l,h,m,n,p=function(c){var d;a.isFunction(b.p.onPaging)&&(d=b.p.onPaging.call(b,c));if("stop"===d)return!1;b.p.selrow=null;b.p.multiselect&&(b.p.selarrrow=[],U(!1));b.p.savedRow=[];return!0};c=c.substr(1);d+="_"+c;l="pg_"+c;h=c+"_left";m=c+"_center";n=c+"_right";a("#"+a.jgrid.jqID(c)).append("<div id='"+l+"' class='ui-pager-control' role='group'><table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table' style='width:100%;table-layout:fixed;height:100%;' role='row'><tbody><tr><td id='"+
h+"' align='left'></td><td id='"+m+"' align='center' style='white-space:pre;'></td><td id='"+n+"' align='right'></td></tr></tbody></table></div>").attr("dir","ltr");if(0<b.p.rowList.length){f="<td dir='"+k+"'>";f+="<select class='ui-pg-selbox' role='listbox'>";for(h=0;h<b.p.rowList.length;h++)f+='<option role="option" value="'+b.p.rowList[h]+'"'+(b.p.rowNum===b.p.rowList[h]?' selected="selected"':"")+">"+b.p.rowList[h]+"</option>";f+="</select></td>"}"rtl"===k&&(g+=f);!0===b.p.pginput&&(e="<td dir='"+
k+"'>"+a.jgrid.format(b.p.pgtext||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+a.jgrid.jqID(c)+"'></span>")+"</td>");!0===b.p.pgbuttons?(h=["first"+d,"prev"+d,"next"+d,"last"+d],"rtl"===k&&h.reverse(),g+="<td id='"+h[0]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-first'></span></td>",g+="<td id='"+h[1]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-prev'></span></td>",g=g+(""!==
e?"<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>"+e+"<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>":"")+("<td id='"+h[2]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-next'></span></td>"),g+="<td id='"+h[3]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-end'></span></td>"):""!==e&&(g+=e);"ltr"===k&&(g+=f);g+="</tr></tbody></table>";!0===
b.p.viewrecords&&a("td#"+c+"_"+b.p.recordpos,"#"+l).append("<div dir='"+k+"' style='text-align:"+b.p.recordpos+"' class='ui-paging-info'></div>");a("td#"+c+"_"+b.p.pagerpos,"#"+l).append(g);f=a(".ui-jqgrid").css("font-size")||"11px";a(document.body).append("<div id='testpg' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+f+";visibility:hidden;' ></div>");g=a(g).clone().appendTo("#testpg").width();a("#testpg").remove();0<g&&(""!==e&&(g+=50),a("td#"+c+"_"+b.p.pagerpos,"#"+l).width(g));
b.p._nvtd=[];b.p._nvtd[0]=g?Math.floor((b.p.width-g)/2):Math.floor(b.p.width/3);b.p._nvtd[1]=0;g=null;a(".ui-pg-selbox","#"+l).bind("change",function(){if(!p("records"))return!1;b.p.page=Math.round(b.p.rowNum*(b.p.page-1)/this.value-0.5)+1;b.p.rowNum=this.value;b.p.pager&&a(".ui-pg-selbox",b.p.pager).val(this.value);b.p.toppager&&a(".ui-pg-selbox",b.p.toppager).val(this.value);B();return!1});!0===b.p.pgbuttons&&(a(".ui-pg-button","#"+l).hover(function(){a(this).hasClass("ui-state-disabled")?this.style.cursor=
"default":(a(this).addClass("ui-state-hover"),this.style.cursor="pointer")},function(){a(this).hasClass("ui-state-disabled")||(a(this).removeClass("ui-state-hover"),this.style.cursor="default")}),a("#first"+a.jgrid.jqID(d)+", #prev"+a.jgrid.jqID(d)+", #next"+a.jgrid.jqID(d)+", #last"+a.jgrid.jqID(d)).click(function(){var a=r(b.p.page,1),c=r(b.p.lastpage,1),e=!1,g=!0,f=!0,k=!0,l=!0;0===c||1===c?l=k=f=g=!1:1<c&&1<=a?1===a?f=g=!1:a===c&&(l=k=!1):1<c&&0===a&&(l=k=!1,a=c-1);if(!p(this.id))return!1;this.id===
"first"+d&&g&&(b.p.page=1,e=!0);this.id==="prev"+d&&f&&(b.p.page=a-1,e=!0);this.id==="next"+d&&k&&(b.p.page=a+1,e=!0);this.id==="last"+d&&l&&(b.p.page=c,e=!0);e&&B();return!1}));!0===b.p.pginput&&a("input.ui-pg-input","#"+l).keypress(function(c){if(13===(c.charCode||c.keyCode||0)){if(!p("user"))return!1;a(this).val(r(a(this).val(),1));b.p.page=0<a(this).val()?a(this).val():b.p.page;B();return!1}return this})},aa=function(c,d){var e,g="",f=b.p.colModel,k=!1,l;l=b.p.frozenColumns?d:b.grid.headers[c].el;
var h="";a("span.ui-grid-ico-sort",l).addClass("ui-state-disabled");a(l).attr("aria-selected","false");if(f[c].lso)if("asc"===f[c].lso)f[c].lso+="-desc",h="desc";else if("desc"===f[c].lso)f[c].lso+="-asc",h="asc";else{if("asc-desc"===f[c].lso||"desc-asc"===f[c].lso)f[c].lso=""}else f[c].lso=h=f[c].firstsortorder||"asc";h?(a("span.s-ico",l).show(),a("span.ui-icon-"+h,l).removeClass("ui-state-disabled"),a(l).attr("aria-selected","true")):b.p.viewsortcols[0]||a("span.s-ico",l).hide();b.p.sortorder="";
a.each(f,function(a){this.lso&&(0<a&&k&&(g+=", "),e=this.lso.split("-"),g+=f[a].index||f[a].name,g+=" "+e[e.length-1],k=!0,b.p.sortorder=e[e.length-1])});l=g.lastIndexOf(b.p.sortorder);g=g.substring(0,l);b.p.sortname=g},Z=function(c,d,e,g,f){if(b.p.colModel[d].sortable&&!(0<b.p.savedRow.length)){e||(b.p.lastsort===d?"asc"===b.p.sortorder?b.p.sortorder="desc":"desc"===b.p.sortorder&&(b.p.sortorder="asc"):b.p.sortorder=b.p.colModel[d].firstsortorder||"asc",b.p.page=1);if(b.p.multiSort)aa(d,f);else{if(g){if(b.p.lastsort===
d&&b.p.sortorder===g&&!e)return;b.p.sortorder=g}e=b.grid.headers[b.p.lastsort].el;f=b.p.frozenColumns?f:b.grid.headers[d].el;a("span.ui-grid-ico-sort",e).addClass("ui-state-disabled");a(e).attr("aria-selected","false");b.p.frozenColumns&&(b.grid.fhDiv.find("span.ui-grid-ico-sort").addClass("ui-state-disabled"),b.grid.fhDiv.find("th").attr("aria-selected","false"));a("span.ui-icon-"+b.p.sortorder,f).removeClass("ui-state-disabled");a(f).attr("aria-selected","true");b.p.viewsortcols[0]||b.p.lastsort===
d||(b.p.frozenColumns&&b.grid.fhDiv.find("span.s-ico").hide(),a("span.s-ico",e).hide(),a("span.s-ico",f).show());c=c.substring(5+b.p.id.length+1);b.p.sortname=b.p.colModel[d].index||c}"stop"===a(b).triggerHandler("jqGridSortCol",[b.p.sortname,d,b.p.sortorder])?b.p.lastsort=d:a.isFunction(b.p.onSortCol)&&"stop"===b.p.onSortCol.call(b,b.p.sortname,d,b.p.sortorder)?b.p.lastsort=d:("local"===b.p.datatype?b.p.deselectAfterSort&&a(b).jqGrid("resetSelection"):(b.p.selrow=null,b.p.multiselect&&U(!1),b.p.selarrrow=
[],b.p.savedRow=[]),b.p.scroll&&(f=b.grid.bDiv.scrollLeft,C.call(b,!0,!1),b.grid.hDiv.scrollLeft=f),b.p.subGrid&&"local"===b.p.datatype&&a("td.sgexpanded","#"+a.jgrid.jqID(b.p.id)).each(function(){a(this).trigger("click")}),B(),b.p.lastsort=d,b.p.sortname!==c&&d&&(b.p.lastsort=d))}},ea=function(c){c=a(b.grid.headers[c].el);c=[c.position().left+c.outerWidth()];"rtl"===b.p.direction&&(c[0]=b.p.width-c[0]);c[0]-=b.grid.bDiv.scrollLeft;c.push(a(b.grid.hDiv).position().top);c.push(a(b.grid.bDiv).offset().top-
a(b.grid.hDiv).offset().top+a(b.grid.bDiv).height());return c},ca=function(c){var d,e=b.grid.headers,g=a.jgrid.getCellIndex(c);for(d=0;d<e.length;d++)if(c===e[d].el){g=d;break}return g};this.p.id=this.id;-1===a.inArray(b.p.multikey,["shiftKey","altKey","ctrlKey"])&&(b.p.multikey=!1);b.p.keyIndex=!1;b.p.keyName=!1;for(f=0;f<b.p.colModel.length;f++)b.p.colModel[f]=a.extend(!0,{},b.p.cmTemplate,b.p.colModel[f].template||{},b.p.colModel[f]),!1===b.p.keyIndex&&!0===b.p.colModel[f].key&&(b.p.keyIndex=f);
b.p.sortorder=b.p.sortorder.toLowerCase();a.jgrid.cell_width=a.jgrid.cellWidth();!0===b.p.grouping&&(b.p.scroll=!1,b.p.rownumbers=!1,b.p.treeGrid=!1,b.p.gridview=!0);if(!0===this.p.treeGrid){try{a(this).jqGrid("setTreeGrid")}catch(ga){}"local"!==b.p.datatype&&(b.p.localReader={id:"_id_"})}if(this.p.subGrid)try{a(b).jqGrid("setSubGrid")}catch(ha){}this.p.multiselect&&(this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox'/>"),this.p.colModel.unshift({name:"cb",
width:a.jgrid.cell_width?b.p.multiselectWidth+b.p.cellLayout:b.p.multiselectWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0}));this.p.rownumbers&&(this.p.colNames.unshift(""),this.p.colModel.unshift({name:"rn",width:b.p.rownumWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0}));b.p.xmlReader=a.extend(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",
row:"row",repeatitems:!0,cell:"cell"}},b.p.xmlReader);b.p.jsonReader=a.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},b.p.jsonReader);b.p.localReader=a.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},b.p.localReader);b.p.scroll&&(b.p.pgbuttons=!1,b.p.pginput=
!1,b.p.rowList=[]);b.p.data.length&&z();var A="<thead><tr class='ui-jqgrid-labels' role='rowheader'>",L,J,O,V,Q,E,M,F,fa=F="",I=[],ka=[];J=[];if(!0===b.p.shrinkToFit&&!0===b.p.forceFit)for(f=b.p.colModel.length-1;0<=f;f--)if(!b.p.colModel[f].hidden){b.p.colModel[f].resizable=!1;break}"horizontal"===b.p.viewsortcols[1]&&(F=" ui-i-asc",fa=" ui-i-desc");L=n?"class='ui-th-div-ie'":"";F="<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc"+F+" ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-"+
k+"'></span>"+("<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+fa+" ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-"+k+"'></span></span>");if(b.p.multiSort)for(I=b.p.sortname.split(","),f=0;f<I.length;f++)J=a.trim(I[f]).split(" "),I[f]=a.trim(J[0]),ka[f]=J[1]?a.trim(J[1]):b.p.sortorder||"asc";for(f=0;f<this.p.colNames.length;f++)J=b.p.headertitles?' title="'+a.jgrid.stripHtml(b.p.colNames[f])+'"':"",A+="<th id='"+b.p.id+"_"+b.p.colModel[f].name+"' role='columnheader' class='ui-state-default ui-th-column ui-th-"+
k+"'"+J+">",J=b.p.colModel[f].index||b.p.colModel[f].name,A+="<div id='jqgh_"+b.p.id+"_"+b.p.colModel[f].name+"' "+L+">"+b.p.colNames[f],b.p.colModel[f].width=b.p.colModel[f].width?parseInt(b.p.colModel[f].width,10):150,"boolean"!==typeof b.p.colModel[f].title&&(b.p.colModel[f].title=!0),b.p.colModel[f].lso="",J===b.p.sortname&&(b.p.lastsort=f),b.p.multiSort&&(J=a.inArray(J,I),-1!==J&&(b.p.colModel[f].lso=ka[J])),A+=F+"</div></th>";A+="</tr></thead>";F=null;a(this).append(A);a("thead tr:first th",
this).hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});if(this.p.multiselect){var X=[],da;a("#cb_"+a.jgrid.jqID(b.p.id),this).bind("click",function(){b.p.selarrrow=[];var c=!0===b.p.frozenColumns?b.p.id+"_frozen":"";this.checked?(a(b.rows).each(function(d){0<d&&!a(this).hasClass("ui-subgrid")&&!a(this).hasClass("jqgroup")&&!a(this).hasClass("ui-state-disabled")&&(a("#jqg_"+a.jgrid.jqID(b.p.id)+"_"+a.jgrid.jqID(this.id))[b.p.useProp?"prop":"attr"]("checked",
!0),a(this).addClass("ui-state-highlight").attr("aria-selected","true"),b.p.selarrrow.push(this.id),b.p.selrow=this.id,c&&(a("#jqg_"+a.jgrid.jqID(b.p.id)+"_"+a.jgrid.jqID(this.id),b.grid.fbDiv)[b.p.useProp?"prop":"attr"]("checked",!0),a("#"+a.jgrid.jqID(this.id),b.grid.fbDiv).addClass("ui-state-highlight")))}),da=!0,X=[]):(a(b.rows).each(function(d){0<d&&!a(this).hasClass("ui-subgrid")&&!a(this).hasClass("ui-state-disabled")&&(a("#jqg_"+a.jgrid.jqID(b.p.id)+"_"+a.jgrid.jqID(this.id))[b.p.useProp?
"prop":"attr"]("checked",!1),a(this).removeClass("ui-state-highlight").attr("aria-selected","false"),X.push(this.id),c&&(a("#jqg_"+a.jgrid.jqID(b.p.id)+"_"+a.jgrid.jqID(this.id),b.grid.fbDiv)[b.p.useProp?"prop":"attr"]("checked",!1),a("#"+a.jgrid.jqID(this.id),b.grid.fbDiv).removeClass("ui-state-highlight")))}),b.p.selrow=null,da=!1);a(b).triggerHandler("jqGridSelectAll",[da?b.p.selarrrow:X,da]);a.isFunction(b.p.onSelectAll)&&b.p.onSelectAll.call(b,da?b.p.selarrrow:X,da)})}!0===b.p.autowidth&&(A=
a(p).innerWidth(),b.p.width=0<A?A:"nw");(function(){var c=0,e=a.jgrid.cell_width?0:r(b.p.cellLayout,0),g=0,f,k=r(b.p.scrollOffset,0),l,m=!1,n,p=0,q;a.each(b.p.colModel,function(){void 0===this.hidden&&(this.hidden=!1);if(b.p.grouping&&b.p.autowidth){var d=a.inArray(this.name,b.p.groupingView.groupField);0<=d&&b.p.groupingView.groupColumnShow.length>d&&(this.hidden=!b.p.groupingView.groupColumnShow[d])}this.widthOrg=l=r(this.width,0);!1===this.hidden&&(c+=l+e,this.fixed?p+=l+e:g++)});isNaN(b.p.width)&&
(b.p.width=c+(!1!==b.p.shrinkToFit||isNaN(b.p.height)?0:k));d.width=b.p.width;b.p.tblwidth=c;!1===b.p.shrinkToFit&&!0===b.p.forceFit&&(b.p.forceFit=!1);!0===b.p.shrinkToFit&&0<g&&(n=d.width-e*g-p,isNaN(b.p.height)||(n-=k,m=!0),c=0,a.each(b.p.colModel,function(a){!1!==this.hidden||this.fixed||(this.width=l=Math.round(n*this.width/(b.p.tblwidth-e*g-p)),c+=l,f=a)}),q=0,m?d.width-p-(c+e*g)!==k&&(q=d.width-p-(c+e*g)-k):m||1===Math.abs(d.width-p-(c+e*g))||(q=d.width-p-(c+e*g)),b.p.colModel[f].width+=q,
b.p.tblwidth=c+q+e*g+p,b.p.tblwidth>b.p.width&&(b.p.colModel[f].width-=b.p.tblwidth-parseInt(b.p.width,10),b.p.tblwidth=b.p.width))})();a(p).css("width",d.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+b.p.id+"'>&#160;</div>");a(m).css("width",d.width+"px");var A=a("thead:first",b).get(0),R="";b.p.footerrow&&(R+="<table role='grid' style='width:"+b.p.tblwidth+"px' class='ui-jqgrid-ftable' cellspacing='0' cellpadding='0' border='0'><tbody><tr role='row' class='ui-widget-content footrow footrow-"+
k+"'>");var m=a("tr:first",A),$="<tr class='jqgfirstrow' role='row' style='height:auto'>";b.p.disableClick=!1;a("th",m).each(function(c){O=b.p.colModel[c].width;void 0===b.p.colModel[c].resizable&&(b.p.colModel[c].resizable=!0);b.p.colModel[c].resizable?(V=document.createElement("span"),a(V).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+k).css("cursor","col-resize"),a(this).addClass(b.p.resizeclass)):V="";a(this).css("width",O+"px").prepend(V);V=null;var e="";b.p.colModel[c].hidden&&
(a(this).css("display","none"),e="display:none;");$+="<td role='gridcell' style='height:0px;width:"+O+"px;"+e+"'></td>";d.headers[c]={width:O,el:this};Q=b.p.colModel[c].sortable;"boolean"!==typeof Q&&(Q=b.p.colModel[c].sortable=!0);e=b.p.colModel[c].name;"cb"!==e&&"subgrid"!==e&&"rn"!==e&&b.p.viewsortcols[2]&&a(">div",this).addClass("ui-jqgrid-sortable");Q&&(b.p.multiSort?b.p.viewsortcols[0]?(a("div span.s-ico",this).show(),b.p.colModel[c].lso&&a("div span.ui-icon-"+b.p.colModel[c].lso,this).removeClass("ui-state-disabled")):
b.p.colModel[c].lso&&(a("div span.s-ico",this).show(),a("div span.ui-icon-"+b.p.colModel[c].lso,this).removeClass("ui-state-disabled")):b.p.viewsortcols[0]?(a("div span.s-ico",this).show(),c===b.p.lastsort&&a("div span.ui-icon-"+b.p.sortorder,this).removeClass("ui-state-disabled")):c===b.p.lastsort&&(a("div span.s-ico",this).show(),a("div span.ui-icon-"+b.p.sortorder,this).removeClass("ui-state-disabled")));b.p.footerrow&&(R+="<td role='gridcell' "+q(c,0,"",null,"",!1)+">&#160;</td>")}).mousedown(function(c){if(1===
a(c.target).closest("th>span.ui-jqgrid-resize").length){var e=ca(this);if(!0===b.p.forceFit){var g=b.p,f=e,k;for(k=e+1;k<b.p.colModel.length;k++)if(!0!==b.p.colModel[k].hidden){f=k;break}g.nv=f-e}d.dragStart(e,c,ea(e));return!1}}).click(function(c){if(b.p.disableClick)return b.p.disableClick=!1;var d="th>div.ui-jqgrid-sortable",e,g;b.p.viewsortcols[2]||(d="th>div>span>span.ui-grid-ico-sort");c=a(c.target).closest(d);if(1===c.length){var f;if(b.p.frozenColumns){var k=a(this)[0].id.substring(b.p.id.length+
1);a(b.p.colModel).each(function(a){if(this.name===k)return f=a,!1})}else f=ca(this);b.p.viewsortcols[2]||(e=!0,g=c.attr("sort"));null!=f&&Z(a("div",this)[0].id,f,e,g,this);return!1}});if(b.p.sortable&&a.fn.sortable)try{a(b).jqGrid("sortableColumns",m)}catch(ma){}b.p.footerrow&&(R+="</tr></tbody></table>");$+="</tr>";m=document.createElement("tbody");this.appendChild(m);a(this).addClass("ui-jqgrid-btable").append($);var $=null,m=a("<table class='ui-jqgrid-htable' style='width:"+b.p.tblwidth+"px' role='grid' aria-labelledby='gbox_"+
this.id+"' cellspacing='0' cellpadding='0' border='0'></table>").append(A),W=b.p.caption&&!0===b.p.hiddengrid?!0:!1;f=a("<div class='ui-jqgrid-hbox"+("rtl"===k?"-rtl":"")+"'></div>");A=null;d.hDiv=document.createElement("div");a(d.hDiv).css({width:d.width+"px"}).addClass("ui-state-default ui-jqgrid-hdiv").append(f);a(f).append(m);m=null;W&&a(d.hDiv).hide();b.p.pager&&("string"===typeof b.p.pager?"#"!==b.p.pager.substr(0,1)&&(b.p.pager="#"+b.p.pager):b.p.pager="#"+a(b.p.pager).attr("id"),a(b.p.pager).css({width:d.width+
"px"}).addClass("ui-state-default ui-jqgrid-pager ui-corner-bottom").appendTo(p),W&&a(b.p.pager).hide(),ba(b.p.pager,""));!1===b.p.cellEdit&&!0===b.p.hoverrows&&a(b).bind("mouseover",function(b){M=a(b.target).closest("tr.jqgrow");"ui-subgrid"!==a(M).attr("class")&&a(M).addClass("ui-state-hover")}).bind("mouseout",function(b){M=a(b.target).closest("tr.jqgrow");a(M).removeClass("ui-state-hover")});var N,Y,ia;a(b).before(d.hDiv).click(function(c){E=c.target;M=a(E,b.rows).closest("tr.jqgrow");if(0===
a(M).length||-1<M[0].className.indexOf("ui-state-disabled")||(a(E,b).closest("table.ui-jqgrid-btable").attr("id")||"").replace("_frozen","")!==b.id)return this;var d=a(E).hasClass("cbox"),e=a(b).triggerHandler("jqGridBeforeSelectRow",[M[0].id,c]);(e=!1===e||"stop"===e?!1:!0)&&a.isFunction(b.p.beforeSelectRow)&&(e=b.p.beforeSelectRow.call(b,M[0].id,c));if("A"!==E.tagName&&("INPUT"!==E.tagName&&"TEXTAREA"!==E.tagName&&"OPTION"!==E.tagName&&"SELECT"!==E.tagName||d)&&!0===e)if(N=M[0].id,Y=a.jgrid.getCellIndex(E),
ia=a(E).closest("td,th").html(),a(b).triggerHandler("jqGridCellSelect",[N,Y,ia,c]),a.isFunction(b.p.onCellSelect)&&b.p.onCellSelect.call(b,N,Y,ia,c),!0===b.p.cellEdit)if(b.p.multiselect&&d)a(b).jqGrid("setSelection",N,!0,c);else{N=M[0].rowIndex;try{a(b).jqGrid("editCell",N,Y,!0)}catch(g){}}else if(b.p.multikey)c[b.p.multikey]?a(b).jqGrid("setSelection",N,!0,c):b.p.multiselect&&d&&(d=a("#jqg_"+a.jgrid.jqID(b.p.id)+"_"+N).is(":checked"),a("#jqg_"+a.jgrid.jqID(b.p.id)+"_"+N)[b.p.useProp?"prop":"attr"]("checked",
d));else{if(b.p.multiselect&&b.p.multiboxonly&&!d){var f=b.p.frozenColumns?b.p.id+"_frozen":"";a(b.p.selarrrow).each(function(c,d){var e=b.rows.namedItem(d);a(e).removeClass("ui-state-highlight");a("#jqg_"+a.jgrid.jqID(b.p.id)+"_"+a.jgrid.jqID(d))[b.p.useProp?"prop":"attr"]("checked",!1);f&&(a("#"+a.jgrid.jqID(d),"#"+a.jgrid.jqID(f)).removeClass("ui-state-highlight"),a("#jqg_"+a.jgrid.jqID(b.p.id)+"_"+a.jgrid.jqID(d),"#"+a.jgrid.jqID(f))[b.p.useProp?"prop":"attr"]("checked",!1))});b.p.selarrrow=[]}a(b).jqGrid("setSelection",
N,!0,c)}}).bind("reloadGrid",function(c,d){!0===b.p.treeGrid&&(b.p.datatype=b.p.treedatatype);d&&d.current&&b.grid.selectionPreserver(b);"local"===b.p.datatype?(a(b).jqGrid("resetSelection"),b.p.data.length&&z()):b.p.treeGrid||(b.p.selrow=null,b.p.multiselect&&(b.p.selarrrow=[],U(!1)),b.p.savedRow=[]);b.p.scroll&&C.call(b,!0,!1);if(d&&d.page){var e=d.page;e>b.p.lastpage&&(e=b.p.lastpage);1>e&&(e=1);b.p.page=e;b.grid.bDiv.scrollTop=b.grid.prevRowHeight?(e-1)*b.grid.prevRowHeight*b.p.rowNum:0}b.grid.prevRowHeight&&
b.p.scroll?(delete b.p.lastpage,b.grid.populateVisible()):b.grid.populate();!0===b.p._inlinenav&&a(b).jqGrid("showAddEditButtons");return!1}).dblclick(function(c){E=c.target;M=a(E,b.rows).closest("tr.jqgrow");0!==a(M).length&&(N=M[0].rowIndex,Y=a.jgrid.getCellIndex(E),a(b).triggerHandler("jqGridDblClickRow",[a(M).attr("id"),N,Y,c]),a.isFunction(b.p.ondblClickRow)&&b.p.ondblClickRow.call(b,a(M).attr("id"),N,Y,c))}).bind("contextmenu",function(c){E=c.target;M=a(E,b.rows).closest("tr.jqgrow");0!==a(M).length&&
(b.p.multiselect||a(b).jqGrid("setSelection",M[0].id,!0,c),N=M[0].rowIndex,Y=a.jgrid.getCellIndex(E),a(b).triggerHandler("jqGridRightClickRow",[a(M).attr("id"),N,Y,c]),a.isFunction(b.p.onRightClickRow)&&b.p.onRightClickRow.call(b,a(M).attr("id"),N,Y,c))});d.bDiv=document.createElement("div");n&&"auto"===String(b.p.height).toLowerCase()&&(b.p.height="100%");a(d.bDiv).append(a('<div style="position:relative;'+(n&&8>a.jgrid.msiever()?"height:0.01%;":"")+'"></div>').append("<div></div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:b.p.height+
(isNaN(b.p.height)?"":"px"),width:d.width+"px"}).scroll(d.scrollGrid);a("table:first",d.bDiv).css({width:b.p.tblwidth+"px"});a.support.tbody||2===a("tbody",this).length&&a("tbody:gt(0)",this).remove();b.p.multikey&&(a.jgrid.msie?a(d.bDiv).bind("selectstart",function(){return!1}):a(d.bDiv).bind("mousedown",function(){return!1}));W&&a(d.bDiv).hide();d.cDiv=document.createElement("div");var ja=!0===b.p.hidegrid?a("<a role='link' class='ui-jqgrid-titlebar-close HeaderButton' />").hover(function(){ja.addClass("ui-state-hover")},
function(){ja.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-circle-triangle-n'></span>").css("rtl"===k?"left":"right","0px"):"";a(d.cDiv).append(ja).append("<span class='ui-jqgrid-title"+("rtl"===k?"-rtl":"")+"'>"+b.p.caption+"</span>").addClass("ui-jqgrid-titlebar ui-widget-header ui-corner-top ui-helper-clearfix");a(d.cDiv).insertBefore(d.hDiv);b.p.toolbar[0]&&(d.uDiv=document.createElement("div"),"top"===b.p.toolbar[1]?a(d.uDiv).insertBefore(d.hDiv):"bottom"===b.p.toolbar[1]&&
a(d.uDiv).insertAfter(d.hDiv),"both"===b.p.toolbar[1]?(d.ubDiv=document.createElement("div"),a(d.uDiv).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id).insertBefore(d.hDiv),a(d.ubDiv).addClass("ui-userdata ui-state-default").attr("id","tb_"+this.id).insertAfter(d.hDiv),W&&a(d.ubDiv).hide()):a(d.uDiv).width(d.width).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id),W&&a(d.uDiv).hide());b.p.toppager&&(b.p.toppager=a.jgrid.jqID(b.p.id)+"_toppager",d.topDiv=a("<div id='"+
b.p.toppager+"'></div>")[0],b.p.toppager="#"+b.p.toppager,a(d.topDiv).addClass("ui-state-default ui-jqgrid-toppager").width(d.width).insertBefore(d.hDiv),ba(b.p.toppager,"_t"));b.p.footerrow&&(d.sDiv=a("<div class='ui-jqgrid-sdiv'></div>")[0],f=a("<div class='ui-jqgrid-hbox"+("rtl"===k?"-rtl":"")+"'></div>"),a(d.sDiv).append(f).width(d.width).insertAfter(d.hDiv),a(f).append(R),d.footers=a(".ui-jqgrid-ftable",d.sDiv)[0].rows[0].cells,b.p.rownumbers&&(d.footers[0].className="ui-state-default jqgrid-rownum"),
W&&a(d.sDiv).hide());f=null;if(b.p.caption){var la=b.p.datatype;!0===b.p.hidegrid&&(a(".ui-jqgrid-titlebar-close",d.cDiv).click(function(c){var e=a.isFunction(b.p.onHeaderClick),g=".ui-jqgrid-bdiv, .ui-jqgrid-hdiv, .ui-jqgrid-pager, .ui-jqgrid-sdiv",f,k=this;!0===b.p.toolbar[0]&&("both"===b.p.toolbar[1]&&(g+=", #"+a(d.ubDiv).attr("id")),g+=", #"+a(d.uDiv).attr("id"));f=a(g,"#gview_"+a.jgrid.jqID(b.p.id)).length;"visible"===b.p.gridstate?a(g,"#gbox_"+a.jgrid.jqID(b.p.id)).slideUp("fast",function(){f--;
0===f&&(a("span",k).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),b.p.gridstate="hidden",a("#gbox_"+a.jgrid.jqID(b.p.id)).hasClass("ui-resizable")&&a(".ui-resizable-handle","#gbox_"+a.jgrid.jqID(b.p.id)).hide(),a(b).triggerHandler("jqGridHeaderClick",[b.p.gridstate,c]),e&&(W||b.p.onHeaderClick.call(b,b.p.gridstate,c)))}):"hidden"===b.p.gridstate&&a(g,"#gbox_"+a.jgrid.jqID(b.p.id)).slideDown("fast",function(){f--;0===f&&(a("span",k).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),
W&&(b.p.datatype=la,B(),W=!1),b.p.gridstate="visible",a("#gbox_"+a.jgrid.jqID(b.p.id)).hasClass("ui-resizable")&&a(".ui-resizable-handle","#gbox_"+a.jgrid.jqID(b.p.id)).show(),a(b).triggerHandler("jqGridHeaderClick",[b.p.gridstate,c]),e&&(W||b.p.onHeaderClick.call(b,b.p.gridstate,c)))});return!1}),W&&(b.p.datatype="local",a(".ui-jqgrid-titlebar-close",d.cDiv).trigger("click")))}else a(d.cDiv).hide();a(d.hDiv).after(d.bDiv).mousemove(function(a){if(d.resizing)return d.dragMove(a),!1});a(".ui-jqgrid-labels",
d.hDiv).bind("selectstart",function(){return!1});a(document).bind("mouseup.jqGrid"+b.p.id,function(){return d.resizing?(d.dragEnd(),!1):!0});b.formatCol=q;b.sortData=Z;b.updatepager=function(c,d){var e,g,f,k,l,h,m,n="",p=b.p.pager?"_"+a.jgrid.jqID(b.p.pager.substr(1)):"",q=b.p.toppager?"_"+b.p.toppager.substr(1):"";f=parseInt(b.p.page,10)-1;0>f&&(f=0);f*=parseInt(b.p.rowNum,10);l=f+b.p.reccount;if(b.p.scroll){e=a("tbody:first > tr:gt(0)",b.grid.bDiv);f=l-e.length;b.p.reccount=e.length;if(e=e.outerHeight()||
b.grid.prevRowHeight)g=f*e,m=parseInt(b.p.records,10)*e,a(">div:first",b.grid.bDiv).css({height:m}).children("div:first").css({height:g,display:g?"":"none"}),0==b.grid.bDiv.scrollTop&&1<b.p.page&&(b.grid.bDiv.scrollTop=b.p.rowNum*(b.p.page-1)*e);b.grid.bDiv.scrollLeft=b.grid.hDiv.scrollLeft}n=b.p.pager||"";if(n+=b.p.toppager?n?","+b.p.toppager:b.p.toppager:"")m=a.jgrid.formatter.integer||{},e=r(b.p.page),g=r(b.p.lastpage),a(".selbox",n)[this.p.useProp?"prop":"attr"]("disabled",!1),!0===b.p.pginput&&
(a(".ui-pg-input",n).val(b.p.page),k=b.p.toppager?"#sp_1"+p+",#sp_1"+q:"#sp_1"+p,a(k).html(a.fmatter?a.fmatter.util.NumberFormat(b.p.lastpage,m):b.p.lastpage)),b.p.viewrecords&&(0===b.p.reccount?a(".ui-paging-info",n).html(b.p.emptyrecords):(k=f+1,h=b.p.records,a.fmatter&&(k=a.fmatter.util.NumberFormat(k,m),l=a.fmatter.util.NumberFormat(l,m),h=a.fmatter.util.NumberFormat(h,m)),a(".ui-paging-info",n).html(a.jgrid.format(b.p.recordtext,k,l,h)))),!0===b.p.pgbuttons&&(0>=e&&(e=g=0),1===e||0===e?(a("#first"+
p+", #prev"+p).addClass("ui-state-disabled").removeClass("ui-state-hover"),b.p.toppager&&a("#first_t"+q+", #prev_t"+q).addClass("ui-state-disabled").removeClass("ui-state-hover")):(a("#first"+p+", #prev"+p).removeClass("ui-state-disabled"),b.p.toppager&&a("#first_t"+q+", #prev_t"+q).removeClass("ui-state-disabled")),e===g||0===e?(a("#next"+p+", #last"+p).addClass("ui-state-disabled").removeClass("ui-state-hover"),b.p.toppager&&a("#next_t"+q+", #last_t"+q).addClass("ui-state-disabled").removeClass("ui-state-hover")):
(a("#next"+p+", #last"+p).removeClass("ui-state-disabled"),b.p.toppager&&a("#next_t"+q+", #last_t"+q).removeClass("ui-state-disabled")));!0===c&&!0===b.p.rownumbers&&a(">td.jqgrid-rownum",b.rows).each(function(b){a(this).html(f+1+b)});d&&b.p.jqgdnd&&a(b).jqGrid("gridDnD","updateDnD");a(b).triggerHandler("jqGridGridComplete");a.isFunction(b.p.gridComplete)&&b.p.gridComplete.call(b);a(b).triggerHandler("jqGridAfterGridComplete")};b.refreshIndex=z;b.setHeadCheckBox=U;b.constructTr=S;b.formatter=function(a,
b,c,d,e){return t(a,b,c,d,e)};a.extend(d,{populate:B,emptyRows:C,beginReq:u,endReq:P});this.grid=d;b.addXmlData=function(a){y(a,b.grid.bDiv)};b.addJSONData=function(a){H(a,b.grid.bDiv)};this.grid.cols=this.rows[0].cells;a(b).triggerHandler("jqGridInitGrid");a.isFunction(b.p.onInitGrid)&&b.p.onInitGrid.call(b);B();b.p.hiddengrid=!1}}}})};a.jgrid.extend({getGridParam:function(a){var d=this[0];if(d&&d.grid)return a?void 0!==d.p[a]?d.p[a]:null:d.p},setGridParam:function(e){return this.each(function(){this.grid&&
"object"===typeof e&&a.extend(!0,this.p,e)})},getDataIDs:function(){var e=[],d=0,c,g=0;this.each(function(){if((c=this.rows.length)&&0<c)for(;d<c;)a(this.rows[d]).hasClass("jqgrow")&&(e[g]=this.rows[d].id,g++),d++});return e},setSelection:function(e,d,c){return this.each(function(){var g,b,h,f,k,m;void 0!==e&&(d=!1===d?!1:!0,!(b=this.rows.namedItem(String(e)))||!b.className||-1<b.className.indexOf("ui-state-disabled")||(!0===this.p.scrollrows&&(h=this.rows.namedItem(e).rowIndex,0<=h&&(g=a(this.grid.bDiv)[0].clientHeight,
f=a(this.grid.bDiv)[0].scrollTop,k=a(this.rows[h]).position().top,h=this.rows[h].clientHeight,k+h>=g+f?a(this.grid.bDiv)[0].scrollTop=k-(g+f)+h+f:k<g+f&&k<f&&(a(this.grid.bDiv)[0].scrollTop=k))),!0===this.p.frozenColumns&&(m=this.p.id+"_frozen"),this.p.multiselect?(this.setHeadCheckBox(!1),this.p.selrow=b.id,f=a.inArray(this.p.selrow,this.p.selarrrow),-1===f?("ui-subgrid"!==b.className&&a(b).addClass("ui-state-highlight").attr("aria-selected","true"),g=!0,this.p.selarrrow.push(this.p.selrow)):("ui-subgrid"!==
b.className&&a(b).removeClass("ui-state-highlight").attr("aria-selected","false"),g=!1,this.p.selarrrow.splice(f,1),k=this.p.selarrrow[0],this.p.selrow=void 0===k?null:k),a("#jqg_"+a.jgrid.jqID(this.p.id)+"_"+a.jgrid.jqID(b.id))[this.p.useProp?"prop":"attr"]("checked",g),m&&(-1===f?a("#"+a.jgrid.jqID(e),"#"+a.jgrid.jqID(m)).addClass("ui-state-highlight"):a("#"+a.jgrid.jqID(e),"#"+a.jgrid.jqID(m)).removeClass("ui-state-highlight"),a("#jqg_"+a.jgrid.jqID(this.p.id)+"_"+a.jgrid.jqID(e),"#"+a.jgrid.jqID(m))[this.p.useProp?
"prop":"attr"]("checked",g)),d&&(a(this).triggerHandler("jqGridSelectRow",[b.id,g,c]),this.p.onSelectRow&&this.p.onSelectRow.call(this,b.id,g,c))):"ui-subgrid"!==b.className&&(this.p.selrow!==b.id?(a(this.rows.namedItem(this.p.selrow)).removeClass("ui-state-highlight").attr({"aria-selected":"false",tabindex:"-1"}),a(b).addClass("ui-state-highlight").attr({"aria-selected":"true",tabindex:"0"}),m&&(a("#"+a.jgrid.jqID(this.p.selrow),"#"+a.jgrid.jqID(m)).removeClass("ui-state-highlight"),a("#"+a.jgrid.jqID(e),
"#"+a.jgrid.jqID(m)).addClass("ui-state-highlight")),g=!0):g=!1,this.p.selrow=b.id,d&&(a(this).triggerHandler("jqGridSelectRow",[b.id,g,c]),this.p.onSelectRow&&this.p.onSelectRow.call(this,b.id,g,c)))))})},resetSelection:function(e){return this.each(function(){var d=this,c,g,b;!0===d.p.frozenColumns&&(b=d.p.id+"_frozen");if(void 0!==e){g=e===d.p.selrow?d.p.selrow:e;a("#"+a.jgrid.jqID(d.p.id)+" tbody:first tr#"+a.jgrid.jqID(g)).removeClass("ui-state-highlight").attr("aria-selected","false");b&&a("#"+
a.jgrid.jqID(g),"#"+a.jgrid.jqID(b)).removeClass("ui-state-highlight");if(d.p.multiselect){a("#jqg_"+a.jgrid.jqID(d.p.id)+"_"+a.jgrid.jqID(g),"#"+a.jgrid.jqID(d.p.id))[d.p.useProp?"prop":"attr"]("checked",!1);if(b)a("#jqg_"+a.jgrid.jqID(d.p.id)+"_"+a.jgrid.jqID(g),"#"+a.jgrid.jqID(b))[d.p.useProp?"prop":"attr"]("checked",!1);d.setHeadCheckBox(!1)}g=null}else d.p.multiselect?(a(d.p.selarrrow).each(function(e,g){c=d.rows.namedItem(g);a(c).removeClass("ui-state-highlight").attr("aria-selected","false");
a("#jqg_"+a.jgrid.jqID(d.p.id)+"_"+a.jgrid.jqID(g))[d.p.useProp?"prop":"attr"]("checked",!1);b&&(a("#"+a.jgrid.jqID(g),"#"+a.jgrid.jqID(b)).removeClass("ui-state-highlight"),a("#jqg_"+a.jgrid.jqID(d.p.id)+"_"+a.jgrid.jqID(g),"#"+a.jgrid.jqID(b))[d.p.useProp?"prop":"attr"]("checked",!1))}),d.setHeadCheckBox(!1),d.p.selarrrow=[]):d.p.selrow&&(a("#"+a.jgrid.jqID(d.p.id)+" tbody:first tr#"+a.jgrid.jqID(d.p.selrow)).removeClass("ui-state-highlight").attr("aria-selected","false"),b&&a("#"+a.jgrid.jqID(d.p.selrow),
"#"+a.jgrid.jqID(b)).removeClass("ui-state-highlight"),d.p.selrow=null);!0===d.p.cellEdit&&0<=parseInt(d.p.iCol,10)&&0<=parseInt(d.p.iRow,10)&&(a("td:eq("+d.p.iCol+")",d.rows[d.p.iRow]).removeClass("edit-cell ui-state-highlight"),a(d.rows[d.p.iRow]).removeClass("selected-row ui-state-hover"));d.p.savedRow=[]})},getRowData:function(e){var d={},c,g=!1,b,h=0;this.each(function(){var f=this,k,m;if(void 0===e)g=!0,c=[],b=f.rows.length;else{m=f.rows.namedItem(e);if(!m)return d;b=2}for(;h<b;)g&&(m=f.rows[h]),
a(m).hasClass("jqgrow")&&(a('td[role="gridcell"]',m).each(function(b){k=f.p.colModel[b].name;if("cb"!==k&&"subgrid"!==k&&"rn"!==k)if(!0===f.p.treeGrid&&k===f.p.ExpandColumn)d[k]=a.jgrid.htmlDecode(a("span:first",this).html());else try{d[k]=a.unformat.call(f,this,{rowId:m.id,colModel:f.p.colModel[b]},b)}catch(c){d[k]=a.jgrid.htmlDecode(a(this).html())}}),g&&(c.push(d),d={})),h++});return c||d},delRowData:function(e){var d=!1,c,g;this.each(function(){c=this.rows.namedItem(e);if(!c)return!1;a(c).remove();
this.p.records--;this.p.reccount--;this.updatepager(!0,!1);d=!0;this.p.multiselect&&(g=a.inArray(e,this.p.selarrrow),-1!==g&&this.p.selarrrow.splice(g,1));this.p.selrow=this.p.multiselect&&0<this.p.selarrrow.length?this.p.selarrrow[this.p.selarrrow.length-1]:null;if("local"===this.p.datatype){var b=a.jgrid.stripPref(this.p.idPrefix,e),b=this.p._index[b];void 0!==b&&(this.p.data.splice(b,1),this.refreshIndex())}if(!0===this.p.altRows&&d){var h=this.p.altclass;a(this.rows).each(function(b){1===b%2?
a(this).addClass(h):a(this).removeClass(h)})}});return d},setRowData:function(e,d,c){var g,b=!0,h;this.each(function(){if(!this.grid)return!1;var f=this,k,m,n=typeof c,p={};m=f.rows.namedItem(e);if(!m)return!1;if(d)try{if(a(this.p.colModel).each(function(b){g=this.name;var c=a.jgrid.getAccessor(d,g);void 0!==c&&(p[g]=this.formatter&&"string"===typeof this.formatter&&"date"===this.formatter?a.unformat.date.call(f,c,this):c,k=f.formatter(e,c,b,d,"edit"),h=this.title?{title:a.jgrid.stripHtml(k)}:{},
!0===f.p.treeGrid&&g===f.p.ExpandColumn?a("td[role='gridcell']:eq("+b+") > span:first",m).html(k).attr(h):a("td[role='gridcell']:eq("+b+")",m).html(k).attr(h))}),"local"===f.p.datatype){var r=a.jgrid.stripPref(f.p.idPrefix,e),q=f.p._index[r],l;if(f.p.treeGrid)for(l in f.p.treeReader)f.p.treeReader.hasOwnProperty(l)&&delete p[f.p.treeReader[l]];void 0!==q&&(f.p.data[q]=a.extend(!0,f.p.data[q],p));p=null}}catch(t){b=!1}b&&("string"===n?a(m).addClass(c):"object"===n&&a(m).css(c),a(f).triggerHandler("jqGridAfterGridComplete"))});
return b},addRowData:function(e,d,c,g){c||(c="last");var b=!1,h,f,k,m,n,p,r,q,l="",t,s,w,v,x,G;d&&(a.isArray(d)?(t=!0,c="last",s=e):(d=[d],t=!1),this.each(function(){var C=d.length;n=!0===this.p.rownumbers?1:0;k=!0===this.p.multiselect?1:0;m=!0===this.p.subGrid?1:0;t||(void 0!==e?e=String(e):(e=a.jgrid.randId(),!1!==this.p.keyIndex&&(s=this.p.colModel[this.p.keyIndex+k+m+n].name,void 0!==d[0][s]&&(e=d[0][s]))));w=this.p.altclass;for(var z=0,S="",y={},H=a.isFunction(this.p.afterInsertRow)?!0:!1;z<
C;){v=d[z];f=[];if(t){try{e=v[s],void 0===e&&(e=a.jgrid.randId())}catch(T){e=a.jgrid.randId()}S=!0===this.p.altRows?0===(this.rows.length-1)%2?w:"":""}G=e;e=this.p.idPrefix+e;n&&(l=this.formatCol(0,1,"",null,e,!0),f[f.length]='<td role="gridcell" class="ui-state-default jqgrid-rownum" '+l+">0</td>");k&&(q='<input role="checkbox" type="checkbox" id="jqg_'+this.p.id+"_"+e+'" class="cbox"/>',l=this.formatCol(n,1,"",null,e,!0),f[f.length]='<td role="gridcell" '+l+">"+q+"</td>");m&&(f[f.length]=a(this).jqGrid("addSubGridCell",
k+n,1));for(r=k+m+n;r<this.p.colModel.length;r++)x=this.p.colModel[r],h=x.name,y[h]=v[h],q=this.formatter(e,a.jgrid.getAccessor(v,h),r,v),l=this.formatCol(r,1,q,v,e,y),f[f.length]='<td role="gridcell" '+l+">"+q+"</td>";f.unshift(this.constructTr(e,!1,S,y,v,!1));f[f.length]="</tr>";if(0===this.rows.length)a("table:first",this.grid.bDiv).append(f.join(""));else switch(c){case "last":a(this.rows[this.rows.length-1]).after(f.join(""));p=this.rows.length-1;break;case "first":a(this.rows[0]).after(f.join(""));
p=1;break;case "after":(p=this.rows.namedItem(g))&&(a(this.rows[p.rowIndex+1]).hasClass("ui-subgrid")?a(this.rows[p.rowIndex+1]).after(f):a(p).after(f.join("")));p++;break;case "before":if(p=this.rows.namedItem(g))a(p).before(f.join("")),p=p.rowIndex;p--}!0===this.p.subGrid&&a(this).jqGrid("addSubGrid",k+n,p);this.p.records++;this.p.reccount++;a(this).triggerHandler("jqGridAfterInsertRow",[e,v,v]);H&&this.p.afterInsertRow.call(this,e,v,v);z++;"local"===this.p.datatype&&(y[this.p.localReader.id]=G,
this.p._index[G]=this.p.data.length,this.p.data.push(y),y={})}!0!==this.p.altRows||t||("last"===c?1===(this.rows.length-1)%2&&a(this.rows[this.rows.length-1]).addClass(w):a(this.rows).each(function(b){1===b%2?a(this).addClass(w):a(this).removeClass(w)}));this.updatepager(!0,!0);b=!0}));return b},footerData:function(e,d,c){function g(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}var b,h=!1,f={},k;void 0===e&&(e="get");"boolean"!==typeof c&&(c=!0);e=e.toLowerCase();this.each(function(){var m=
this,n;if(!m.grid||!m.p.footerrow||"set"===e&&g(d))return!1;h=!0;a(this.p.colModel).each(function(g){b=this.name;"set"===e?void 0!==d[b]&&(n=c?m.formatter("",d[b],g,d,"edit"):d[b],k=this.title?{title:a.jgrid.stripHtml(n)}:{},a("tr.footrow td:eq("+g+")",m.grid.sDiv).html(n).attr(k),h=!0):"get"===e&&(f[b]=a("tr.footrow td:eq("+g+")",m.grid.sDiv).html())})});return"get"===e?f:h},showHideCol:function(e,d){return this.each(function(){var c=this,g=!1,b=a.jgrid.cell_width?0:c.p.cellLayout,h;if(c.grid){"string"===
typeof e&&(e=[e]);d="none"!==d?"":"none";var f=""===d?!0:!1,k=c.p.groupHeader&&("object"===typeof c.p.groupHeader||a.isFunction(c.p.groupHeader));k&&a(c).jqGrid("destroyGroupHeader",!1);a(this.p.colModel).each(function(k){if(-1!==a.inArray(this.name,e)&&this.hidden===f){if(!0===c.p.frozenColumns&&!0===this.frozen)return!0;a("tr[role=rowheader]",c.grid.hDiv).each(function(){a(this.cells[k]).css("display",d)});a(c.rows).each(function(){a(this).hasClass("jqgroup")||a(this.cells[k]).css("display",d)});
c.p.footerrow&&a("tr.footrow td:eq("+k+")",c.grid.sDiv).css("display",d);h=parseInt(this.width,10);c.p.tblwidth="none"===d?c.p.tblwidth-(h+b):c.p.tblwidth+(h+b);this.hidden=!f;g=!0;a(c).triggerHandler("jqGridShowHideCol",[f,this.name,k])}});!0===g&&(!0!==c.p.shrinkToFit||isNaN(c.p.height)||(c.p.tblwidth+=parseInt(c.p.scrollOffset,10)),a(c).jqGrid("setGridWidth",!0===c.p.shrinkToFit?c.p.tblwidth:c.p.width));k&&a(c).jqGrid("setGroupHeaders",c.p.groupHeader)}})},hideCol:function(e){return this.each(function(){a(this).jqGrid("showHideCol",
e,"none")})},showCol:function(e){return this.each(function(){a(this).jqGrid("showHideCol",e,"")})},remapColumns:function(e,d,c){function g(b){var c;c=b.length?a.makeArray(b):a.extend({},b);a.each(e,function(a){b[a]=c[this]})}function b(b,c){a(">tr"+(c||""),b).each(function(){var b=this,c=a.makeArray(b.cells);a.each(e,function(){var a=c[this];a&&b.appendChild(a)})})}var h=this.get(0);g(h.p.colModel);g(h.p.colNames);g(h.grid.headers);b(a("thead:first",h.grid.hDiv),c&&":not(.ui-jqgrid-labels)");d&&b(a("#"+
a.jgrid.jqID(h.p.id)+" tbody:first"),".jqgfirstrow, tr.jqgrow, tr.jqfoot");h.p.footerrow&&b(a("tbody:first",h.grid.sDiv));h.p.remapColumns&&(h.p.remapColumns.length?g(h.p.remapColumns):h.p.remapColumns=a.makeArray(e));h.p.lastsort=a.inArray(h.p.lastsort,e);h.p.treeGrid&&(h.p.expColInd=a.inArray(h.p.expColInd,e));a(h).triggerHandler("jqGridRemapColumns",[e,d,c])},setGridWidth:function(e,d){return this.each(function(){if(this.grid){var c=this,g,b=0,h=a.jgrid.cell_width?0:c.p.cellLayout,f,k=0,m=!1,n=
c.p.scrollOffset,p,r=0,q;"boolean"!==typeof d&&(d=c.p.shrinkToFit);if(!isNaN(e)){e=parseInt(e,10);c.grid.width=c.p.width=e;a("#gbox_"+a.jgrid.jqID(c.p.id)).css("width",e+"px");a("#gview_"+a.jgrid.jqID(c.p.id)).css("width",e+"px");a(c.grid.bDiv).css("width",e+"px");a(c.grid.hDiv).css("width",e+"px");c.p.pager&&a(c.p.pager).css("width",e+"px");c.p.toppager&&a(c.p.toppager).css("width",e+"px");!0===c.p.toolbar[0]&&(a(c.grid.uDiv).css("width",e+"px"),"both"===c.p.toolbar[1]&&a(c.grid.ubDiv).css("width",
e+"px"));c.p.footerrow&&a(c.grid.sDiv).css("width",e+"px");!1===d&&!0===c.p.forceFit&&(c.p.forceFit=!1);if(!0===d){a.each(c.p.colModel,function(){!1===this.hidden&&(g=this.widthOrg,b+=g+h,this.fixed?r+=g+h:k++)});if(0===k)return;c.p.tblwidth=b;p=e-h*k-r;!isNaN(c.p.height)&&(a(c.grid.bDiv)[0].clientHeight<a(c.grid.bDiv)[0].scrollHeight||1===c.rows.length)&&(m=!0,p-=n);var b=0,l=0<c.grid.cols.length;a.each(c.p.colModel,function(a){!1!==this.hidden||this.fixed||(g=this.widthOrg,g=Math.round(p*g/(c.p.tblwidth-
h*k-r)),0>g||(this.width=g,b+=g,c.grid.headers[a].width=g,c.grid.headers[a].el.style.width=g+"px",c.p.footerrow&&(c.grid.footers[a].style.width=g+"px"),l&&(c.grid.cols[a].style.width=g+"px"),f=a))});if(!f)return;q=0;m?e-r-(b+h*k)!==n&&(q=e-r-(b+h*k)-n):1!==Math.abs(e-r-(b+h*k))&&(q=e-r-(b+h*k));c.p.colModel[f].width+=q;c.p.tblwidth=b+q+h*k+r;c.p.tblwidth>e?(m=c.p.tblwidth-parseInt(e,10),c.p.tblwidth=e,g=c.p.colModel[f].width-=m):g=c.p.colModel[f].width;c.grid.headers[f].width=g;c.grid.headers[f].el.style.width=
g+"px";l&&(c.grid.cols[f].style.width=g+"px");c.p.footerrow&&(c.grid.footers[f].style.width=g+"px")}c.p.tblwidth&&(a("table:first",c.grid.bDiv).css("width",c.p.tblwidth+"px"),a("table:first",c.grid.hDiv).css("width",c.p.tblwidth+"px"),c.grid.hDiv.scrollLeft=c.grid.bDiv.scrollLeft,c.p.footerrow&&a("table:first",c.grid.sDiv).css("width",c.p.tblwidth+"px"))}}})},setGridHeight:function(e){return this.each(function(){if(this.grid){var d=a(this.grid.bDiv);d.css({height:e+(isNaN(e)?"":"px")});!0===this.p.frozenColumns&&
a("#"+a.jgrid.jqID(this.p.id)+"_frozen").parent().height(d.height()-16);this.p.height=e;this.p.scroll&&this.grid.populateVisible()}})},setCaption:function(e){return this.each(function(){this.p.caption=e;a("span.ui-jqgrid-title, span.ui-jqgrid-title-rtl",this.grid.cDiv).html(e);a(this.grid.cDiv).show()})},setLabel:function(e,d,c,g){return this.each(function(){var b=-1;if(this.grid&&void 0!==e&&(a(this.p.colModel).each(function(a){if(this.name===e)return b=a,!1}),0<=b)){var h=a("tr.ui-jqgrid-labels th:eq("+
b+")",this.grid.hDiv);if(d){var f=a(".s-ico",h);a("[id^=jqgh_]",h).empty().html(d).append(f);this.p.colNames[b]=d}c&&("string"===typeof c?a(h).addClass(c):a(h).css(c));"object"===typeof g&&a(h).attr(g)}})},setCell:function(e,d,c,g,b,h){return this.each(function(){var f=-1,k,m;if(this.grid&&(isNaN(d)?a(this.p.colModel).each(function(a){if(this.name===d)return f=a,!1}):f=parseInt(d,10),0<=f&&(k=this.rows.namedItem(e)))){var n=a("td:eq("+f+")",k);if(""!==c||!0===h)k=this.formatter(e,c,f,k,"edit"),m=
this.p.colModel[f].title?{title:a.jgrid.stripHtml(k)}:{},this.p.treeGrid&&0<a(".tree-wrap",a(n)).length?a("span",a(n)).html(k).attr(m):a(n).html(k).attr(m),"local"===this.p.datatype&&(k=this.p.colModel[f],c=k.formatter&&"string"===typeof k.formatter&&"date"===k.formatter?a.unformat.date.call(this,c,k):c,m=this.p._index[a.jgrid.stripPref(this.p.idPrefix,e)],void 0!==m&&(this.p.data[m][k.name]=c));"string"===typeof g?a(n).addClass(g):g&&a(n).css(g);"object"===typeof b&&a(n).attr(b)}})},getCell:function(e,
d){var c=!1;this.each(function(){var g=-1;if(this.grid&&(isNaN(d)?a(this.p.colModel).each(function(a){if(this.name===d)return g=a,!1}):g=parseInt(d,10),0<=g)){var b=this.rows.namedItem(e);if(b)try{c=a.unformat.call(this,a("td:eq("+g+")",b),{rowId:b.id,colModel:this.p.colModel[g]},g)}catch(h){c=a.jgrid.htmlDecode(a("td:eq("+g+")",b).html())}}});return c},getCol:function(e,d,c){var g=[],b,h=0,f,k,m;d="boolean"!==typeof d?!1:d;void 0===c&&(c=!1);this.each(function(){var n=-1;if(this.grid&&(isNaN(e)?
a(this.p.colModel).each(function(a){if(this.name===e)return n=a,!1}):n=parseInt(e,10),0<=n)){var p=this.rows.length,r=0;if(p&&0<p){for(;r<p;){if(a(this.rows[r]).hasClass("jqgrow")){try{b=a.unformat.call(this,a(this.rows[r].cells[n]),{rowId:this.rows[r].id,colModel:this.p.colModel[n]},n)}catch(q){b=a.jgrid.htmlDecode(this.rows[r].cells[n].innerHTML)}c?(m=parseFloat(b),h+=m,void 0===k&&(k=f=m),f=Math.min(f,m),k=Math.max(k,m)):d?g.push({id:this.rows[r].id,value:b}):g.push(b)}r++}if(c)switch(c.toLowerCase()){case "sum":g=
h;break;case "avg":g=h/p;break;case "count":g=p;break;case "min":g=f;break;case "max":g=k}}}});return g},clearGridData:function(e){return this.each(function(){if(this.grid){"boolean"!==typeof e&&(e=!1);if(this.p.deepempty)a("#"+a.jgrid.jqID(this.p.id)+" tbody:first tr:gt(0)").remove();else{var d=a("#"+a.jgrid.jqID(this.p.id)+" tbody:first tr:first")[0];a("#"+a.jgrid.jqID(this.p.id)+" tbody:first").empty().append(d)}this.p.footerrow&&e&&a(".ui-jqgrid-ftable td",this.grid.sDiv).html("&#160;");this.p.selrow=
null;this.p.selarrrow=[];this.p.savedRow=[];this.p.records=0;this.p.page=1;this.p.lastpage=0;this.p.reccount=0;this.p.data=[];this.p._index={};this.updatepager(!0,!1)}})},getInd:function(a,d){var c=!1,g;this.each(function(){(g=this.rows.namedItem(a))&&(c=!0===d?g:g.rowIndex)});return c},bindKeys:function(e){var d=a.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:!0},e||{});return this.each(function(){var c=this;a("body").is("[role]")||a("body").attr("role","application");
c.p.scrollrows=d.scrollingRows;a(c).keydown(function(e){var b=a(c).find("tr[tabindex=0]")[0],h,f,k,m=c.p.treeReader.expanded_field;if(b)if(k=c.p._index[a.jgrid.stripPref(c.p.idPrefix,b.id)],37===e.keyCode||38===e.keyCode||39===e.keyCode||40===e.keyCode){if(38===e.keyCode){f=b.previousSibling;h="";if(f)if(a(f).is(":hidden"))for(;f;){if(f=f.previousSibling,!a(f).is(":hidden")&&a(f).hasClass("jqgrow")){h=f.id;break}}else h=f.id;a(c).jqGrid("setSelection",h,!0,e);e.preventDefault()}if(40===e.keyCode){f=
b.nextSibling;h="";if(f)if(a(f).is(":hidden"))for(;f;){if(f=f.nextSibling,!a(f).is(":hidden")&&a(f).hasClass("jqgrow")){h=f.id;break}}else h=f.id;a(c).jqGrid("setSelection",h,!0,e);e.preventDefault()}37===e.keyCode&&(c.p.treeGrid&&c.p.data[k][m]&&a(b).find("div.treeclick").trigger("click"),a(c).triggerHandler("jqGridKeyLeft",[c.p.selrow]),a.isFunction(d.onLeftKey)&&d.onLeftKey.call(c,c.p.selrow));39===e.keyCode&&(c.p.treeGrid&&!c.p.data[k][m]&&a(b).find("div.treeclick").trigger("click"),a(c).triggerHandler("jqGridKeyRight",
[c.p.selrow]),a.isFunction(d.onRightKey)&&d.onRightKey.call(c,c.p.selrow))}else 13===e.keyCode?(a(c).triggerHandler("jqGridKeyEnter",[c.p.selrow]),a.isFunction(d.onEnter)&&d.onEnter.call(c,c.p.selrow)):32===e.keyCode&&(a(c).triggerHandler("jqGridKeySpace",[c.p.selrow]),a.isFunction(d.onSpace)&&d.onSpace.call(c,c.p.selrow))})})},unbindKeys:function(){return this.each(function(){a(this).unbind("keydown")})},getLocalRow:function(e){var d=!1,c;this.each(function(){void 0!==e&&(c=this.p._index[a.jgrid.stripPref(this.p.idPrefix,
e)],0<=c&&(d=this.p.data[c]))});return d}})})(jQuery);
(function(a){a.extend(a.jgrid,{showModal:function(a){a.w.show()},closeModal:function(a){a.w.hide().attr("aria-hidden","true");a.o&&a.o.remove()},hideModal:function(e,d){d=a.extend({jqm:!0,gb:""},d||{});if(d.onClose){var c=d.gb&&"string"===typeof d.gb&&"#gbox_"===d.gb.substr(0,6)?d.onClose.call(a("#"+d.gb.substr(6))[0],e):d.onClose(e);if("boolean"===typeof c&&!c)return}if(a.fn.jqm&&!0===d.jqm)a(e).attr("aria-hidden","true").jqmHide();else{if(""!==d.gb)try{a(".jqgrid-overlay:first",d.gb).hide()}catch(g){}a(e).hide().attr("aria-hidden",
"true")}},findPos:function(a){var d=0,c=0;if(a.offsetParent){do d+=a.offsetLeft,c+=a.offsetTop;while(a=a.offsetParent)}return[d,c]},createModal:function(e,d,c,g,b,h,f){c=a.extend(!0,{},a.jgrid.jqModal||{},c);var k=document.createElement("div"),m,n=this;f=a.extend({},f||{});m="rtl"===a(c.gbox).attr("dir")?!0:!1;k.className="ui-widget ui-widget-content ui-corner-all ui-jqdialog";k.id=e.themodal;var p=document.createElement("div");p.className="ui-jqdialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix";
p.id=e.modalhead;a(p).append("<span class='ui-jqdialog-title'>"+c.caption+"</span>");var r=a("<a class='ui-jqdialog-titlebar-close ui-corner-all'></a>").hover(function(){r.addClass("ui-state-hover")},function(){r.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-closethick'></span>");a(p).append(r);m?(k.dir="rtl",a(".ui-jqdialog-title",p).css("float","right"),a(".ui-jqdialog-titlebar-close",p).css("left","0.3em")):(k.dir="ltr",a(".ui-jqdialog-title",p).css("float","left"),a(".ui-jqdialog-titlebar-close",
p).css("right","0.3em"));var q=document.createElement("div");a(q).addClass("ui-jqdialog-content ui-widget-content").attr("id",e.modalcontent);a(q).append(d);k.appendChild(q);a(k).prepend(p);!0===h?a("body").append(k):"string"===typeof h?a(h).append(k):a(k).insertBefore(g);a(k).css(f);void 0===c.jqModal&&(c.jqModal=!0);d={};if(a.fn.jqm&&!0===c.jqModal)0===c.left&&0===c.top&&c.overlay&&(f=[],f=a.jgrid.findPos(b),c.left=f[0]+4,c.top=f[1]+4),d.top=c.top+"px",d.left=c.left;else if(0!==c.left||0!==c.top)d.left=
c.left,d.top=c.top+"px";a("a.ui-jqdialog-titlebar-close",p).click(function(){var b=a("#"+a.jgrid.jqID(e.themodal)).data("onClose")||c.onClose,d=a("#"+a.jgrid.jqID(e.themodal)).data("gbox")||c.gbox;n.hideModal("#"+a.jgrid.jqID(e.themodal),{gb:d,jqm:c.jqModal,onClose:b});return!1});0!==c.width&&c.width||(c.width=300);0!==c.height&&c.height||(c.height=200);c.zIndex||(g=a(g).parents("*[role=dialog]").filter(":first").css("z-index"),c.zIndex=g?parseInt(g,10)+2:950);g=0;m&&d.left&&!h&&(g=a(c.gbox).width()-
(isNaN(c.width)?0:parseInt(c.width,10))-8,d.left=parseInt(d.left,10)+parseInt(g,10));d.left&&(d.left+="px");a(k).css(a.extend({width:isNaN(c.width)?"auto":c.width+"px",height:isNaN(c.height)?"auto":c.height+"px",zIndex:c.zIndex,overflow:"hidden"},d)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":e.modalhead,"aria-hidden":"true"});void 0===c.drag&&(c.drag=!0);void 0===c.resize&&(c.resize=!0);if(c.drag)if(a(p).css("cursor","move"),a.fn.jqDrag)a(k).jqDrag(p);else try{a(k).draggable({handle:a("#"+
a.jgrid.jqID(p.id))})}catch(l){}if(c.resize)if(a.fn.jqResize)a(k).append("<div class='jqResize ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se'></div>"),a("#"+a.jgrid.jqID(e.themodal)).jqResize(".jqResize",e.scrollelm?"#"+a.jgrid.jqID(e.scrollelm):!1);else try{a(k).resizable({handles:"se, sw",alsoResize:e.scrollelm?"#"+a.jgrid.jqID(e.scrollelm):!1})}catch(t){}!0===c.closeOnEscape&&a(k).keydown(function(b){27==b.which&&(b=a("#"+a.jgrid.jqID(e.themodal)).data("onClose")||c.onClose,
n.hideModal("#"+a.jgrid.jqID(e.themodal),{gb:c.gbox,jqm:c.jqModal,onClose:b}))})},viewModal:function(e,d){d=a.extend({toTop:!0,overlay:10,modal:!1,overlayClass:"ui-widget-overlay",onShow:a.jgrid.showModal,onHide:a.jgrid.closeModal,gbox:"",jqm:!0,jqM:!0},d||{});if(a.fn.jqm&&!0===d.jqm)d.jqM?a(e).attr("aria-hidden","false").jqm(d).jqmShow():a(e).attr("aria-hidden","false").jqmShow();else{""!==d.gbox&&(a(".jqgrid-overlay:first",d.gbox).show(),a(e).data("gbox",d.gbox));a(e).show().attr("aria-hidden",
"false");try{a(":input:visible",e)[0].focus()}catch(c){}}},info_dialog:function(e,d,c,g){var b={width:290,height:"auto",dataheight:"auto",drag:!0,resize:!1,left:250,top:170,zIndex:1E3,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[]};a.extend(!0,b,a.jgrid.jqModal||{},{caption:"<b>"+e+"</b>"},g||{});var h=b.jqModal,f=this;a.fn.jqm&&!h&&(h=!1);e="";if(0<b.buttons.length)for(g=0;g<b.buttons.length;g++)void 0===b.buttons[g].id&&(b.buttons[g].id="info_button_"+g),e+=
"<a id='"+b.buttons[g].id+"' class='fm-button ui-state-default ui-corner-all'>"+b.buttons[g].text+"</a>";g=isNaN(b.dataheight)?b.dataheight:b.dataheight+"px";d="<div id='info_id'>"+("<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+g+";"+("text-align:"+b.align+";")+"'>"+d+"</div>");d+=c?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+b.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a id='closedialog' class='fm-button ui-state-default ui-corner-all'>"+
c+"</a>"+e+"</div>":""!==e?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+b.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+e+"</div>":"";d+="</div>";try{"false"===a("#info_dialog").attr("aria-hidden")&&a.jgrid.hideModal("#info_dialog",{jqm:h}),a("#info_dialog").remove()}catch(k){}a.jgrid.createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},d,b,"","",!0);e&&a.each(b.buttons,
function(c){a("#"+a.jgrid.jqID(this.id),"#info_id").bind("click",function(){b.buttons[c].onClick.call(a("#info_dialog"));return!1})});a("#closedialog","#info_id").click(function(){f.hideModal("#info_dialog",{jqm:h,onClose:a("#info_dialog").data("onClose")||b.onClose,gb:a("#info_dialog").data("gbox")||b.gbox});return!1});a(".fm-button","#info_dialog").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});a.isFunction(b.beforeOpen)&&b.beforeOpen();a.jgrid.viewModal("#info_dialog",
{onHide:function(a){a.w.hide().remove();a.o&&a.o.remove()},modal:b.modal,jqm:h});a.isFunction(b.afterOpen)&&b.afterOpen();try{a("#info_dialog").focus()}catch(m){}},bindEv:function(e,d){a.isFunction(d.dataInit)&&d.dataInit.call(this,e,d);d.dataEvents&&a.each(d.dataEvents,function(){void 0!==this.data?a(e).bind(this.type,this.data,this.fn):a(e).bind(this.type,this.fn)})},createEl:function(e,d,c,g,b){function h(b,c,d){var e="dataInit dataEvents dataUrl buildSelect sopt searchhidden defaultValue attr custom_element custom_value".split(" ");
void 0!==d&&a.isArray(d)&&a.merge(e,d);a.each(c,function(c,d){-1===a.inArray(c,e)&&a(b).attr(c,d)});c.hasOwnProperty("id")||a(b).attr("id",a.jgrid.randId())}var f="",k=this;switch(e){case "textarea":f=document.createElement("textarea");g?d.cols||a(f).css({width:"98%"}):d.cols||(d.cols=20);d.rows||(d.rows=2);if("&nbsp;"===c||"&#160;"===c||1===c.length&&160===c.charCodeAt(0))c="";f.value=c;h(f,d);a(f).attr({role:"textbox",multiline:"true"});break;case "checkbox":f=document.createElement("input");f.type=
"checkbox";d.value?(e=d.value.split(":"),c===e[0]&&(f.checked=!0,f.defaultChecked=!0),f.value=e[0],a(f).attr("offval",e[1])):(e=(c+"").toLowerCase(),0>e.search(/(false|f|0|no|n|off|undefined)/i)&&""!==e?(f.checked=!0,f.defaultChecked=!0,f.value=c):f.value="on",a(f).attr("offval","off"));h(f,d,["value"]);a(f).attr("role","checkbox");break;case "select":f=document.createElement("select");f.setAttribute("role","select");g=[];!0===d.multiple?(e=!0,f.multiple="multiple",a(f).attr("aria-multiselectable",
"true")):e=!1;if(void 0!==d.dataUrl){e=d.name?String(d.id).substring(0,String(d.id).length-String(d.name).length-1):String(d.id);var m=d.postData||b.postData;k.p&&k.p.idPrefix&&(e=a.jgrid.stripPref(k.p.idPrefix,e));a.ajax(a.extend({url:a.isFunction(d.dataUrl)?d.dataUrl.call(k,e,c,String(d.name)):d.dataUrl,type:"GET",dataType:"html",data:a.isFunction(m)?m.call(k,e,c,String(d.name)):m,context:{elem:f,options:d,vl:c},success:function(b){var c=[],d=this.elem,e=this.vl,g=a.extend({},this.options),f=!0===
g.multiple;b=a.isFunction(g.buildSelect)?g.buildSelect.call(k,b):b;"string"===typeof b&&(b=a(a.trim(b)).html());b&&(a(d).append(b),h(d,g,m?["postData"]:void 0),void 0===g.size&&(g.size=f?3:1),f?(c=e.split(","),c=a.map(c,function(b){return a.trim(b)})):c[0]=a.trim(e),setTimeout(function(){a("option",d).each(function(b){0===b&&d.multiple&&(this.selected=!1);a(this).attr("role","option");if(-1<a.inArray(a.trim(a(this).text()),c)||-1<a.inArray(a.trim(a(this).val()),c))this.selected="selected"})},0))}},
b||{}))}else if(d.value){var n;void 0===d.size&&(d.size=e?3:1);e&&(g=c.split(","),g=a.map(g,function(b){return a.trim(b)}));"function"===typeof d.value&&(d.value=d.value());var p,r,q=void 0===d.separator?":":d.separator;b=void 0===d.delimiter?";":d.delimiter;if("string"===typeof d.value)for(p=d.value.split(b),n=0;n<p.length;n++)r=p[n].split(q),2<r.length&&(r[1]=a.map(r,function(a,b){if(0<b)return a}).join(q)),b=document.createElement("option"),b.setAttribute("role","option"),b.value=r[0],b.innerHTML=
r[1],f.appendChild(b),e||a.trim(r[0])!==a.trim(c)&&a.trim(r[1])!==a.trim(c)||(b.selected="selected"),e&&(-1<a.inArray(a.trim(r[1]),g)||-1<a.inArray(a.trim(r[0]),g))&&(b.selected="selected");else if("object"===typeof d.value)for(n in q=d.value,q)q.hasOwnProperty(n)&&(b=document.createElement("option"),b.setAttribute("role","option"),b.value=n,b.innerHTML=q[n],f.appendChild(b),e||a.trim(n)!==a.trim(c)&&a.trim(q[n])!==a.trim(c)||(b.selected="selected"),e&&(-1<a.inArray(a.trim(q[n]),g)||-1<a.inArray(a.trim(n),
g))&&(b.selected="selected"));h(f,d,["value"])}break;case "text":case "password":case "button":n="button"===e?"button":"textbox";f=document.createElement("input");f.type=e;f.value=c;h(f,d);"button"!==e&&(g?d.size||a(f).css({width:"98%"}):d.size||(d.size=20));a(f).attr("role",n);break;case "image":case "file":f=document.createElement("input");f.type=e;h(f,d);break;case "custom":f=document.createElement("span");try{if(a.isFunction(d.custom_element))if(q=d.custom_element.call(k,c,d))q=a(q).addClass("customelement").attr({id:d.id,
name:d.name}),a(f).empty().append(q);else throw"e2";else throw"e1";}catch(l){"e1"===l&&a.jgrid.info_dialog(a.jgrid.errors.errcap,"function 'custom_element' "+a.jgrid.edit.msg.nodefined,a.jgrid.edit.bClose),"e2"===l?a.jgrid.info_dialog(a.jgrid.errors.errcap,"function 'custom_element' "+a.jgrid.edit.msg.novalue,a.jgrid.edit.bClose):a.jgrid.info_dialog(a.jgrid.errors.errcap,"string"===typeof l?l:l.message,a.jgrid.edit.bClose)}}return f},checkDate:function(a,d){var c={},g;a=a.toLowerCase();g=-1!==a.indexOf("/")?
"/":-1!==a.indexOf("-")?"-":-1!==a.indexOf(".")?".":"/";a=a.split(g);d=d.split(g);if(3!==d.length)return!1;g=-1;var b,h=-1,f=-1,k;for(k=0;k<a.length;k++)b=isNaN(d[k])?0:parseInt(d[k],10),c[a[k]]=b,b=a[k],-1!==b.indexOf("y")&&(g=k),-1!==b.indexOf("m")&&(f=k),-1!==b.indexOf("d")&&(h=k);b="y"===a[g]||"yyyy"===a[g]?4:"yy"===a[g]?2:-1;k=[0,31,29,31,30,31,30,31,31,30,31,30,31];var m;if(-1===g)return!1;m=c[a[g]].toString();2===b&&1===m.length&&(b=1);if(m.length!==b||0===c[a[g]]&&"00"!==d[g]||-1===f)return!1;
m=c[a[f]].toString();if(1>m.length||1>c[a[f]]||12<c[a[f]]||-1===h)return!1;m=c[a[h]].toString();return 1>m.length||1>c[a[h]]||31<c[a[h]]||2===c[a[f]]&&c[a[h]]>(0!==c[a[g]]%4||0===c[a[g]]%100&&0!==c[a[g]]%400?28:29)||c[a[h]]>k[c[a[f]]]?!1:!0},isEmpty:function(a){return a.match(/^\s+$/)||""===a?!0:!1},checkTime:function(e){var d=/^(\d{1,2}):(\d{2})([apAP][Mm])?$/;if(!a.jgrid.isEmpty(e))if(e=e.match(d)){if(e[3]){if(1>e[1]||12<e[1])return!1}else if(23<e[1])return!1;if(59<e[2])return!1}else return!1;return!0},
checkValues:function(e,d,c,g){var b,h,f;f=this.p.colModel;if(void 0===c)if("string"===typeof d)for(c=0,g=f.length;c<g;c++){if(f[c].name===d){b=f[c].editrules;d=c;null!=f[c].formoptions&&(h=f[c].formoptions.label);break}}else 0<=d&&(b=f[d].editrules);else b=c,h=void 0===g?"_":g;if(b){h||(h=null!=this.p.colNames?this.p.colNames[d]:f[d].label);if(!0===b.required&&a.jgrid.isEmpty(e))return[!1,h+": "+a.jgrid.edit.msg.required,""];c=!1===b.required?!1:!0;if(!0===b.number&&(!1!==c||!a.jgrid.isEmpty(e))&&
isNaN(e))return[!1,h+": "+a.jgrid.edit.msg.number,""];if(void 0!==b.minValue&&!isNaN(b.minValue)&&parseFloat(e)<parseFloat(b.minValue))return[!1,h+": "+a.jgrid.edit.msg.minValue+" "+b.minValue,""];if(void 0!==b.maxValue&&!isNaN(b.maxValue)&&parseFloat(e)>parseFloat(b.maxValue))return[!1,h+": "+a.jgrid.edit.msg.maxValue+" "+b.maxValue,""];if(!(!0!==b.email||!1===c&&a.jgrid.isEmpty(e)||(g=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,
g.test(e))))return[!1,h+": "+a.jgrid.edit.msg.email,""];if(!(!0!==b.integer||!1===c&&a.jgrid.isEmpty(e)||!isNaN(e)&&0===e%1&&-1===e.indexOf(".")))return[!1,h+": "+a.jgrid.edit.msg.integer,""];if(!(!0!==b.date||!1===c&&a.jgrid.isEmpty(e)||(f[d].formatoptions&&f[d].formatoptions.newformat?(f=f[d].formatoptions.newformat,a.jgrid.formatter.date.masks.hasOwnProperty(f)&&(f=a.jgrid.formatter.date.masks[f])):f=f[d].datefmt||"Y-m-d",a.jgrid.checkDate(f,e))))return[!1,h+": "+a.jgrid.edit.msg.date+" - "+f,
""];if(!0===b.time&&!(!1===c&&a.jgrid.isEmpty(e)||a.jgrid.checkTime(e)))return[!1,h+": "+a.jgrid.edit.msg.date+" - hh:mm (am/pm)",""];if(!(!0!==b.url||!1===c&&a.jgrid.isEmpty(e)||(g=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i,g.test(e))))return[!1,h+": "+a.jgrid.edit.msg.url,""];if(!0===b.custom&&(!1!==c||!a.jgrid.isEmpty(e)))return a.isFunction(b.custom_func)?(e=b.custom_func.call(this,e,h,d),a.isArray(e)?e:[!1,a.jgrid.edit.msg.customarray,
""]):[!1,a.jgrid.edit.msg.customfcheck,""]}return[!0,"",""]}})})(jQuery);
(function(a){a.jgrid.extend({getColProp:function(a){var d={},c=this[0];if(!c.grid)return!1;var c=c.p.colModel,g;for(g=0;g<c.length;g++)if(c[g].name===a){d=c[g];break}return d},setColProp:function(e,d){return this.each(function(){if(this.grid&&d){var c=this.p.colModel,g;for(g=0;g<c.length;g++)if(c[g].name===e){a.extend(!0,this.p.colModel[g],d);break}}})},sortGrid:function(a,d,c){return this.each(function(){var g=-1,b;if(this.grid){a||(a=this.p.sortname);for(b=0;b<this.p.colModel.length;b++)if(this.p.colModel[b].index===
a||this.p.colModel[b].name===a){g=b;break}-1!==g&&(b=this.p.colModel[g].sortable,"boolean"!==typeof b&&(b=!0),"boolean"!==typeof d&&(d=!1),b&&this.sortData("jqgh_"+this.p.id+"_"+a,g,d,c))}})},setGridState:function(e){return this.each(function(){this.grid&&("hidden"===e?(a(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+a.jgrid.jqID(this.p.id)).slideUp("fast"),this.p.pager&&a(this.p.pager).slideUp("fast"),this.p.toppager&&a(this.p.toppager).slideUp("fast"),!0===this.p.toolbar[0]&&("both"===this.p.toolbar[1]&&
a(this.grid.ubDiv).slideUp("fast"),a(this.grid.uDiv).slideUp("fast")),this.p.footerrow&&a(".ui-jqgrid-sdiv","#gbox_"+a.jgrid.jqID(this.p.id)).slideUp("fast"),a(".ui-jqgrid-titlebar-close span",this.grid.cDiv).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),this.p.gridstate="hidden"):"visible"===e&&(a(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+a.jgrid.jqID(this.p.id)).slideDown("fast"),this.p.pager&&a(this.p.pager).slideDown("fast"),this.p.toppager&&a(this.p.toppager).slideDown("fast"),
!0===this.p.toolbar[0]&&("both"===this.p.toolbar[1]&&a(this.grid.ubDiv).slideDown("fast"),a(this.grid.uDiv).slideDown("fast")),this.p.footerrow&&a(".ui-jqgrid-sdiv","#gbox_"+a.jgrid.jqID(this.p.id)).slideDown("fast"),a(".ui-jqgrid-titlebar-close span",this.grid.cDiv).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),this.p.gridstate="visible"))})}})})(jQuery);
(function(a){var e={};a.jgrid.extend({searchGrid:function(d){d=a.extend(!0,{recreateFilter:!1,drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,searchOnEnter:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,jqModal:!0,modal:!1,resize:!0,width:450,height:"auto",dataheight:"auto",showQuery:!1,
errorcheck:!0,sopt:null,stringResult:void 0,onClose:null,onSearch:null,onReset:null,toTop:!0,overlay:30,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null,operands:{eq:"=",ne:"<>",lt:"<",le:"<=",gt:">",ge:">=",bw:"LIKE",bn:"NOT LIKE","in":"IN",ni:"NOT IN",ew:"LIKE",en:"NOT LIKE",cn:"LIKE",nc:"NOT LIKE",nu:"IS NULL",nn:"ISNOT NULL"}},a.jgrid.search,d||{});return this.each(function(){function c(c){h=a(e).triggerHandler("jqGridFilterBeforeShow",[c]);void 0===
h&&(h=!0);h&&a.isFunction(d.beforeShowSearch)&&(h=d.beforeShowSearch.call(e,c));h&&(a.jgrid.viewModal("#"+a.jgrid.jqID(k.themodal),{gbox:"#gbox_"+a.jgrid.jqID(b),jqm:d.jqModal,modal:d.modal,overlay:d.overlay,toTop:d.toTop}),a(e).triggerHandler("jqGridFilterAfterShow",[c]),a.isFunction(d.afterShowSearch)&&d.afterShowSearch.call(e,c))}var e=this;if(e.grid){var b="fbox_"+e.p.id,h=!0,f=!0,k={themodal:"searchmod"+b,modalhead:"searchhd"+b,modalcontent:"searchcnt"+b,scrollelm:b},m=e.p.postData[d.sFilter];
"string"===typeof m&&(m=a.jgrid.parse(m));!0===d.recreateFilter&&a("#"+a.jgrid.jqID(k.themodal)).remove();if(void 0!==a("#"+a.jgrid.jqID(k.themodal))[0])c(a("#fbox_"+a.jgrid.jqID(+e.p.id)));else{var n=a("<div><div id='"+b+"' class='searchFilter' style='overflow:auto'></div></div>").insertBefore("#gview_"+a.jgrid.jqID(e.p.id)),p="left",r="";"rtl"===e.p.direction&&(p="right",r=" style='text-align:left'",n.attr("dir","rtl"));var q=a.extend([],e.p.colModel),l="<a id='"+b+"_search' class='fm-button ui-state-default ui-corner-all fm-button-icon-right ui-reset'><span class='ui-icon ui-icon-search'></span>"+
d.Find+"</a>",t="<a id='"+b+"_reset' class='fm-button ui-state-default ui-corner-all fm-button-icon-left ui-search'><span class='ui-icon ui-icon-arrowreturnthick-1-w'></span>"+d.Reset+"</a>",s="",w="",v,x=!1,G=-1;d.showQuery&&(s="<a id='"+b+"_query' class='fm-button ui-state-default ui-corner-all fm-button-icon-left'><span class='ui-icon ui-icon-comment'></span>Query</a>");d.columns.length?(q=d.columns,G=0,v=q[0].index||q[0].name):a.each(q,function(a,b){b.label||(b.label=e.p.colNames[a]);if(!x){var c=
void 0===b.search?!0:b.search,d=!0===b.hidden;if(b.searchoptions&&!0===b.searchoptions.searchhidden&&c||c&&!d)x=!0,v=b.index||b.name,G=a}});if(!m&&v||!1===d.multipleSearch){var C="eq";0<=G&&q[G].searchoptions&&q[G].searchoptions.sopt?C=q[G].searchoptions.sopt[0]:d.sopt&&d.sopt.length&&(C=d.sopt[0]);m={groupOp:"AND",rules:[{field:v,op:C,data:""}]}}x=!1;d.tmplNames&&d.tmplNames.length&&(x=!0,w=d.tmplLabel,w+="<select class='ui-template'>",w+="<option value='default'>Default</option>",a.each(d.tmplNames,
function(a,b){w+="<option value='"+a+"'>"+b+"</option>"}),w+="</select>");p="<table class='EditTable' style='border:0px none;margin-top:5px' id='"+b+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr><td class='EditButton' style='text-align:"+p+"'>"+t+w+"</td><td class='EditButton' "+r+">"+s+l+"</td></tr></tbody></table>";b=a.jgrid.jqID(b);a("#"+b).jqFilter({columns:q,filter:d.loadDefaults?m:null,showQuery:d.showQuery,errorcheck:d.errorcheck,sopt:d.sopt,
groupButton:d.multipleGroup,ruleButtons:d.multipleSearch,afterRedraw:d.afterRedraw,ops:d.odata,operands:d.operands,ajaxSelectOptions:e.p.ajaxSelectOptions,groupOps:d.groupOps,onChange:function(){this.p.showQuery&&a(".query",this).html(this.toUserFriendlyString());a.isFunction(d.afterChange)&&d.afterChange.call(e,a("#"+b),d)},direction:e.p.direction,id:e.p.id});n.append(p);x&&d.tmplFilters&&d.tmplFilters.length&&a(".ui-template",n).bind("change",function(){var c=a(this).val();"default"===c?a("#"+b).jqFilter("addFilter",
m):a("#"+b).jqFilter("addFilter",d.tmplFilters[parseInt(c,10)]);return!1});!0===d.multipleGroup&&(d.multipleSearch=!0);a(e).triggerHandler("jqGridFilterInitialize",[a("#"+b)]);a.isFunction(d.onInitializeSearch)&&d.onInitializeSearch.call(e,a("#"+b));d.gbox="#gbox_"+b;d.layer?a.jgrid.createModal(k,n,d,"#gview_"+a.jgrid.jqID(e.p.id),a("#gbox_"+a.jgrid.jqID(e.p.id))[0],"#"+a.jgrid.jqID(d.layer),{position:"relative"}):a.jgrid.createModal(k,n,d,"#gview_"+a.jgrid.jqID(e.p.id),a("#gbox_"+a.jgrid.jqID(e.p.id))[0]);
(d.searchOnEnter||d.closeOnEscape)&&a("#"+a.jgrid.jqID(k.themodal)).keydown(function(c){var e=a(c.target);if(d.searchOnEnter&&13===c.which&&!(e.hasClass("add-group")||e.hasClass("add-rule")||e.hasClass("delete-group")||e.hasClass("delete-rule")||e.hasClass("fm-button")&&e.is("[id$=_query]")))return a("#"+b+"_search").focus().click(),!1;if(d.closeOnEscape&&27===c.which)return a("#"+a.jgrid.jqID(k.modalhead)).find(".ui-jqdialog-titlebar-close").focus().click(),!1});s&&a("#"+b+"_query").bind("click",
function(){a(".queryresult",n).toggle();return!1});void 0===d.stringResult&&(d.stringResult=d.multipleSearch);a("#"+b+"_search").bind("click",function(){var c=a("#"+b),l={},h,m=c.jqFilter("filterData");if(d.errorcheck&&(c[0].hideError(),d.showQuery||c.jqFilter("toSQLString"),c[0].p.error))return c[0].showError(),!1;if(d.stringResult){try{h=xmlJsonClass.toJson(m,"","",!1)}catch(n){try{h=JSON.stringify(m)}catch(p){}}"string"===typeof h&&(l[d.sFilter]=h,a.each([d.sField,d.sValue,d.sOper],function(){l[this]=
""}))}else d.multipleSearch?(l[d.sFilter]=m,a.each([d.sField,d.sValue,d.sOper],function(){l[this]=""})):(l[d.sField]=m.rules[0].field,l[d.sValue]=m.rules[0].data,l[d.sOper]=m.rules[0].op,l[d.sFilter]="");e.p.search=!0;a.extend(e.p.postData,l);f=a(e).triggerHandler("jqGridFilterSearch");void 0===f&&(f=!0);f&&a.isFunction(d.onSearch)&&(f=d.onSearch.call(e,e.p.filters));!1!==f&&a(e).trigger("reloadGrid",[{page:1}]);d.closeAfterSearch&&a.jgrid.hideModal("#"+a.jgrid.jqID(k.themodal),{gb:"#gbox_"+a.jgrid.jqID(e.p.id),
jqm:d.jqModal,onClose:d.onClose});return!1});a("#"+b+"_reset").bind("click",function(){var c={},l=a("#"+b);e.p.search=!1;!1===d.multipleSearch?c[d.sField]=c[d.sValue]=c[d.sOper]="":c[d.sFilter]="";l[0].resetFilter();x&&a(".ui-template",n).val("default");a.extend(e.p.postData,c);f=a(e).triggerHandler("jqGridFilterReset");void 0===f&&(f=!0);f&&a.isFunction(d.onReset)&&(f=d.onReset.call(e));!1!==f&&a(e).trigger("reloadGrid",[{page:1}]);d.closeAfterReset&&a.jgrid.hideModal("#"+a.jgrid.jqID(k.themodal),
{gb:"#gbox_"+a.jgrid.jqID(e.p.id),jqm:d.jqModal,onClose:d.onClose});return!1});c(a("#"+b));a(".fm-button:not(.ui-state-disabled)",n).hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")})}}})},editGridRow:function(d,c){c=a.extend(!0,{top:0,left:0,width:300,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,
beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,jqModal:!0,closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,_savedData:{},processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:"ui-widget-overlay"},a.jgrid.edit,
c||{});e[a(this)[0].p.id]=c;return this.each(function(){function g(){a(v+" > tbody > tr > td > .FormElement").each(function(){var b=a(".customelement",this);if(b.length){var c=a(b[0]).attr("name");a.each(l.p.colModel,function(){if(this.name===c&&this.editoptions&&a.isFunction(this.editoptions.custom_value)){try{if(u[c]=this.editoptions.custom_value.call(l,a("#"+a.jgrid.jqID(c),v),"get"),void 0===u[c])throw"e1";}catch(b){"e1"===b?a.jgrid.info_dialog(a.jgrid.errors.errcap,"function 'custom_value' "+
a.jgrid.edit.msg.novalue,a.jgrid.edit.bClose):a.jgrid.info_dialog(a.jgrid.errors.errcap,b.message,a.jgrid.edit.bClose)}return!0}})}else{switch(a(this).get(0).type){case "checkbox":a(this).is(":checked")?u[this.name]=a(this).val():(b=a(this).attr("offval"),u[this.name]=b);break;case "select-one":u[this.name]=a("option:selected",this).val();break;case "select-multiple":u[this.name]=a(this).val();u[this.name]=u[this.name]?u[this.name].join(","):"";a("option:selected",this).each(function(b,c){a(c).text()});
break;case "password":case "text":case "textarea":case "button":u[this.name]=a(this).val()}l.p.autoencode&&(u[this.name]=a.jgrid.htmlEncode(u[this.name]))}});return!0}function b(b,c,d,f){var g,k,h,m=0,n,p,q,r=[],t=!1,y="",u;for(u=1;u<=f;u++)y+="<td class='CaptionTD'>&#160;</td><td class='DataTD'>&#160;</td>";"_empty"!==b&&(t=a(c).jqGrid("getInd",b));a(c.p.colModel).each(function(u){g=this.name;p=(k=this.editrules&&!0===this.editrules.edithidden?!1:!0===this.hidden?!0:!1)?"style='display:none'":"";
if("cb"!==g&&"subgrid"!==g&&!0===this.editable&&"rn"!==g){if(!1===t)n="";else if(g===c.p.ExpandColumn&&!0===c.p.treeGrid)n=a("td[role='gridcell']:eq("+u+")",c.rows[t]).text();else{try{n=a.unformat.call(c,a("td[role='gridcell']:eq("+u+")",c.rows[t]),{rowId:b,colModel:this},u)}catch(w){n=this.edittype&&"textarea"===this.edittype?a("td[role='gridcell']:eq("+u+")",c.rows[t]).text():a("td[role='gridcell']:eq("+u+")",c.rows[t]).html()}if(!n||"&nbsp;"===n||"&#160;"===n||1===n.length&&160===n.charCodeAt(0))n=
""}var v=a.extend({},this.editoptions||{},{id:g,name:g}),x=a.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),z=parseInt(x.rowpos,10)||m+1,H=parseInt(2*(parseInt(x.colpos,10)||1),10);"_empty"===b&&v.defaultValue&&(n=a.isFunction(v.defaultValue)?v.defaultValue.call(l):v.defaultValue);this.edittype||(this.edittype="text");l.p.autoencode&&(n=a.jgrid.htmlDecode(n));q=a.jgrid.createEl.call(l,this.edittype,v,n,!1,a.extend({},a.jgrid.ajaxOptions,c.p.ajaxSelectOptions||
{}));if(e[l.p.id].checkOnSubmit||e[l.p.id].checkOnUpdate)e[l.p.id]._savedData[g]=n;a(q).addClass("FormElement");-1<a.inArray(this.edittype,["text","textarea","password","select"])&&a(q).addClass("ui-widget-content ui-corner-all");h=a(d).find("tr[rowpos="+z+"]");if(x.rowabove){var C=a("<tr><td class='contentinfo' colspan='"+2*f+"'>"+x.rowcontent+"</td></tr>");a(d).append(C);C[0].rp=z}0===h.length&&(h=a("<tr "+p+" rowpos='"+z+"'></tr>").addClass("FormData").attr("id","tr_"+g),a(h).append(y),a(d).append(h),
h[0].rp=z);a("td:eq("+(H-2)+")",h[0]).html(void 0===x.label?c.p.colNames[u]:x.label);a("td:eq("+(H-1)+")",h[0]).append(x.elmprefix).append(q).append(x.elmsuffix);"custom"===this.edittype&&a.isFunction(v.custom_value)&&v.custom_value.call(l,a("#"+g,"#"+s),"set",n);a.jgrid.bindEv.call(l,q,v);r[m]=u;m++}});0<m&&(u=a("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*f-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+c.p.id+"_id' value='"+
b+"'/></td></tr>"),u[0].rp=m+999,a(d).append(u),e[l.p.id].checkOnSubmit||e[l.p.id].checkOnUpdate)&&(e[l.p.id]._savedData[c.p.id+"_id"]=b);return r}function h(b,c,d){var f,g=0,k,h,m,n,p;if(e[l.p.id].checkOnSubmit||e[l.p.id].checkOnUpdate)e[l.p.id]._savedData={},e[l.p.id]._savedData[c.p.id+"_id"]=b;var q=c.p.colModel;if("_empty"===b)a(q).each(function(){f=this.name;m=a.extend({},this.editoptions||{});(h=a("#"+a.jgrid.jqID(f),"#"+d))&&h.length&&null!==h[0]&&(n="","custom"===this.edittype&&a.isFunction(m.custom_value)?
m.custom_value.call(l,a("#"+f,"#"+d),"set",n):m.defaultValue?(n=a.isFunction(m.defaultValue)?m.defaultValue.call(l):m.defaultValue,"checkbox"===h[0].type?(p=n.toLowerCase(),0>p.search(/(false|f|0|no|n|off|undefined)/i)&&""!==p?(h[0].checked=!0,h[0].defaultChecked=!0,h[0].value=n):(h[0].checked=!1,h[0].defaultChecked=!1)):h.val(n)):"checkbox"===h[0].type?(h[0].checked=!1,h[0].defaultChecked=!1,n=a(h).attr("offval")):h[0].type&&"select"===h[0].type.substr(0,6)?h[0].selectedIndex=0:h.val(n),!0===e[l.p.id].checkOnSubmit||
e[l.p.id].checkOnUpdate)&&(e[l.p.id]._savedData[f]=n)}),a("#id_g","#"+d).val(b);else{var r=a(c).jqGrid("getInd",b,!0);r&&(a('td[role="gridcell"]',r).each(function(h){f=q[h].name;if("cb"!==f&&"subgrid"!==f&&"rn"!==f&&!0===q[h].editable){if(f===c.p.ExpandColumn&&!0===c.p.treeGrid)k=a(this).text();else try{k=a.unformat.call(c,a(this),{rowId:b,colModel:q[h]},h)}catch(m){k="textarea"===q[h].edittype?a(this).text():a(this).html()}l.p.autoencode&&(k=a.jgrid.htmlDecode(k));if(!0===e[l.p.id].checkOnSubmit||
e[l.p.id].checkOnUpdate)e[l.p.id]._savedData[f]=k;f=a.jgrid.jqID(f);switch(q[h].edittype){case "password":case "text":case "button":case "image":case "textarea":if("&nbsp;"===k||"&#160;"===k||1===k.length&&160===k.charCodeAt(0))k="";a("#"+f,"#"+d).val(k);break;case "select":var n=k.split(","),n=a.map(n,function(b){return a.trim(b)});a("#"+f+" option","#"+d).each(function(){q[h].editoptions.multiple||a.trim(k)!==a.trim(a(this).text())&&n[0]!==a.trim(a(this).text())&&n[0]!==a.trim(a(this).val())?q[h].editoptions.multiple?
-1<a.inArray(a.trim(a(this).text()),n)||-1<a.inArray(a.trim(a(this).val()),n)?this.selected=!0:this.selected=!1:this.selected=!1:this.selected=!0});break;case "checkbox":k=String(k);if(q[h].editoptions&&q[h].editoptions.value)if(q[h].editoptions.value.split(":")[0]===k)a("#"+f,"#"+d)[l.p.useProp?"prop":"attr"]({checked:!0,defaultChecked:!0});else a("#"+f,"#"+d)[l.p.useProp?"prop":"attr"]({checked:!1,defaultChecked:!1});else k=k.toLowerCase(),0>k.search(/(false|f|0|no|n|off|undefined)/i)&&""!==k?(a("#"+
f,"#"+d)[l.p.useProp?"prop":"attr"]("checked",!0),a("#"+f,"#"+d)[l.p.useProp?"prop":"attr"]("defaultChecked",!0)):(a("#"+f,"#"+d)[l.p.useProp?"prop":"attr"]("checked",!1),a("#"+f,"#"+d)[l.p.useProp?"prop":"attr"]("defaultChecked",!1));break;case "custom":try{if(q[h].editoptions&&a.isFunction(q[h].editoptions.custom_value))q[h].editoptions.custom_value.call(l,a("#"+f,"#"+d),"set",k);else throw"e1";}catch(p){"e1"===p?a.jgrid.info_dialog(a.jgrid.errors.errcap,"function 'custom_value' "+a.jgrid.edit.msg.nodefined,
a.jgrid.edit.bClose):a.jgrid.info_dialog(a.jgrid.errors.errcap,p.message,a.jgrid.edit.bClose)}}g++}}),0<g&&a("#id_g",v).val(b))}}function f(){a.each(l.p.colModel,function(a,b){b.editoptions&&!0===b.editoptions.NullIfEmpty&&u.hasOwnProperty(b.name)&&""===u[b.name]&&(u[b.name]="null")})}function k(){var b,d=[!0,"",""],g={},k=l.p.prmNames,m,n,p,q,r,y=a(l).triggerHandler("jqGridAddEditBeforeCheckValues",[a("#"+s),B]);y&&"object"===typeof y&&(u=y);a.isFunction(e[l.p.id].beforeCheckValues)&&(y=e[l.p.id].beforeCheckValues.call(l,
u,a("#"+s),B))&&"object"===typeof y&&(u=y);for(p in u)if(u.hasOwnProperty(p)&&(d=a.jgrid.checkValues.call(l,u[p],p),!1===d[0]))break;f();d[0]&&(g=a(l).triggerHandler("jqGridAddEditClickSubmit",[e[l.p.id],u,B]),void 0===g&&a.isFunction(e[l.p.id].onclickSubmit)&&(g=e[l.p.id].onclickSubmit.call(l,e[l.p.id],u,B)||{}),d=a(l).triggerHandler("jqGridAddEditBeforeSubmit",[u,a("#"+s),B]),void 0===d&&(d=[!0,"",""]),d[0]&&a.isFunction(e[l.p.id].beforeSubmit)&&(d=e[l.p.id].beforeSubmit.call(l,u,a("#"+s),B)));
if(d[0]&&!e[l.p.id].processing){e[l.p.id].processing=!0;a("#sData",v+"_2").addClass("ui-state-active");n=k.oper;m=k.id;u[n]="_empty"===a.trim(u[l.p.id+"_id"])?k.addoper:k.editoper;u[n]!==k.addoper?u[m]=u[l.p.id+"_id"]:void 0===u[m]&&(u[m]=u[l.p.id+"_id"]);delete u[l.p.id+"_id"];u=a.extend(u,e[l.p.id].editData,g);if(!0===l.p.treeGrid)for(r in u[n]===k.addoper&&(q=a(l).jqGrid("getGridParam","selrow"),u["adjacency"===l.p.treeGridModel?l.p.treeReader.parent_id_field:"parent_id"]=q),l.p.treeReader)l.p.treeReader.hasOwnProperty(r)&&
(g=l.p.treeReader[r],!u.hasOwnProperty(g)||u[n]===k.addoper&&"parent_id_field"===r||delete u[g]);u[m]=a.jgrid.stripPref(l.p.idPrefix,u[m]);r=a.extend({url:e[l.p.id].url||a(l).jqGrid("getGridParam","editurl"),type:e[l.p.id].mtype,data:a.isFunction(e[l.p.id].serializeEditData)?e[l.p.id].serializeEditData.call(l,u):u,complete:function(f,g){var p;u[m]=l.p.idPrefix+u[m];300<=f.status&&304!==f.status?(d[0]=!1,d[1]=a(l).triggerHandler("jqGridAddEditErrorTextFormat",[f,B]),a.isFunction(e[l.p.id].errorTextFormat)?
d[1]=e[l.p.id].errorTextFormat.call(l,f,B):d[1]=g+" Status: '"+f.statusText+"'. Error code: "+f.status):(d=a(l).triggerHandler("jqGridAddEditAfterSubmit",[f,u,B]),void 0===d&&(d=[!0,"",""]),d[0]&&a.isFunction(e[l.p.id].afterSubmit)&&(d=e[l.p.id].afterSubmit.call(l,f,u,B)));if(!1===d[0])a("#FormError>td",v).html(d[1]),a("#FormError",v).show();else if(l.p.autoencode&&a.each(u,function(b,c){u[b]=a.jgrid.htmlDecode(c)}),u[n]===k.addoper?(d[2]||(d[2]=a.jgrid.randId()),u[m]=d[2],e[l.p.id].reloadAfterSubmit?
a(l).trigger("reloadGrid"):!0===l.p.treeGrid?a(l).jqGrid("addChildNode",d[2],q,u):a(l).jqGrid("addRowData",d[2],u,c.addedrow),e[l.p.id].closeAfterAdd?(!0!==l.p.treeGrid&&a(l).jqGrid("setSelection",d[2]),a.jgrid.hideModal("#"+a.jgrid.jqID(x.themodal),{gb:"#gbox_"+a.jgrid.jqID(t),jqm:c.jqModal,onClose:e[l.p.id].onClose})):e[l.p.id].clearAfterAdd&&h("_empty",l,s)):(e[l.p.id].reloadAfterSubmit?(a(l).trigger("reloadGrid"),e[l.p.id].closeAfterEdit||setTimeout(function(){a(l).jqGrid("setSelection",u[m])},
1E3)):!0===l.p.treeGrid?a(l).jqGrid("setTreeRow",u[m],u):a(l).jqGrid("setRowData",u[m],u),e[l.p.id].closeAfterEdit&&a.jgrid.hideModal("#"+a.jgrid.jqID(x.themodal),{gb:"#gbox_"+a.jgrid.jqID(t),jqm:c.jqModal,onClose:e[l.p.id].onClose})),a.isFunction(e[l.p.id].afterComplete)&&(b=f,setTimeout(function(){a(l).triggerHandler("jqGridAddEditAfterComplete",[b,u,a("#"+s),B]);e[l.p.id].afterComplete.call(l,b,u,a("#"+s),B);b=null},500)),e[l.p.id].checkOnSubmit||e[l.p.id].checkOnUpdate)if(a("#"+s).data("disabled",
!1),"_empty"!==e[l.p.id]._savedData[l.p.id+"_id"])for(p in e[l.p.id]._savedData)e[l.p.id]._savedData.hasOwnProperty(p)&&u[p]&&(e[l.p.id]._savedData[p]=u[p]);e[l.p.id].processing=!1;a("#sData",v+"_2").removeClass("ui-state-active");try{a(":input:visible","#"+s)[0].focus()}catch(r){}}},a.jgrid.ajaxOptions,e[l.p.id].ajaxEditOptions);r.url||e[l.p.id].useDataProxy||(a.isFunction(l.p.dataProxy)?e[l.p.id].useDataProxy=!0:(d[0]=!1,d[1]+=" "+a.jgrid.errors.nourl));d[0]&&(e[l.p.id].useDataProxy?(g=l.p.dataProxy.call(l,
r,"set_"+l.p.id),void 0===g&&(g=[!0,""]),!1===g[0]?(d[0]=!1,d[1]=g[1]||"Error deleting the selected row!"):(r.data.oper===k.addoper&&e[l.p.id].closeAfterAdd&&a.jgrid.hideModal("#"+a.jgrid.jqID(x.themodal),{gb:"#gbox_"+a.jgrid.jqID(t),jqm:c.jqModal,onClose:e[l.p.id].onClose}),r.data.oper===k.editoper&&e[l.p.id].closeAfterEdit&&a.jgrid.hideModal("#"+a.jgrid.jqID(x.themodal),{gb:"#gbox_"+a.jgrid.jqID(t),jqm:c.jqModal,onClose:e[l.p.id].onClose}))):a.ajax(r))}!1===d[0]&&(a("#FormError>td",v).html(d[1]),
a("#FormError",v).show())}function m(a,b){var c=!1,d;for(d in a)if(a.hasOwnProperty(d)&&a[d]!=b[d]){c=!0;break}return c}function n(){var b=!0;a("#FormError",v).hide();e[l.p.id].checkOnUpdate&&(u={},g(),P=m(u,e[l.p.id]._savedData))&&(a("#"+s).data("disabled",!0),a(".confirm","#"+x.themodal).show(),b=!1);return b}function p(){var b;if("_empty"!==d&&void 0!==l.p.savedRow&&0<l.p.savedRow.length&&a.isFunction(a.fn.jqGrid.restoreRow))for(b=0;b<l.p.savedRow.length;b++)if(l.p.savedRow[b].id==d){a(l).jqGrid("restoreRow",
d);break}}function r(b,c){var d=c[1].length-1;0===b?a("#pData",v+"_2").addClass("ui-state-disabled"):void 0!==c[1][b-1]&&a("#"+a.jgrid.jqID(c[1][b-1])).hasClass("ui-state-disabled")?a("#pData",v+"_2").addClass("ui-state-disabled"):a("#pData",v+"_2").removeClass("ui-state-disabled");b===d?a("#nData",v+"_2").addClass("ui-state-disabled"):void 0!==c[1][b+1]&&a("#"+a.jgrid.jqID(c[1][b+1])).hasClass("ui-state-disabled")?a("#nData",v+"_2").addClass("ui-state-disabled"):a("#nData",v+"_2").removeClass("ui-state-disabled")}
function q(){var b=a(l).jqGrid("getDataIDs"),c=a("#id_g",v).val();return[a.inArray(c,b),b]}var l=this;if(l.grid&&d){var t=l.p.id,s="FrmGrid_"+t,w="TblGrid_"+t,v="#"+a.jgrid.jqID(w),x={themodal:"editmod"+t,modalhead:"edithd"+t,modalcontent:"editcnt"+t,scrollelm:s},G=a.isFunction(e[l.p.id].beforeShowForm)?e[l.p.id].beforeShowForm:!1,C=a.isFunction(e[l.p.id].afterShowForm)?e[l.p.id].afterShowForm:!1,z=a.isFunction(e[l.p.id].beforeInitData)?e[l.p.id].beforeInitData:!1,S=a.isFunction(e[l.p.id].onInitializeForm)?
e[l.p.id].onInitializeForm:!1,y=!0,H=1,T=0,u,P,B,s=a.jgrid.jqID(s);"new"===d?(d="_empty",B="add",c.caption=e[l.p.id].addCaption):(c.caption=e[l.p.id].editCaption,B="edit");!0===c.recreateForm&&void 0!==a("#"+a.jgrid.jqID(x.themodal))[0]&&a("#"+a.jgrid.jqID(x.themodal)).remove();var U=!0;c.checkOnUpdate&&c.jqModal&&!c.modal&&(U=!1);if(void 0!==a("#"+a.jgrid.jqID(x.themodal))[0]){y=a(l).triggerHandler("jqGridAddEditBeforeInitData",[a("#"+a.jgrid.jqID(s)),B]);void 0===y&&(y=!0);y&&z&&(y=z.call(l,a("#"+
s),B));if(!1===y)return;p();a(".ui-jqdialog-title","#"+a.jgrid.jqID(x.modalhead)).html(c.caption);a("#FormError",v).hide();e[l.p.id].topinfo?(a(".topinfo",v).html(e[l.p.id].topinfo),a(".tinfo",v).show()):a(".tinfo",v).hide();e[l.p.id].bottominfo?(a(".bottominfo",v+"_2").html(e[l.p.id].bottominfo),a(".binfo",v+"_2").show()):a(".binfo",v+"_2").hide();h(d,l,s);"_empty"!==d&&e[l.p.id].viewPagerButtons?a("#pData, #nData",v+"_2").show():a("#pData, #nData",v+"_2").hide();!0===e[l.p.id].processing&&(e[l.p.id].processing=
!1,a("#sData",v+"_2").removeClass("ui-state-active"));!0===a("#"+s).data("disabled")&&(a(".confirm","#"+a.jgrid.jqID(x.themodal)).hide(),a("#"+s).data("disabled",!1));a(l).triggerHandler("jqGridAddEditBeforeShowForm",[a("#"+s),B]);G&&G.call(l,a("#"+s),B);a("#"+a.jgrid.jqID(x.themodal)).data("onClose",e[l.p.id].onClose);a.jgrid.viewModal("#"+a.jgrid.jqID(x.themodal),{gbox:"#gbox_"+a.jgrid.jqID(t),jqm:c.jqModal,jqM:!1,overlay:c.overlay,modal:c.modal,overlayClass:c.overlayClass});U||a("."+a.jgrid.jqID(c.overlayClass)).click(function(){if(!n())return!1;
a.jgrid.hideModal("#"+a.jgrid.jqID(x.themodal),{gb:"#gbox_"+a.jgrid.jqID(t),jqm:c.jqModal,onClose:e[l.p.id].onClose});return!1});a(l).triggerHandler("jqGridAddEditAfterShowForm",[a("#"+s),B]);C&&C.call(l,a("#"+s),B)}else{var ba=isNaN(c.dataheight)?c.dataheight:c.dataheight+"px",y=isNaN(c.datawidth)?c.datawidth:c.datawidth+"px",ba=a("<form name='FormPost' id='"+s+"' class='FormGrid' onSubmit='return false;' style='width:"+y+";overflow:auto;position:relative;height:"+ba+";'></form>").data("disabled",
!1),aa=a("<table id='"+w+"' class='EditTable' cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),y=a(l).triggerHandler("jqGridAddEditBeforeInitData",[a("#"+s),B]);void 0===y&&(y=!0);y&&z&&(y=z.call(l,a("#"+s),B));if(!1===y)return;p();a(l.p.colModel).each(function(){var a=this.formoptions;H=Math.max(H,a?a.colpos||0:0);T=Math.max(T,a?a.rowpos||0:0)});a(ba).append(aa);z=a("<tr id='FormError' style='display:none'><td class='ui-state-error' colspan='"+2*H+"'></td></tr>");z[0].rp=0;a(aa).append(z);
z=a("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+2*H+"'>"+e[l.p.id].topinfo+"</td></tr>");z[0].rp=0;a(aa).append(z);var y=(z="rtl"===l.p.direction?!0:!1)?"nData":"pData",Z=z?"pData":"nData";b(d,l,aa,H);var y="<a id='"+y+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></a>",Z="<a id='"+Z+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></a>",ea="<a id='sData' class='fm-button ui-state-default ui-corner-all'>"+
c.bSubmit+"</a>",ca="<a id='cData' class='fm-button ui-state-default ui-corner-all'>"+c.bCancel+"</a>",w="<table border='0' cellspacing='0' cellpadding='0' class='EditTable' id='"+w+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton'>"+(z?Z+y:y+Z)+"</td><td class='EditButton'>"+ea+ca+"</td></tr>"+("<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+e[l.p.id].bottominfo+"</td></tr>"),w=w+"</tbody></table>";
if(0<T){var ga=[];a.each(a(aa)[0].rows,function(a,b){ga[a]=b});ga.sort(function(a,b){return a.rp>b.rp?1:a.rp<b.rp?-1:0});a.each(ga,function(b,c){a("tbody",aa).append(c)})}c.gbox="#gbox_"+a.jgrid.jqID(t);var ha=!1;!0===c.closeOnEscape&&(c.closeOnEscape=!1,ha=!0);w=a("<div></div>").append(ba).append(w);a.jgrid.createModal(x,w,c,"#gview_"+a.jgrid.jqID(l.p.id),a("#gbox_"+a.jgrid.jqID(l.p.id))[0]);z&&(a("#pData, #nData",v+"_2").css("float","right"),a(".EditButton",v+"_2").css("text-align","left"));e[l.p.id].topinfo&&
a(".tinfo",v).show();e[l.p.id].bottominfo&&a(".binfo",v+"_2").show();w=w=null;a("#"+a.jgrid.jqID(x.themodal)).keydown(function(b){var d=b.target;if(!0===a("#"+s).data("disabled"))return!1;if(!0===e[l.p.id].savekey[0]&&b.which===e[l.p.id].savekey[1]&&"TEXTAREA"!==d.tagName)return a("#sData",v+"_2").trigger("click"),!1;if(27===b.which){if(!n())return!1;ha&&a.jgrid.hideModal("#"+a.jgrid.jqID(x.themodal),{gb:c.gbox,jqm:c.jqModal,onClose:e[l.p.id].onClose});return!1}if(!0===e[l.p.id].navkeys[0]){if("_empty"===
a("#id_g",v).val())return!0;if(b.which===e[l.p.id].navkeys[1])return a("#pData",v+"_2").trigger("click"),!1;if(b.which===e[l.p.id].navkeys[2])return a("#nData",v+"_2").trigger("click"),!1}});c.checkOnUpdate&&(a("a.ui-jqdialog-titlebar-close span","#"+a.jgrid.jqID(x.themodal)).removeClass("jqmClose"),a("a.ui-jqdialog-titlebar-close","#"+a.jgrid.jqID(x.themodal)).unbind("click").click(function(){if(!n())return!1;a.jgrid.hideModal("#"+a.jgrid.jqID(x.themodal),{gb:"#gbox_"+a.jgrid.jqID(t),jqm:c.jqModal,
onClose:e[l.p.id].onClose});return!1}));c.saveicon=a.extend([!0,"left","ui-icon-disk"],c.saveicon);c.closeicon=a.extend([!0,"left","ui-icon-close"],c.closeicon);!0===c.saveicon[0]&&a("#sData",v+"_2").addClass("right"===c.saveicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+c.saveicon[2]+"'></span>");!0===c.closeicon[0]&&a("#cData",v+"_2").addClass("right"===c.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+c.closeicon[2]+
"'></span>");if(e[l.p.id].checkOnSubmit||e[l.p.id].checkOnUpdate)ea="<a id='sNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+c.bYes+"</a>",Z="<a id='nNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+c.bNo+"</a>",ca="<a id='cNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+c.bExit+"</a>",w=c.zIndex||999,w++,a("<div class='"+c.overlayClass+" jqgrid-overlay confirm' style='z-index:"+w+";display:none;'>&#160;</div><div class='confirm ui-widget-content ui-jqconfirm' style='z-index:"+
(w+1)+"'>"+c.saveData+"<br/><br/>"+ea+Z+ca+"</div>").insertAfter("#"+s),a("#sNew","#"+a.jgrid.jqID(x.themodal)).click(function(){k();a("#"+s).data("disabled",!1);a(".confirm","#"+a.jgrid.jqID(x.themodal)).hide();return!1}),a("#nNew","#"+a.jgrid.jqID(x.themodal)).click(function(){a(".confirm","#"+a.jgrid.jqID(x.themodal)).hide();a("#"+s).data("disabled",!1);setTimeout(function(){a(":input:visible","#"+s)[0].focus()},0);return!1}),a("#cNew","#"+a.jgrid.jqID(x.themodal)).click(function(){a(".confirm",
"#"+a.jgrid.jqID(x.themodal)).hide();a("#"+s).data("disabled",!1);a.jgrid.hideModal("#"+a.jgrid.jqID(x.themodal),{gb:"#gbox_"+a.jgrid.jqID(t),jqm:c.jqModal,onClose:e[l.p.id].onClose});return!1});a(l).triggerHandler("jqGridAddEditInitializeForm",[a("#"+s),B]);S&&S.call(l,a("#"+s),B);"_empty"!==d&&e[l.p.id].viewPagerButtons?a("#pData,#nData",v+"_2").show():a("#pData,#nData",v+"_2").hide();a(l).triggerHandler("jqGridAddEditBeforeShowForm",[a("#"+s),B]);G&&G.call(l,a("#"+s),B);a("#"+a.jgrid.jqID(x.themodal)).data("onClose",
e[l.p.id].onClose);a.jgrid.viewModal("#"+a.jgrid.jqID(x.themodal),{gbox:"#gbox_"+a.jgrid.jqID(t),jqm:c.jqModal,overlay:c.overlay,modal:c.modal,overlayClass:c.overlayClass});U||a("."+a.jgrid.jqID(c.overlayClass)).click(function(){if(!n())return!1;a.jgrid.hideModal("#"+a.jgrid.jqID(x.themodal),{gb:"#gbox_"+a.jgrid.jqID(t),jqm:c.jqModal,onClose:e[l.p.id].onClose});return!1});a(l).triggerHandler("jqGridAddEditAfterShowForm",[a("#"+s),B]);C&&C.call(l,a("#"+s),B);a(".fm-button","#"+a.jgrid.jqID(x.themodal)).hover(function(){a(this).addClass("ui-state-hover")},
function(){a(this).removeClass("ui-state-hover")});a("#sData",v+"_2").click(function(){u={};a("#FormError",v).hide();g();"_empty"===u[l.p.id+"_id"]?k():!0===c.checkOnSubmit?(P=m(u,e[l.p.id]._savedData))?(a("#"+s).data("disabled",!0),a(".confirm","#"+a.jgrid.jqID(x.themodal)).show()):k():k();return!1});a("#cData",v+"_2").click(function(){if(!n())return!1;a.jgrid.hideModal("#"+a.jgrid.jqID(x.themodal),{gb:"#gbox_"+a.jgrid.jqID(t),jqm:c.jqModal,onClose:e[l.p.id].onClose});return!1});a("#nData",v+"_2").click(function(){if(!n())return!1;
a("#FormError",v).hide();var b=q();b[0]=parseInt(b[0],10);if(-1!==b[0]&&b[1][b[0]+1]){a(l).triggerHandler("jqGridAddEditClickPgButtons",["next",a("#"+s),b[1][b[0]]]);var d;if(a.isFunction(c.onclickPgButtons)&&(d=c.onclickPgButtons.call(l,"next",a("#"+s),b[1][b[0]]),void 0!==d&&!1===d)||a("#"+a.jgrid.jqID(b[1][b[0]+1])).hasClass("ui-state-disabled"))return!1;h(b[1][b[0]+1],l,s);a(l).jqGrid("setSelection",b[1][b[0]+1]);a(l).triggerHandler("jqGridAddEditAfterClickPgButtons",["next",a("#"+s),b[1][b[0]]]);
a.isFunction(c.afterclickPgButtons)&&c.afterclickPgButtons.call(l,"next",a("#"+s),b[1][b[0]+1]);r(b[0]+1,b)}return!1});a("#pData",v+"_2").click(function(){if(!n())return!1;a("#FormError",v).hide();var b=q();if(-1!==b[0]&&b[1][b[0]-1]){a(l).triggerHandler("jqGridAddEditClickPgButtons",["prev",a("#"+s),b[1][b[0]]]);var d;if(a.isFunction(c.onclickPgButtons)&&(d=c.onclickPgButtons.call(l,"prev",a("#"+s),b[1][b[0]]),void 0!==d&&!1===d)||a("#"+a.jgrid.jqID(b[1][b[0]-1])).hasClass("ui-state-disabled"))return!1;
h(b[1][b[0]-1],l,s);a(l).jqGrid("setSelection",b[1][b[0]-1]);a(l).triggerHandler("jqGridAddEditAfterClickPgButtons",["prev",a("#"+s),b[1][b[0]]]);a.isFunction(c.afterclickPgButtons)&&c.afterclickPgButtons.call(l,"prev",a("#"+s),b[1][b[0]-1]);r(b[0]-1,b)}return!1})}G=q();r(G[0],G)}})},viewGridRow:function(d,c){c=a.extend(!0,{top:0,left:0,width:0,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,jqModal:!0,closeOnEscape:!1,labelswidth:"30%",closeicon:[],navkeys:[!1,
38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,recreateForm:!1},a.jgrid.view,c||{});e[a(this)[0].p.id]=c;return this.each(function(){function g(){!0!==e[m.p.id].closeOnEscape&&!0!==e[m.p.id].navkeys[0]||setTimeout(function(){a(".ui-jqdialog-titlebar-close","#"+a.jgrid.jqID(t.modalhead)).focus()},0)}function b(b,d,e,f){var g,k,h,l=0,m,n,p=[],q=!1,r,s="<td class='CaptionTD form-view-label ui-widget-content' width='"+c.labelswidth+"'>&#160;</td><td class='DataTD form-view-data ui-helper-reset ui-widget-content'>&#160;</td>",
t="",v=["integer","number","currency"],w=0,x=0,z,C,G;for(r=1;r<=f;r++)t+=1===r?s:"<td class='CaptionTD form-view-label ui-widget-content'>&#160;</td><td class='DataTD form-view-data ui-widget-content'>&#160;</td>";a(d.p.colModel).each(function(){(k=this.editrules&&!0===this.editrules.edithidden?!1:!0===this.hidden?!0:!1)||"right"!==this.align||(this.formatter&&-1!==a.inArray(this.formatter,v)?w=Math.max(w,parseInt(this.width,10)):x=Math.max(x,parseInt(this.width,10)))});z=0!==w?w:0!==x?x:0;q=a(d).jqGrid("getInd",
b);a(d.p.colModel).each(function(b){g=this.name;C=!1;n=(k=this.editrules&&!0===this.editrules.edithidden?!1:!0===this.hidden?!0:!1)?"style='display:none'":"";G="boolean"!==typeof this.viewable?!0:this.viewable;if("cb"!==g&&"subgrid"!==g&&"rn"!==g&&G){m=!1===q?"":g===d.p.ExpandColumn&&!0===d.p.treeGrid?a("td:eq("+b+")",d.rows[q]).text():a("td:eq("+b+")",d.rows[q]).html();C="right"===this.align&&0!==z?!0:!1;var c=a.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),r=parseInt(c.rowpos,10)||
l+1,s=parseInt(2*(parseInt(c.colpos,10)||1),10);if(c.rowabove){var y=a("<tr><td class='contentinfo' colspan='"+2*f+"'>"+c.rowcontent+"</td></tr>");a(e).append(y);y[0].rp=r}h=a(e).find("tr[rowpos="+r+"]");0===h.length&&(h=a("<tr "+n+" rowpos='"+r+"'></tr>").addClass("FormData").attr("id","trv_"+g),a(h).append(t),a(e).append(h),h[0].rp=r);a("td:eq("+(s-2)+")",h[0]).html("<b>"+(void 0===c.label?d.p.colNames[b]:c.label)+"</b>");a("td:eq("+(s-1)+")",h[0]).append("<span>"+m+"</span>").attr("id","v_"+g);
C&&a("td:eq("+(s-1)+") span",h[0]).css({"text-align":"right",width:z+"px"});p[l]=b;l++}});0<l&&(b=a("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*f-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+b+"'/></td></tr>"),b[0].rp=l+99,a(e).append(b));return p}function h(b,c){var d,e,f=0,g,k;if(k=a(c).jqGrid("getInd",b,!0))a("td",k).each(function(b){d=c.p.colModel[b].name;e=c.p.colModel[b].editrules&&!0===c.p.colModel[b].editrules.edithidden?
!1:!0===c.p.colModel[b].hidden?!0:!1;"cb"!==d&&"subgrid"!==d&&"rn"!==d&&(g=d===c.p.ExpandColumn&&!0===c.p.treeGrid?a(this).text():a(this).html(),d=a.jgrid.jqID("v_"+d),a("#"+d+" span","#"+r).html(g),e&&a("#"+d,"#"+r).parents("tr:first").hide(),f++)}),0<f&&a("#id_g","#"+r).val(b)}function f(b,c){var d=c[1].length-1;0===b?a("#pData","#"+r+"_2").addClass("ui-state-disabled"):void 0!==c[1][b-1]&&a("#"+a.jgrid.jqID(c[1][b-1])).hasClass("ui-state-disabled")?a("#pData",r+"_2").addClass("ui-state-disabled"):
a("#pData","#"+r+"_2").removeClass("ui-state-disabled");b===d?a("#nData","#"+r+"_2").addClass("ui-state-disabled"):void 0!==c[1][b+1]&&a("#"+a.jgrid.jqID(c[1][b+1])).hasClass("ui-state-disabled")?a("#nData",r+"_2").addClass("ui-state-disabled"):a("#nData","#"+r+"_2").removeClass("ui-state-disabled")}function k(){var b=a(m).jqGrid("getDataIDs"),c=a("#id_g","#"+r).val();return[a.inArray(c,b),b]}var m=this;if(m.grid&&d){var n=m.p.id,p="ViewGrid_"+a.jgrid.jqID(n),r="ViewTbl_"+a.jgrid.jqID(n),q="ViewGrid_"+
n,l="ViewTbl_"+n,t={themodal:"viewmod"+n,modalhead:"viewhd"+n,modalcontent:"viewcnt"+n,scrollelm:p},s=a.isFunction(e[m.p.id].beforeInitData)?e[m.p.id].beforeInitData:!1,w=!0,v=1,x=0;!0===c.recreateForm&&void 0!==a("#"+a.jgrid.jqID(t.themodal))[0]&&a("#"+a.jgrid.jqID(t.themodal)).remove();if(void 0!==a("#"+a.jgrid.jqID(t.themodal))[0]){s&&(w=s.call(m,a("#"+p)),void 0===w&&(w=!0));if(!1===w)return;a(".ui-jqdialog-title","#"+a.jgrid.jqID(t.modalhead)).html(c.caption);a("#FormError","#"+r).hide();h(d,
m);a.isFunction(e[m.p.id].beforeShowForm)&&e[m.p.id].beforeShowForm.call(m,a("#"+p));a.jgrid.viewModal("#"+a.jgrid.jqID(t.themodal),{gbox:"#gbox_"+a.jgrid.jqID(n),jqm:c.jqModal,jqM:!1,overlay:c.overlay,modal:c.modal});g()}else{var G=isNaN(c.dataheight)?c.dataheight:c.dataheight+"px",C=isNaN(c.datawidth)?c.datawidth:c.datawidth+"px",q=a("<form name='FormPost' id='"+q+"' class='FormGrid' style='width:"+C+";overflow:auto;position:relative;height:"+G+";'></form>"),z=a("<table id='"+l+"' class='EditTable' cellspacing='1' cellpadding='2' border='0' style='table-layout:fixed'><tbody></tbody></table>");
s&&(w=s.call(m,a("#"+p)),void 0===w&&(w=!0));if(!1===w)return;a(m.p.colModel).each(function(){var a=this.formoptions;v=Math.max(v,a?a.colpos||0:0);x=Math.max(x,a?a.rowpos||0:0)});a(q).append(z);b(d,m,z,v);l="rtl"===m.p.direction?!0:!1;s="<a id='"+(l?"nData":"pData")+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></a>";w="<a id='"+(l?"pData":"nData")+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></a>";
G="<a id='cData' class='fm-button ui-state-default ui-corner-all'>"+c.bClose+"</a>";if(0<x){var S=[];a.each(a(z)[0].rows,function(a,b){S[a]=b});S.sort(function(a,b){return a.rp>b.rp?1:a.rp<b.rp?-1:0});a.each(S,function(b,c){a("tbody",z).append(c)})}c.gbox="#gbox_"+a.jgrid.jqID(n);q=a("<div></div>").append(q).append("<table border='0' class='EditTable' id='"+r+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+c.labelswidth+"'>"+(l?w+s:s+w)+"</td><td class='EditButton'>"+G+"</td></tr></tbody></table>");
a.jgrid.createModal(t,q,c,"#gview_"+a.jgrid.jqID(m.p.id),a("#gview_"+a.jgrid.jqID(m.p.id))[0]);l&&(a("#pData, #nData","#"+r+"_2").css("float","right"),a(".EditButton","#"+r+"_2").css("text-align","left"));c.viewPagerButtons||a("#pData, #nData","#"+r+"_2").hide();q=null;a("#"+t.themodal).keydown(function(b){if(27===b.which)return e[m.p.id].closeOnEscape&&a.jgrid.hideModal("#"+a.jgrid.jqID(t.themodal),{gb:c.gbox,jqm:c.jqModal,onClose:c.onClose}),!1;if(!0===c.navkeys[0]){if(b.which===c.navkeys[1])return a("#pData",
"#"+r+"_2").trigger("click"),!1;if(b.which===c.navkeys[2])return a("#nData","#"+r+"_2").trigger("click"),!1}});c.closeicon=a.extend([!0,"left","ui-icon-close"],c.closeicon);!0===c.closeicon[0]&&a("#cData","#"+r+"_2").addClass("right"===c.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+c.closeicon[2]+"'></span>");a.isFunction(c.beforeShowForm)&&c.beforeShowForm.call(m,a("#"+p));a.jgrid.viewModal("#"+a.jgrid.jqID(t.themodal),{gbox:"#gbox_"+a.jgrid.jqID(n),jqm:c.jqModal,
overlay:c.overlay,modal:c.modal});a(".fm-button:not(.ui-state-disabled)","#"+r+"_2").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});g();a("#cData","#"+r+"_2").click(function(){a.jgrid.hideModal("#"+a.jgrid.jqID(t.themodal),{gb:"#gbox_"+a.jgrid.jqID(n),jqm:c.jqModal,onClose:c.onClose});return!1});a("#nData","#"+r+"_2").click(function(){a("#FormError","#"+r).hide();var b=k();b[0]=parseInt(b[0],10);-1!==b[0]&&b[1][b[0]+1]&&(a.isFunction(c.onclickPgButtons)&&
c.onclickPgButtons.call(m,"next",a("#"+p),b[1][b[0]]),h(b[1][b[0]+1],m),a(m).jqGrid("setSelection",b[1][b[0]+1]),a.isFunction(c.afterclickPgButtons)&&c.afterclickPgButtons.call(m,"next",a("#"+p),b[1][b[0]+1]),f(b[0]+1,b));g();return!1});a("#pData","#"+r+"_2").click(function(){a("#FormError","#"+r).hide();var b=k();-1!==b[0]&&b[1][b[0]-1]&&(a.isFunction(c.onclickPgButtons)&&c.onclickPgButtons.call(m,"prev",a("#"+p),b[1][b[0]]),h(b[1][b[0]-1],m),a(m).jqGrid("setSelection",b[1][b[0]-1]),a.isFunction(c.afterclickPgButtons)&&
c.afterclickPgButtons.call(m,"prev",a("#"+p),b[1][b[0]-1]),f(b[0]-1,b));g();return!1})}q=k();f(q[0],q)}})},delGridRow:function(d,c){c=a.extend(!0,{top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:!0,closeOnEscape:!1,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:!1,
serializeDelData:null,useDataProxy:!1},a.jgrid.del,c||{});e[a(this)[0].p.id]=c;return this.each(function(){var g=this;if(g.grid&&d){var b=a.isFunction(e[g.p.id].beforeShowForm),h=a.isFunction(e[g.p.id].afterShowForm),f=a.isFunction(e[g.p.id].beforeInitData)?e[g.p.id].beforeInitData:!1,k=g.p.id,m={},n=!0,p="DelTbl_"+a.jgrid.jqID(k),r,q,l,t,s="DelTbl_"+k,w={themodal:"delmod"+k,modalhead:"delhd"+k,modalcontent:"delcnt"+k,scrollelm:p};a.isArray(d)&&(d=d.join());if(void 0!==a("#"+a.jgrid.jqID(w.themodal))[0]){f&&
(n=f.call(g,a("#"+p)),void 0===n&&(n=!0));if(!1===n)return;a("#DelData>td","#"+p).text(d);a("#DelError","#"+p).hide();!0===e[g.p.id].processing&&(e[g.p.id].processing=!1,a("#dData","#"+p).removeClass("ui-state-active"));b&&e[g.p.id].beforeShowForm.call(g,a("#"+p));a.jgrid.viewModal("#"+a.jgrid.jqID(w.themodal),{gbox:"#gbox_"+a.jgrid.jqID(k),jqm:e[g.p.id].jqModal,jqM:!1,overlay:e[g.p.id].overlay,modal:e[g.p.id].modal})}else{var v=isNaN(e[g.p.id].dataheight)?e[g.p.id].dataheight:e[g.p.id].dataheight+
"px",x=isNaN(c.datawidth)?c.datawidth:c.datawidth+"px",s="<div id='"+s+"' class='formdata' style='width:"+x+";overflow:auto;position:relative;height:"+v+";'><table class='DelTable'><tbody>",s=s+"<tr id='DelError' style='display:none'><td class='ui-state-error'></td></tr>",s=s+("<tr id='DelData' style='display:none'><td >"+d+"</td></tr>"),s=s+('<tr><td class="delmsg" style="white-space:pre;">'+e[g.p.id].msg+"</td></tr><tr><td >&#160;</td></tr>"),s=s+"</tbody></table></div>",s=s+("<table cellspacing='0' cellpadding='0' border='0' class='EditTable' id='"+
p+"_2'><tbody><tr><td><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton'>"+("<a id='dData' class='fm-button ui-state-default ui-corner-all'>"+c.bSubmit+"</a>")+"&#160;"+("<a id='eData' class='fm-button ui-state-default ui-corner-all'>"+c.bCancel+"</a>")+"</td></tr></tbody></table>");c.gbox="#gbox_"+a.jgrid.jqID(k);a.jgrid.createModal(w,s,c,"#gview_"+a.jgrid.jqID(g.p.id),a("#gview_"+a.jgrid.jqID(g.p.id))[0]);f&&(n=f.call(g,a("#"+p)),void 0===n&&(n=!0));
if(!1===n)return;a(".fm-button","#"+p+"_2").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});c.delicon=a.extend([!0,"left","ui-icon-scissors"],e[g.p.id].delicon);c.cancelicon=a.extend([!0,"left","ui-icon-cancel"],e[g.p.id].cancelicon);!0===c.delicon[0]&&a("#dData","#"+p+"_2").addClass("right"===c.delicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+c.delicon[2]+"'></span>");!0===c.cancelicon[0]&&a("#eData","#"+
p+"_2").addClass("right"===c.cancelicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+c.cancelicon[2]+"'></span>");a("#dData","#"+p+"_2").click(function(){var b=[!0,""],d,f=a("#DelData>td","#"+p).text();m={};a.isFunction(e[g.p.id].onclickSubmit)&&(m=e[g.p.id].onclickSubmit.call(g,e[g.p.id],f)||{});a.isFunction(e[g.p.id].beforeSubmit)&&(b=e[g.p.id].beforeSubmit.call(g,f));if(b[0]&&!e[g.p.id].processing){e[g.p.id].processing=!0;l=g.p.prmNames;r=a.extend({},e[g.p.id].delData,
m);t=l.oper;r[t]=l.deloper;q=l.id;f=String(f).split(",");if(!f.length)return!1;for(d in f)f.hasOwnProperty(d)&&(f[d]=a.jgrid.stripPref(g.p.idPrefix,f[d]));r[q]=f.join();a(this).addClass("ui-state-active");d=a.extend({url:e[g.p.id].url||a(g).jqGrid("getGridParam","editurl"),type:e[g.p.id].mtype,data:a.isFunction(e[g.p.id].serializeDelData)?e[g.p.id].serializeDelData.call(g,r):r,complete:function(d,h){var l;300<=d.status&&304!==d.status?(b[0]=!1,a.isFunction(e[g.p.id].errorTextFormat)?b[1]=e[g.p.id].errorTextFormat.call(g,
d):b[1]=h+" Status: '"+d.statusText+"'. Error code: "+d.status):a.isFunction(e[g.p.id].afterSubmit)&&(b=e[g.p.id].afterSubmit.call(g,d,r));if(!1===b[0])a("#DelError>td","#"+p).html(b[1]),a("#DelError","#"+p).show();else{if(e[g.p.id].reloadAfterSubmit&&"local"!==g.p.datatype)a(g).trigger("reloadGrid");else{if(!0===g.p.treeGrid)try{a(g).jqGrid("delTreeNode",g.p.idPrefix+f[0])}catch(m){}else for(l=0;l<f.length;l++)a(g).jqGrid("delRowData",g.p.idPrefix+f[l]);g.p.selrow=null;g.p.selarrrow=[]}a.isFunction(e[g.p.id].afterComplete)&&
setTimeout(function(){e[g.p.id].afterComplete.call(g,d,f)},500)}e[g.p.id].processing=!1;a("#dData","#"+p+"_2").removeClass("ui-state-active");b[0]&&a.jgrid.hideModal("#"+a.jgrid.jqID(w.themodal),{gb:"#gbox_"+a.jgrid.jqID(k),jqm:c.jqModal,onClose:e[g.p.id].onClose})}},a.jgrid.ajaxOptions,e[g.p.id].ajaxDelOptions);d.url||e[g.p.id].useDataProxy||(a.isFunction(g.p.dataProxy)?e[g.p.id].useDataProxy=!0:(b[0]=!1,b[1]+=" "+a.jgrid.errors.nourl));b[0]&&(e[g.p.id].useDataProxy?(d=g.p.dataProxy.call(g,d,"del_"+
g.p.id),void 0===d&&(d=[!0,""]),!1===d[0]?(b[0]=!1,b[1]=d[1]||"Error deleting the selected row!"):a.jgrid.hideModal("#"+a.jgrid.jqID(w.themodal),{gb:"#gbox_"+a.jgrid.jqID(k),jqm:c.jqModal,onClose:e[g.p.id].onClose})):a.ajax(d))}!1===b[0]&&(a("#DelError>td","#"+p).html(b[1]),a("#DelError","#"+p).show());return!1});a("#eData","#"+p+"_2").click(function(){a.jgrid.hideModal("#"+a.jgrid.jqID(w.themodal),{gb:"#gbox_"+a.jgrid.jqID(k),jqm:e[g.p.id].jqModal,onClose:e[g.p.id].onClose});return!1});b&&e[g.p.id].beforeShowForm.call(g,
a("#"+p));a.jgrid.viewModal("#"+a.jgrid.jqID(w.themodal),{gbox:"#gbox_"+a.jgrid.jqID(k),jqm:e[g.p.id].jqModal,overlay:e[g.p.id].overlay,modal:e[g.p.id].modal})}h&&e[g.p.id].afterShowForm.call(g,a("#"+p));!0===e[g.p.id].closeOnEscape&&setTimeout(function(){a(".ui-jqdialog-titlebar-close","#"+a.jgrid.jqID(w.modalhead)).focus()},0)}})},navGrid:function(d,c,e,b,h,f,k){c=a.extend({edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",del:!0,delicon:"ui-icon-trash",search:!0,searchicon:"ui-icon-search",
refresh:!0,refreshicon:"ui-icon-refresh",refreshstate:"firstpage",view:!1,viewicon:"ui-icon-document",position:"left",closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null},a.jgrid.nav,c||{});return this.each(function(){if(!this.nav){var m={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id},n=this,p;if(n.grid&&"string"===typeof d){void 0===a("#"+m.themodal)[0]&&
(c.alerttop||c.alertleft||(void 0!==window.innerWidth?(c.alertleft=window.innerWidth,c.alerttop=window.innerHeight):void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(c.alertleft=document.documentElement.clientWidth,c.alerttop=document.documentElement.clientHeight):(c.alertleft=1024,c.alerttop=768),c.alertleft=c.alertleft/2-parseInt(c.alertwidth,10)/2,c.alerttop=c.alerttop/2-25),a.jgrid.createModal(m,"<div>"+c.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>",
{gbox:"#gbox_"+a.jgrid.jqID(n.p.id),jqModal:!0,drag:!0,resize:!0,caption:c.alertcap,top:c.alerttop,left:c.alertleft,width:c.alertwidth,height:c.alertheight,closeOnEscape:c.closeOnEscape,zIndex:c.alertzIndex},"#gview_"+a.jgrid.jqID(n.p.id),a("#gbox_"+a.jgrid.jqID(n.p.id))[0],!0));var r=1,q,l=function(){a(this).hasClass("ui-state-disabled")||a(this).addClass("ui-state-hover")},t=function(){a(this).removeClass("ui-state-hover")};c.cloneToTop&&n.p.toppager&&(r=2);for(q=0;q<r;q++){var s=a("<table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table navtable' style='float:left;table-layout:auto;'><tbody><tr></tr></tbody></table>"),
w,v;0===q?(w=d,v=n.p.id,w===n.p.toppager&&(v+="_top",r=1)):(w=n.p.toppager,v=n.p.id+"_top");"rtl"===n.p.direction&&a(s).attr("dir","rtl").css("float","right");c.add&&(b=b||{},p=a("<td class='ui-pg-button ui-corner-all'></td>"),a(p).append("<div class='ui-pg-div'><span class='ui-icon "+c.addicon+"'></span>"+c.addtext+"</div>"),a("tr",s).append(p),a(p,s).attr({title:c.addtitle||"",id:b.id||"add_"+v}).click(function(){a(this).hasClass("ui-state-disabled")||(a.isFunction(c.addfunc)?c.addfunc.call(n):
a(n).jqGrid("editGridRow","new",b));return!1}).hover(l,t),p=null);c.edit&&(p=a("<td class='ui-pg-button ui-corner-all'></td>"),e=e||{},a(p).append("<div class='ui-pg-div'><span class='ui-icon "+c.editicon+"'></span>"+c.edittext+"</div>"),a("tr",s).append(p),a(p,s).attr({title:c.edittitle||"",id:e.id||"edit_"+v}).click(function(){if(!a(this).hasClass("ui-state-disabled")){var b=n.p.selrow;b?a.isFunction(c.editfunc)?c.editfunc.call(n,b):a(n).jqGrid("editGridRow",b,e):(a.jgrid.viewModal("#"+m.themodal,
{gbox:"#gbox_"+a.jgrid.jqID(n.p.id),jqm:!0}),a("#jqg_alrt").focus())}return!1}).hover(l,t),p=null);c.view&&(p=a("<td class='ui-pg-button ui-corner-all'></td>"),k=k||{},a(p).append("<div class='ui-pg-div'><span class='ui-icon "+c.viewicon+"'></span>"+c.viewtext+"</div>"),a("tr",s).append(p),a(p,s).attr({title:c.viewtitle||"",id:k.id||"view_"+v}).click(function(){if(!a(this).hasClass("ui-state-disabled")){var b=n.p.selrow;b?a.isFunction(c.viewfunc)?c.viewfunc.call(n,b):a(n).jqGrid("viewGridRow",b,k):
(a.jgrid.viewModal("#"+m.themodal,{gbox:"#gbox_"+a.jgrid.jqID(n.p.id),jqm:!0}),a("#jqg_alrt").focus())}return!1}).hover(l,t),p=null);c.del&&(p=a("<td class='ui-pg-button ui-corner-all'></td>"),h=h||{},a(p).append("<div class='ui-pg-div'><span class='ui-icon "+c.delicon+"'></span>"+c.deltext+"</div>"),a("tr",s).append(p),a(p,s).attr({title:c.deltitle||"",id:h.id||"del_"+v}).click(function(){if(!a(this).hasClass("ui-state-disabled")){var b;n.p.multiselect?(b=n.p.selarrrow,0===b.length&&(b=null)):b=
n.p.selrow;b?a.isFunction(c.delfunc)?c.delfunc.call(n,b):a(n).jqGrid("delGridRow",b,h):(a.jgrid.viewModal("#"+m.themodal,{gbox:"#gbox_"+a.jgrid.jqID(n.p.id),jqm:!0}),a("#jqg_alrt").focus())}return!1}).hover(l,t),p=null);(c.add||c.edit||c.del||c.view)&&a("tr",s).append("<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>");c.search&&(p=a("<td class='ui-pg-button ui-corner-all'></td>"),f=f||{},a(p).append("<div class='ui-pg-div'><span class='ui-icon "+
c.searchicon+"'></span>"+c.searchtext+"</div>"),a("tr",s).append(p),a(p,s).attr({title:c.searchtitle||"",id:f.id||"search_"+v}).click(function(){a(this).hasClass("ui-state-disabled")||(a.isFunction(c.searchfunc)?c.searchfunc.call(n,f):a(n).jqGrid("searchGrid",f));return!1}).hover(l,t),f.showOnLoad&&!0===f.showOnLoad&&a(p,s).click(),p=null);c.refresh&&(p=a("<td class='ui-pg-button ui-corner-all'></td>"),a(p).append("<div class='ui-pg-div'><span class='ui-icon "+c.refreshicon+"'></span>"+c.refreshtext+
"</div>"),a("tr",s).append(p),a(p,s).attr({title:c.refreshtitle||"",id:"refresh_"+v}).click(function(){if(!a(this).hasClass("ui-state-disabled")){a.isFunction(c.beforeRefresh)&&c.beforeRefresh.call(n);n.p.search=!1;try{var b=n.p.id;n.p.postData.filters="";try{a("#fbox_"+a.jgrid.jqID(b)).jqFilter("resetFilter")}catch(d){}a.isFunction(n.clearToolbar)&&n.clearToolbar.call(n,!1)}catch(e){}switch(c.refreshstate){case "firstpage":a(n).trigger("reloadGrid",[{page:1}]);break;case "current":a(n).trigger("reloadGrid",
[{current:!0}])}a.isFunction(c.afterRefresh)&&c.afterRefresh.call(n)}return!1}).hover(l,t),p=null);p=a(".ui-jqgrid").css("font-size")||"11px";a("body").append("<div id='testpg2' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+p+";visibility:hidden;' ></div>");p=a(s).clone().appendTo("#testpg2").width();a("#testpg2").remove();a(w+"_"+c.position,w).append(s);n.p._nvtd&&(p>n.p._nvtd[0]&&(a(w+"_"+c.position,w).width(p),n.p._nvtd[0]=p),n.p._nvtd[1]=p);s=p=p=null;this.nav=!0}}}})},navButtonAdd:function(d,
c){c=a.extend({caption:"newButton",title:"",buttonicon:"ui-icon-newwin",onClickButton:null,position:"last",cursor:"pointer"},c||{});return this.each(function(){if(this.grid){"string"===typeof d&&0!==d.indexOf("#")&&(d="#"+a.jgrid.jqID(d));var e=a(".navtable",d)[0],b=this;if(e&&(!c.id||void 0===a("#"+a.jgrid.jqID(c.id),e)[0])){var h=a("<td></td>");"NONE"===c.buttonicon.toString().toUpperCase()?a(h).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'>"+c.caption+"</div>"):a(h).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'><span class='ui-icon "+
c.buttonicon+"'></span>"+c.caption+"</div>");c.id&&a(h).attr("id",c.id);"first"===c.position?0===e.rows[0].cells.length?a("tr",e).append(h):a("tr td:eq(0)",e).before(h):a("tr",e).append(h);a(h,e).attr("title",c.title||"").click(function(d){a(this).hasClass("ui-state-disabled")||a.isFunction(c.onClickButton)&&c.onClickButton.call(b,d);return!1}).hover(function(){a(this).hasClass("ui-state-disabled")||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")})}}})},navSeparatorAdd:function(d,
c){c=a.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},c||{});return this.each(function(){if(this.grid){"string"===typeof d&&0!==d.indexOf("#")&&(d="#"+a.jgrid.jqID(d));var e=a(".navtable",d)[0];if(e){var b="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='"+c.sepclass+"'></span>"+c.sepcontent+"</td>";"first"===c.position?0===e.rows[0].cells.length?a("tr",e).append(b):a("tr td:eq(0)",e).before(b):a("tr",e).append(b)}}})},GridToForm:function(d,c){return this.each(function(){var e=
this,b;if(e.grid){var h=a(e).jqGrid("getRowData",d);if(h)for(b in h)h.hasOwnProperty(b)&&(a("[name="+a.jgrid.jqID(b)+"]",c).is("input:radio")||a("[name="+a.jgrid.jqID(b)+"]",c).is("input:checkbox")?a("[name="+a.jgrid.jqID(b)+"]",c).each(function(){if(a(this).val()==h[b])a(this)[e.p.useProp?"prop":"attr"]("checked",!0);else a(this)[e.p.useProp?"prop":"attr"]("checked",!1)}):a("[name="+a.jgrid.jqID(b)+"]",c).val(h[b]))}})},FormToGrid:function(d,c,e,b){return this.each(function(){if(this.grid){e||(e=
"set");b||(b="first");var h=a(c).serializeArray(),f={};a.each(h,function(a,b){f[b.name]=b.value});"add"===e?a(this).jqGrid("addRowData",d,f,b):"set"===e&&a(this).jqGrid("setRowData",d,f)}})}})})(jQuery);
(function(a){a.jgrid.msie&&8===a.jgrid.msiever()&&(a.expr[":"].hidden=function(a){return 0===a.offsetWidth||0===a.offsetHeight||"none"===a.style.display});a.jgrid._multiselect=!1;if(a.ui&&a.ui.multiselect){if(a.ui.multiselect.prototype._setSelected){var e=a.ui.multiselect.prototype._setSelected;a.ui.multiselect.prototype._setSelected=function(d,c){var g=e.call(this,d,c);if(c&&this.selectedList){var b=this.element;this.selectedList.find("li").each(function(){a(this).data("optionLink")&&a(this).data("optionLink").remove().appendTo(b)})}return g}}a.ui.multiselect.prototype.destroy&&
(a.ui.multiselect.prototype.destroy=function(){this.element.show();this.container.remove();void 0===a.Widget?a.widget.prototype.destroy.apply(this,arguments):a.Widget.prototype.destroy.apply(this,arguments)});a.jgrid._multiselect=!0}a.jgrid.extend({sortableColumns:function(d){return this.each(function(){function c(){e.p.disableClick=!0}var e=this,b=a.jgrid.jqID(e.p.id),b={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_"+b+"_cb,#jqgh_"+b+"_rn,#jqgh_"+b+"_subgrid),:hidden)",
placeholder:{element:function(b){return a(document.createElement(b[0].nodeName)).addClass(b[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0]},update:function(a,b){b.height(a.currentItem.innerHeight()-parseInt(a.currentItem.css("paddingTop")||0,10)-parseInt(a.currentItem.css("paddingBottom")||0,10));b.width(a.currentItem.innerWidth()-parseInt(a.currentItem.css("paddingLeft")||0,10)-parseInt(a.currentItem.css("paddingRight")||0,10))}},update:function(b,
c){var d=a(c.item).parent(),d=a(">th",d),h={},p=e.p.id+"_";a.each(e.p.colModel,function(a){h[this.name]=a});var r=[];d.each(function(){var b=a(">div",this).get(0).id.replace(/^jqgh_/,"").replace(p,"");h.hasOwnProperty(b)&&r.push(h[b])});a(e).jqGrid("remapColumns",r,!0,!0);a.isFunction(e.p.sortable.update)&&e.p.sortable.update(r);setTimeout(function(){e.p.disableClick=!1},50)}};e.p.sortable.options?a.extend(b,e.p.sortable.options):a.isFunction(e.p.sortable)&&(e.p.sortable={update:e.p.sortable});if(b.start){var h=
b.start;b.start=function(a,b){c();h.call(this,a,b)}}else b.start=c;e.p.sortable.exclude&&(b.items+=":not("+e.p.sortable.exclude+")");d.sortable(b).data("sortable").floating=!0})},columnChooser:function(d){function c(b,c){b&&("string"===typeof b?a.fn[b]&&a.fn[b].apply(c,a.makeArray(arguments).slice(2)):a.isFunction(b)&&b.apply(c,a.makeArray(arguments).slice(2)))}var e=this;if(!a("#colchooser_"+a.jgrid.jqID(e[0].p.id)).length){var b=a('<div id="colchooser_'+e[0].p.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>'),
h=a("select",b);d=a.extend({width:420,height:240,classname:null,done:function(a){a&&e.jqGrid("remapColumns",a,!0)},msel:"multiselect",dlog:"dialog",dialog_opts:{minWidth:470},dlog_opts:function(b){var c={};c[b.bSubmit]=function(){b.apply_perm();b.cleanup(!1)};c[b.bCancel]=function(){b.cleanup(!0)};return a.extend(!0,{buttons:c,close:function(){b.cleanup(!0)},modal:b.modal||!1,resizable:b.resizable||!0,width:b.width+20},b.dialog_opts||{})},apply_perm:function(){a("option",h).each(function(){this.selected?
e.jqGrid("showCol",f[this.value].name):e.jqGrid("hideCol",f[this.value].name)});var b=[];a("option:selected",h).each(function(){b.push(parseInt(this.value,10))});a.each(b,function(){delete m[f[parseInt(this,10)].name]});a.each(m,function(){var a=parseInt(this,10);var c=b,d=a;if(0<=d){var e=c.slice(),f=e.splice(d,Math.max(c.length-d,d));d>c.length&&(d=c.length);e[d]=a;b=e.concat(f)}else b=void 0});d.done&&d.done.call(e,b)},cleanup:function(a){c(d.dlog,b,"destroy");c(d.msel,h,"destroy");b.remove();
a&&d.done&&d.done.call(e)},msel_opts:{}},a.jgrid.col,d||{});if(a.ui&&a.ui.multiselect&&"multiselect"===d.msel){if(!a.jgrid._multiselect){alert("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");return}d.msel_opts=a.extend(a.ui.multiselect.defaults,d.msel_opts)}d.caption&&b.attr("title",d.caption);d.classname&&(b.addClass(d.classname),h.addClass(d.classname));d.width&&(a(">div",b).css({width:d.width,margin:"0 auto"}),h.css("width",d.width));d.height&&(a(">div",b).css("height",
d.height),h.css("height",d.height-10));var f=e.jqGrid("getGridParam","colModel"),k=e.jqGrid("getGridParam","colNames"),m={},n=[];h.empty();a.each(f,function(b){m[this.name]=b;this.hidedlg?this.hidden||n.push(b):h.append("<option value='"+b+"' "+(this.hidden?"":"selected='selected'")+">"+a.jgrid.stripHtml(k[b])+"</option>")});var p=a.isFunction(d.dlog_opts)?d.dlog_opts.call(e,d):d.dlog_opts;c(d.dlog,b,p);p=a.isFunction(d.msel_opts)?d.msel_opts.call(e,d):d.msel_opts;c(d.msel,h,p)}},sortableRows:function(d){return this.each(function(){var c=
this;c.grid&&!c.p.treeGrid&&a.fn.sortable&&(d=a.extend({cursor:"move",axis:"y",items:".jqgrow"},d||{}),d.start&&a.isFunction(d.start)?(d._start_=d.start,delete d.start):d._start_=!1,d.update&&a.isFunction(d.update)?(d._update_=d.update,delete d.update):d._update_=!1,d.start=function(e,b){a(b.item).css("border-width","0px");a("td",b.item).each(function(a){this.style.width=c.grid.cols[a].style.width});if(c.p.subGrid){var h=a(b.item).attr("id");try{a(c).jqGrid("collapseSubGridRow",h)}catch(f){}}d._start_&&
d._start_.apply(this,[e,b])},d.update=function(e,b){a(b.item).css("border-width","");!0===c.p.rownumbers&&a("td.jqgrid-rownum",c.rows).each(function(b){a(this).html(b+1+(parseInt(c.p.page,10)-1)*parseInt(c.p.rowNum,10))});d._update_&&d._update_.apply(this,[e,b])},a("tbody:first",c).sortable(d),a("tbody:first",c).disableSelection())})},gridDnD:function(d){return this.each(function(){function c(){var b=a.data(e,"dnd");a("tr.jqgrow:not(.ui-draggable)",e).draggable(a.isFunction(b.drag)?b.drag.call(a(e),
b):b.drag)}var e=this,b,h;if(e.grid&&!e.p.treeGrid&&a.fn.draggable&&a.fn.droppable)if(void 0===a("#jqgrid_dnd")[0]&&a("body").append("<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>"),"string"===typeof d&&"updateDnD"===d&&!0===e.p.jqgdnd)c();else if(d=a.extend({drag:function(b){return a.extend({start:function(c,d){var h;if(e.p.subGrid){h=a(d.helper).attr("id");try{a(e).jqGrid("collapseSubGridRow",h)}catch(p){}}for(h=0;h<a.data(e,"dnd").connectWith.length;h++)0===a(a.data(e,"dnd").connectWith[h]).jqGrid("getGridParam",
"reccount")&&a(a.data(e,"dnd").connectWith[h]).jqGrid("addRowData","jqg_empty_row",{});d.helper.addClass("ui-state-highlight");a("td",d.helper).each(function(a){this.style.width=e.grid.headers[a].width+"px"});b.onstart&&a.isFunction(b.onstart)&&b.onstart.call(a(e),c,d)},stop:function(c,d){var h;d.helper.dropped&&!b.dragcopy&&(h=a(d.helper).attr("id"),void 0===h&&(h=a(this).attr("id")),a(e).jqGrid("delRowData",h));for(h=0;h<a.data(e,"dnd").connectWith.length;h++)a(a.data(e,"dnd").connectWith[h]).jqGrid("delRowData",
"jqg_empty_row");b.onstop&&a.isFunction(b.onstop)&&b.onstop.call(a(e),c,d)}},b.drag_opts||{})},drop:function(b){return a.extend({accept:function(b){if(!a(b).hasClass("jqgrow"))return b;b=a(b).closest("table.ui-jqgrid-btable");return 0<b.length&&void 0!==a.data(b[0],"dnd")?(b=a.data(b[0],"dnd").connectWith,-1!==a.inArray("#"+a.jgrid.jqID(this.id),b)?!0:!1):!1},drop:function(c,d){if(a(d.draggable).hasClass("jqgrow")){var h=a(d.draggable).attr("id"),h=d.draggable.parent().parent().jqGrid("getRowData",
h);if(!b.dropbyname){var p=0,r={},q,l,t=a("#"+a.jgrid.jqID(this.id)).jqGrid("getGridParam","colModel");try{for(l in h)h.hasOwnProperty(l)&&(q=t[p].name,"cb"!==q&&"rn"!==q&&"subgrid"!==q&&h.hasOwnProperty(l)&&t[p]&&(r[q]=h[l]),p++);h=r}catch(s){}}d.helper.dropped=!0;b.beforedrop&&a.isFunction(b.beforedrop)&&(q=b.beforedrop.call(this,c,d,h,a("#"+a.jgrid.jqID(e.p.id)),a(this)),void 0!==q&&null!==q&&"object"===typeof q&&(h=q));if(d.helper.dropped){var w;b.autoid&&(a.isFunction(b.autoid)?w=b.autoid.call(this,
h):(w=Math.ceil(1E3*Math.random()),w=b.autoidprefix+w));a("#"+a.jgrid.jqID(this.id)).jqGrid("addRowData",w,h,b.droppos)}b.ondrop&&a.isFunction(b.ondrop)&&b.ondrop.call(this,c,d,h)}}},b.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{activeClass:"ui-state-active",hoverClass:"ui-state-hover"},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5E3},dragcopy:!1,dropbyname:!1,droppos:"first",autoid:!0,autoidprefix:"dnd_"},d||{}),d.connectWith)for(d.connectWith=
d.connectWith.split(","),d.connectWith=a.map(d.connectWith,function(b){return a.trim(b)}),a.data(e,"dnd",d),0===e.p.reccount||e.p.jqgdnd||c(),e.p.jqgdnd=!0,b=0;b<d.connectWith.length;b++)h=d.connectWith[b],a(h).droppable(a.isFunction(d.drop)?d.drop.call(a(e),d):d.drop)})},gridResize:function(d){return this.each(function(){var c=this,e=a.jgrid.jqID(c.p.id);c.grid&&a.fn.resizable&&(d=a.extend({},d||{}),d.alsoResize?(d._alsoResize_=d.alsoResize,delete d.alsoResize):d._alsoResize_=!1,d.stop&&a.isFunction(d.stop)?
(d._stop_=d.stop,delete d.stop):d._stop_=!1,d.stop=function(b,h){a(c).jqGrid("setGridParam",{height:a("#gview_"+e+" .ui-jqgrid-bdiv").height()});a(c).jqGrid("setGridWidth",h.size.width,d.shrinkToFit);d._stop_&&d._stop_.call(c,b,h)},d.alsoResize=d._alsoResize_?eval("("+("{'#gview_"+e+" .ui-jqgrid-bdiv':true,'"+d._alsoResize_+"':true}")+")"):a(".ui-jqgrid-bdiv","#gview_"+e),delete d._alsoResize_,a("#gbox_"+e).resizable(d))})}})})(jQuery);
(function(a){a.jgrid.extend({setTreeNode:function(e,d){return this.each(function(){var c=this;if(c.grid&&c.p.treeGrid)for(var g=c.p.expColInd,b=c.p.treeReader.expanded_field,h=c.p.treeReader.leaf_field,f=c.p.treeReader.level_field,k=c.p.treeReader.icon_field,m=c.p.treeReader.loaded,n,p,r,q;e<d;)q=a.jgrid.stripPref(c.p.idPrefix,c.rows[e].id),q=c.p.data[c.p._index[q]],"nested"!==c.p.treeGridModel||q[h]||(n=parseInt(q[c.p.treeReader.left_field],10),p=parseInt(q[c.p.treeReader.right_field],10),q[h]=p===
n+1?"true":"false",c.rows[e].cells[c.p._treeleafpos].innerHTML=q[h]),n=parseInt(q[f],10),0===c.p.tree_root_level?(r=n+1,p=n):(r=n,p=n-1),r="<div class='tree-wrap tree-wrap-"+c.p.direction+"' style='width:"+18*r+"px;'>",r+="<div style='"+("rtl"===c.p.direction?"right:":"left:")+18*p+"px;' class='ui-icon ",void 0!==q[m]&&(q[m]="true"===q[m]||!0===q[m]?!0:!1),"true"===q[h]||!0===q[h]?(r+=(void 0!==q[k]&&""!==q[k]?q[k]:c.p.treeIcons.leaf)+" tree-leaf treeclick",q[h]=!0,p="leaf"):(q[h]=!1,p=""),q[b]=("true"===
q[b]||!0===q[b]?!0:!1)&&(q[m]||void 0===q[m]),r=!1===q[b]?r+(!0===q[h]?"'":c.p.treeIcons.plus+" tree-plus treeclick'"):r+(!0===q[h]?"'":c.p.treeIcons.minus+" tree-minus treeclick'"),r+="></div></div>",a(c.rows[e].cells[g]).wrapInner("<span class='cell-wrapper"+p+"'></span>").prepend(r),n!==parseInt(c.p.tree_root_level,10)&&((q=(q=a(c).jqGrid("getNodeParent",q))&&q.hasOwnProperty(b)?q[b]:!0)||a(c.rows[e]).css("display","none")),a(c.rows[e].cells[g]).find("div.treeclick").bind("click",function(d){d=
a.jgrid.stripPref(c.p.idPrefix,a(d.target||d.srcElement,c.rows).closest("tr.jqgrow")[0].id);d=c.p._index[d];c.p.data[d][h]||(c.p.data[d][b]?(a(c).jqGrid("collapseRow",c.p.data[d]),a(c).jqGrid("collapseNode",c.p.data[d])):(a(c).jqGrid("expandRow",c.p.data[d]),a(c).jqGrid("expandNode",c.p.data[d])));return!1}),!0===c.p.ExpandColClick&&a(c.rows[e].cells[g]).find("span.cell-wrapper").css("cursor","pointer").bind("click",function(d){d=a.jgrid.stripPref(c.p.idPrefix,a(d.target||d.srcElement,c.rows).closest("tr.jqgrow")[0].id);
var e=c.p._index[d];c.p.data[e][h]||(c.p.data[e][b]?(a(c).jqGrid("collapseRow",c.p.data[e]),a(c).jqGrid("collapseNode",c.p.data[e])):(a(c).jqGrid("expandRow",c.p.data[e]),a(c).jqGrid("expandNode",c.p.data[e])));a(c).jqGrid("setSelection",d);return!1}),e++})},setTreeGrid:function(){return this.each(function(){var e=this,d=0,c,g=!1,b,h,f=[];if(e.p.treeGrid){e.p.treedatatype||a.extend(e.p,{treedatatype:e.p.datatype});e.p.subGrid=!1;e.p.altRows=!1;e.p.pgbuttons=!1;e.p.pginput=!1;e.p.gridview=!0;null===
e.p.rowTotal&&(e.p.rowNum=1E4);e.p.multiselect=!1;e.p.rowList=[];e.p.expColInd=0;c="ui-icon-triangle-1-"+("rtl"===e.p.direction?"w":"e");e.p.treeIcons=a.extend({plus:c,minus:"ui-icon-triangle-1-s",leaf:"ui-icon-radio-off"},e.p.treeIcons||{});"nested"===e.p.treeGridModel?e.p.treeReader=a.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},e.p.treeReader):"adjacency"===e.p.treeGridModel&&(e.p.treeReader=a.extend({level_field:"level",
parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},e.p.treeReader));for(b in e.p.colModel)if(e.p.colModel.hasOwnProperty(b))for(h in c=e.p.colModel[b].name,c!==e.p.ExpandColumn||g||(g=!0,e.p.expColInd=d),d++,e.p.treeReader)e.p.treeReader.hasOwnProperty(h)&&e.p.treeReader[h]===c&&f.push(c);a.each(e.p.treeReader,function(b,c){c&&-1===a.inArray(c,f)&&("leaf_field"===b&&(e.p._treeleafpos=d),d++,e.p.colNames.push(c),e.p.colModel.push({name:c,width:1,
hidden:!0,sortable:!1,resizable:!1,hidedlg:!0,editable:!0,search:!1}))})}})},expandRow:function(e){this.each(function(){var d=this;if(d.grid&&d.p.treeGrid){var c=a(d).jqGrid("getNodeChildren",e),g=d.p.treeReader.expanded_field,b=d.rows;a(c).each(function(){var c=d.p.idPrefix+a.jgrid.getAccessor(this,d.p.localReader.id);a(b.namedItem(c)).css("display","");this[g]&&a(d).jqGrid("expandRow",this)})}})},collapseRow:function(e){this.each(function(){var d=this;if(d.grid&&d.p.treeGrid){var c=a(d).jqGrid("getNodeChildren",
e),g=d.p.treeReader.expanded_field,b=d.rows;a(c).each(function(){var c=d.p.idPrefix+a.jgrid.getAccessor(this,d.p.localReader.id);a(b.namedItem(c)).css("display","none");this[g]&&a(d).jqGrid("collapseRow",this)})}})},getRootNodes:function(){var e=[];this.each(function(){var d=this;if(d.grid&&d.p.treeGrid)switch(d.p.treeGridModel){case "nested":var c=d.p.treeReader.level_field;a(d.p.data).each(function(){parseInt(this[c],10)===parseInt(d.p.tree_root_level,10)&&e.push(this)});break;case "adjacency":var g=
d.p.treeReader.parent_id_field;a(d.p.data).each(function(){null!==this[g]&&"null"!==String(this[g]).toLowerCase()||e.push(this)})}});return e},getNodeDepth:function(e){var d=null;this.each(function(){if(this.grid&&this.p.treeGrid)switch(this.p.treeGridModel){case "nested":d=parseInt(e[this.p.treeReader.level_field],10)-parseInt(this.p.tree_root_level,10);break;case "adjacency":d=a(this).jqGrid("getNodeAncestors",e).length}});return d},getNodeParent:function(e){var d=null;this.each(function(){var c=
this;if(c.grid&&c.p.treeGrid)switch(c.p.treeGridModel){case "nested":var g=c.p.treeReader.left_field,b=c.p.treeReader.right_field,h=c.p.treeReader.level_field,f=parseInt(e[g],10),k=parseInt(e[b],10),m=parseInt(e[h],10);a(this.p.data).each(function(){if(parseInt(this[h],10)===m-1&&parseInt(this[g],10)<f&&parseInt(this[b],10)>k)return d=this,!1});break;case "adjacency":var n=c.p.treeReader.parent_id_field,p=c.p.localReader.id;a(this.p.data).each(function(){if(this[p]===a.jgrid.stripPref(c.p.idPrefix,
e[n]))return d=this,!1})}});return d},getNodeChildren:function(e){var d=[];this.each(function(){var c=this;if(c.grid&&c.p.treeGrid)switch(c.p.treeGridModel){case "nested":var g=c.p.treeReader.left_field,b=c.p.treeReader.right_field,h=c.p.treeReader.level_field,f=parseInt(e[g],10),k=parseInt(e[b],10),m=parseInt(e[h],10);a(this.p.data).each(function(){parseInt(this[h],10)===m+1&&parseInt(this[g],10)>f&&parseInt(this[b],10)<k&&d.push(this)});break;case "adjacency":var n=c.p.treeReader.parent_id_field,
p=c.p.localReader.id;a(this.p.data).each(function(){this[n]==a.jgrid.stripPref(c.p.idPrefix,e[p])&&d.push(this)})}});return d},getFullTreeNode:function(e){var d=[];this.each(function(){var c=this,g;if(c.grid&&c.p.treeGrid)switch(c.p.treeGridModel){case "nested":var b=c.p.treeReader.left_field,h=c.p.treeReader.right_field,f=c.p.treeReader.level_field,k=parseInt(e[b],10),m=parseInt(e[h],10),n=parseInt(e[f],10);a(this.p.data).each(function(){parseInt(this[f],10)>=n&&parseInt(this[b],10)>=k&&parseInt(this[b],
10)<=m&&d.push(this)});break;case "adjacency":if(e){d.push(e);var p=c.p.treeReader.parent_id_field,r=c.p.localReader.id;a(this.p.data).each(function(b){g=d.length;for(b=0;b<g;b++)if(a.jgrid.stripPref(c.p.idPrefix,d[b][r])===this[p]){d.push(this);break}})}}});return d},getNodeAncestors:function(e){var d=[];this.each(function(){if(this.grid&&this.p.treeGrid)for(var c=a(this).jqGrid("getNodeParent",e);c;)d.push(c),c=a(this).jqGrid("getNodeParent",c)});return d},isVisibleNode:function(e){var d=!0;this.each(function(){if(this.grid&&
this.p.treeGrid){var c=a(this).jqGrid("getNodeAncestors",e),g=this.p.treeReader.expanded_field;a(c).each(function(){d=d&&this[g];if(!d)return!1})}});return d},isNodeLoaded:function(e){var d;this.each(function(){if(this.grid&&this.p.treeGrid){var c=this.p.treeReader.leaf_field,g=this.p.treeReader.loaded;d=void 0!==e?void 0!==e[g]?e[g]:e[c]||0<a(this).jqGrid("getNodeChildren",e).length?!0:!1:!1}});return d},expandNode:function(e){return this.each(function(){if(this.grid&&this.p.treeGrid){var d=this.p.treeReader.expanded_field,
c=this.p.treeReader.parent_id_field,g=this.p.treeReader.loaded,b=this.p.treeReader.level_field,h=this.p.treeReader.left_field,f=this.p.treeReader.right_field;if(!e[d]){var k=a.jgrid.getAccessor(e,this.p.localReader.id),m=a("#"+this.p.idPrefix+a.jgrid.jqID(k),this.grid.bDiv)[0],n=this.p._index[k];a(this).jqGrid("isNodeLoaded",this.p.data[n])?(e[d]=!0,a("div.treeclick",m).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus")):this.grid.hDiv.loading||(e[d]=!0,
a("div.treeclick",m).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus"),this.p.treeANode=m.rowIndex,this.p.datatype=this.p.treedatatype,"nested"===this.p.treeGridModel?a(this).jqGrid("setGridParam",{postData:{nodeid:k,n_left:e[h],n_right:e[f],n_level:e[b]}}):a(this).jqGrid("setGridParam",{postData:{nodeid:k,parentid:e[c],n_level:e[b]}}),a(this).trigger("reloadGrid"),e[g]=!0,"nested"===this.p.treeGridModel?a(this).jqGrid("setGridParam",{postData:{nodeid:"",
n_left:"",n_right:"",n_level:""}}):a(this).jqGrid("setGridParam",{postData:{nodeid:"",parentid:"",n_level:""}}))}}})},collapseNode:function(e){return this.each(function(){if(this.grid&&this.p.treeGrid){var d=this.p.treeReader.expanded_field;e[d]&&(e[d]=!1,d=a.jgrid.getAccessor(e,this.p.localReader.id),d=a("#"+this.p.idPrefix+a.jgrid.jqID(d),this.grid.bDiv)[0],a("div.treeclick",d).removeClass(this.p.treeIcons.minus+" tree-minus").addClass(this.p.treeIcons.plus+" tree-plus"))}})},SortTree:function(e,
d,c,g){return this.each(function(){if(this.grid&&this.p.treeGrid){var b,h,f,k=[],m=this,n;b=a(this).jqGrid("getRootNodes");b=a.jgrid.from(b);b.orderBy(e,d,c,g);n=b.select();b=0;for(h=n.length;b<h;b++)f=n[b],k.push(f),a(this).jqGrid("collectChildrenSortTree",k,f,e,d,c,g);a.each(k,function(b){var c=a.jgrid.getAccessor(this,m.p.localReader.id);a("#"+a.jgrid.jqID(m.p.id)+" tbody tr:eq("+b+")").after(a("tr#"+a.jgrid.jqID(c),m.grid.bDiv))});k=n=b=null}})},collectChildrenSortTree:function(e,d,c,g,b,h){return this.each(function(){if(this.grid&&
this.p.treeGrid){var f,k,m,n;f=a(this).jqGrid("getNodeChildren",d);f=a.jgrid.from(f);f.orderBy(c,g,b,h);n=f.select();f=0;for(k=n.length;f<k;f++)m=n[f],e.push(m),a(this).jqGrid("collectChildrenSortTree",e,m,c,g,b,h)}})},setTreeRow:function(e,d){var c=!1;this.each(function(){this.grid&&this.p.treeGrid&&(c=a(this).jqGrid("setRowData",e,d))});return c},delTreeNode:function(e){return this.each(function(){var d=this.p.localReader.id,c,g=this.p.treeReader.left_field,b=this.p.treeReader.right_field,h,f,k;
if(this.grid&&this.p.treeGrid&&(c=this.p._index[e],void 0!==c)){h=parseInt(this.p.data[c][b],10);f=h-parseInt(this.p.data[c][g],10)+1;var m=a(this).jqGrid("getFullTreeNode",this.p.data[c]);if(0<m.length)for(c=0;c<m.length;c++)a(this).jqGrid("delRowData",m[c][d]);if("nested"===this.p.treeGridModel){d=a.jgrid.from(this.p.data).greater(g,h,{stype:"integer"}).select();if(d.length)for(k in d)d.hasOwnProperty(k)&&(d[k][g]=parseInt(d[k][g],10)-f);d=a.jgrid.from(this.p.data).greater(b,h,{stype:"integer"}).select();
if(d.length)for(k in d)d.hasOwnProperty(k)&&(d[k][b]=parseInt(d[k][b],10)-f)}}})},addChildNode:function(e,d,c,g){var b=this[0];if(c){var h=b.p.treeReader.expanded_field,f=b.p.treeReader.leaf_field,k=b.p.treeReader.level_field,m=b.p.treeReader.parent_id_field,n=b.p.treeReader.left_field,p=b.p.treeReader.right_field,r=b.p.treeReader.loaded,q,l,t,s,w;q=0;var v=d,x;void 0===g&&(g=!1);if(void 0===e||null===e){w=b.p.data.length-1;if(0<=w)for(;0<=w;)q=Math.max(q,parseInt(b.p.data[w][b.p.localReader.id],
10)),w--;e=q+1}var G=a(b).jqGrid("getInd",d);x=!1;void 0===d||null===d||""===d?(v=d=null,q="last",s=b.p.tree_root_level,w=b.p.data.length+1):(q="after",l=b.p._index[d],t=b.p.data[l],d=t[b.p.localReader.id],s=parseInt(t[k],10)+1,w=a(b).jqGrid("getFullTreeNode",t),w.length?(v=w=w[w.length-1][b.p.localReader.id],w=a(b).jqGrid("getInd",v)+1):w=a(b).jqGrid("getInd",d)+1,t[f]&&(x=!0,t[h]=!0,a(b.rows[G]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass(b.p.treeIcons.leaf+
" tree-leaf").addClass(b.p.treeIcons.minus+" tree-minus"),b.p.data[l][f]=!1,t[r]=!0));l=w+1;void 0===c[h]&&(c[h]=!1);void 0===c[r]&&(c[r]=!1);c[k]=s;void 0===c[f]&&(c[f]=!0);"adjacency"===b.p.treeGridModel&&(c[m]=d);if("nested"===b.p.treeGridModel){var C;if(null!==d){f=parseInt(t[p],10);k=a.jgrid.from(b.p.data);k=k.greaterOrEquals(p,f,{stype:"integer"});k=k.select();if(k.length)for(C in k)k.hasOwnProperty(C)&&(k[C][n]=k[C][n]>f?parseInt(k[C][n],10)+2:k[C][n],k[C][p]=k[C][p]>=f?parseInt(k[C][p],10)+
2:k[C][p]);c[n]=f;c[p]=f+1}else{f=parseInt(a(b).jqGrid("getCol",p,!1,"max"),10);k=a.jgrid.from(b.p.data).greater(n,f,{stype:"integer"}).select();if(k.length)for(C in k)k.hasOwnProperty(C)&&(k[C][n]=parseInt(k[C][n],10)+2);k=a.jgrid.from(b.p.data).greater(p,f,{stype:"integer"}).select();if(k.length)for(C in k)k.hasOwnProperty(C)&&(k[C][p]=parseInt(k[C][p],10)+2);c[n]=f+1;c[p]=f+2}}if(null===d||a(b).jqGrid("isNodeLoaded",t)||x)a(b).jqGrid("addRowData",e,c,q,v),a(b).jqGrid("setTreeNode",w,l);t&&!t[h]&&
g&&a(b.rows[G]).find("div.treeclick").click()}}})})(jQuery);
(function(a){a.fmatter={};a.extend(a.fmatter,{isBoolean:function(a){return"boolean"===typeof a},isObject:function(e){return e&&("object"===typeof e||a.isFunction(e))||!1},isString:function(a){return"string"===typeof a},isNumber:function(a){return"number"===typeof a&&isFinite(a)},isValue:function(a){return this.isObject(a)||this.isString(a)||this.isNumber(a)||this.isBoolean(a)},isEmpty:function(e){if(!this.isString(e)&&this.isValue(e))return!1;if(!this.isValue(e))return!0;e=a.trim(e).replace(/\&nbsp\;/ig,
"").replace(/\&#160\;/ig,"");return""===e}});a.fn.fmatter=function(e,d,c,g,b){var h=d;c=a.extend({},a.jgrid.formatter,c);try{h=a.fn.fmatter[e].call(this,d,c,g,b)}catch(f){}return h};a.fmatter.util={NumberFormat:function(e,d){a.fmatter.isNumber(e)||(e*=1);if(a.fmatter.isNumber(e)){var c=0>e,g=String(e),b=d.decimalSeparator||".",h;if(a.fmatter.isNumber(d.decimalPlaces)){var f=d.decimalPlaces,g=Math.pow(10,f),g=String(Math.round(e*g)/g);h=g.lastIndexOf(".");if(0<f)for(0>h?(g+=b,h=g.length-1):"."!==b&&
(g=g.replace(".",b));g.length-1-h<f;)g+="0"}if(d.thousandsSeparator){f=d.thousandsSeparator;h=g.lastIndexOf(b);h=-1<h?h:g.length;var b=g.substring(h),k=-1,m;for(m=h;0<m;m--)k++,0===k%3&&m!==h&&(!c||1<m)&&(b=f+b),b=g.charAt(m-1)+b;g=b}g=d.prefix?d.prefix+g:g;return g=d.suffix?g+d.suffix:g}return e}};a.fn.fmatter.defaultFormat=function(e,d){return a.fmatter.isValue(e)&&""!==e?e:d.defaultValue||"&#160;"};a.fn.fmatter.email=function(e,d){return a.fmatter.isEmpty(e)?a.fn.fmatter.defaultFormat(e,d):'<a href="mailto:'+
e+'">'+e+"</a>"};a.fn.fmatter.checkbox=function(e,d){var c=a.extend({},d.checkbox),g;void 0!==d.colModel&&void 0!==d.colModel.formatoptions&&(c=a.extend({},c,d.colModel.formatoptions));g=!0===c.disabled?'disabled="disabled"':"";if(a.fmatter.isEmpty(e)||void 0===e)e=a.fn.fmatter.defaultFormat(e,c);e=String(e);e=(e+"").toLowerCase();return'<input type="checkbox" '+(0>e.search(/(false|f|0|no|n|off|undefined)/i)?" checked='checked' ":"")+' value="'+e+'" offval="no" '+g+"/>"};a.fn.fmatter.link=function(e,
d){var c={target:d.target},g="";void 0!==d.colModel&&void 0!==d.colModel.formatoptions&&(c=a.extend({},c,d.colModel.formatoptions));c.target&&(g="target="+c.target);return a.fmatter.isEmpty(e)?a.fn.fmatter.defaultFormat(e,d):"<a "+g+' href="'+e+'">'+e+"</a>"};a.fn.fmatter.showlink=function(e,d){var c={baseLinkUrl:d.baseLinkUrl,showAction:d.showAction,addParam:d.addParam||"",target:d.target,idName:d.idName},g="";void 0!==d.colModel&&void 0!==d.colModel.formatoptions&&(c=a.extend({},c,d.colModel.formatoptions));
c.target&&(g="target="+c.target);c=c.baseLinkUrl+c.showAction+"?"+c.idName+"="+d.rowId+c.addParam;return a.fmatter.isString(e)||a.fmatter.isNumber(e)?"<a "+g+' href="'+c+'">'+e+"</a>":a.fn.fmatter.defaultFormat(e,d)};a.fn.fmatter.integer=function(e,d){var c=a.extend({},d.integer);void 0!==d.colModel&&void 0!==d.colModel.formatoptions&&(c=a.extend({},c,d.colModel.formatoptions));return a.fmatter.isEmpty(e)?c.defaultValue:a.fmatter.util.NumberFormat(e,c)};a.fn.fmatter.number=function(e,d){var c=a.extend({},
d.number);void 0!==d.colModel&&void 0!==d.colModel.formatoptions&&(c=a.extend({},c,d.colModel.formatoptions));return a.fmatter.isEmpty(e)?c.defaultValue:a.fmatter.util.NumberFormat(e,c)};a.fn.fmatter.currency=function(e,d){var c=a.extend({},d.currency);void 0!==d.colModel&&void 0!==d.colModel.formatoptions&&(c=a.extend({},c,d.colModel.formatoptions));return a.fmatter.isEmpty(e)?c.defaultValue:a.fmatter.util.NumberFormat(e,c)};a.fn.fmatter.date=function(e,d,c,g){c=a.extend({},d.date);void 0!==d.colModel&&
void 0!==d.colModel.formatoptions&&(c=a.extend({},c,d.colModel.formatoptions));return c.reformatAfterEdit||"edit"!==g?a.fmatter.isEmpty(e)?a.fn.fmatter.defaultFormat(e,d):a.jgrid.parseDate(c.srcformat,e,c.newformat,c):a.fn.fmatter.defaultFormat(e,d)};a.fn.fmatter.select=function(e,d){e=String(e);var c=!1,g=[],b,h;void 0!==d.colModel.formatoptions?(c=d.colModel.formatoptions.value,b=void 0===d.colModel.formatoptions.separator?":":d.colModel.formatoptions.separator,h=void 0===d.colModel.formatoptions.delimiter?
";":d.colModel.formatoptions.delimiter):void 0!==d.colModel.editoptions&&(c=d.colModel.editoptions.value,b=void 0===d.colModel.editoptions.separator?":":d.colModel.editoptions.separator,h=void 0===d.colModel.editoptions.delimiter?";":d.colModel.editoptions.delimiter);if(c){var f=!0===d.colModel.editoptions.multiple?!0:!1,k=[];f&&(k=e.split(","),k=a.map(k,function(b){return a.trim(b)}));if(a.fmatter.isString(c)){var m=c.split(h),n=0,p;for(p=0;p<m.length;p++)if(h=m[p].split(b),2<h.length&&(h[1]=a.map(h,
function(a,b){if(0<b)return a}).join(b)),f)-1<a.inArray(h[0],k)&&(g[n]=h[1],n++);else if(a.trim(h[0])===a.trim(e)){g[0]=h[1];break}}else a.fmatter.isObject(c)&&(f?g=a.map(k,function(a){return c[a]}):g[0]=c[e]||"")}e=g.join(", ");return""===e?a.fn.fmatter.defaultFormat(e,d):e};a.fn.fmatter.rowactions=function(e){var d=a(this).closest("tr.jqgrow"),c=d.attr("id"),g=a(this).closest("table.ui-jqgrid-btable").attr("id").replace(/_frozen([^_]*)$/,"$1"),g=a("#"+g),b=g[0],h=b.p,f=h.colModel[a.jgrid.getCellIndex(this)],
k=f.frozen?a("tr#"+c+" td:eq("+a.jgrid.getCellIndex(this)+") > div",g):a(this).parent(),m={keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null,restoreAfterError:!0,mtype:"POST",delOptions:{},editOptions:{}},n=function(c){a.isFunction(m.afterRestore)&&m.afterRestore.call(b,c);k.find("div.ui-inline-edit,div.ui-inline-del").show();k.find("div.ui-inline-save,div.ui-inline-cancel").hide()};void 0!==f.formatoptions&&(m=a.extend(m,f.formatoptions));void 0!==
h.editOptions&&(m.editOptions=h.editOptions);void 0!==h.delOptions&&(m.delOptions=h.delOptions);d.hasClass("jqgrid-new-row")&&(m.extraparam[h.prmNames.oper]=h.prmNames.addoper);d={keys:m.keys,oneditfunc:m.onEdit,successfunc:m.onSuccess,url:m.url,extraparam:m.extraparam,aftersavefunc:function(c,d){a.isFunction(m.afterSave)&&m.afterSave.call(b,c,d);k.find("div.ui-inline-edit,div.ui-inline-del").show();k.find("div.ui-inline-save,div.ui-inline-cancel").hide()},errorfunc:m.onError,afterrestorefunc:n,restoreAfterError:m.restoreAfterError,
mtype:m.mtype};switch(e){case "edit":g.jqGrid("editRow",c,d);k.find("div.ui-inline-edit,div.ui-inline-del").hide();k.find("div.ui-inline-save,div.ui-inline-cancel").show();g.triggerHandler("jqGridAfterGridComplete");break;case "save":g.jqGrid("saveRow",c,d)&&(k.find("div.ui-inline-edit,div.ui-inline-del").show(),k.find("div.ui-inline-save,div.ui-inline-cancel").hide(),g.triggerHandler("jqGridAfterGridComplete"));break;case "cancel":g.jqGrid("restoreRow",c,n);k.find("div.ui-inline-edit,div.ui-inline-del").show();
k.find("div.ui-inline-save,div.ui-inline-cancel").hide();g.triggerHandler("jqGridAfterGridComplete");break;case "del":g.jqGrid("delGridRow",c,m.delOptions);break;case "formedit":g.jqGrid("setSelection",c),g.jqGrid("editGridRow",c,m.editOptions)}};a.fn.fmatter.actions=function(e,d){var c={keys:!1,editbutton:!0,delbutton:!0,editformbutton:!1},g=d.rowId,b="";void 0!==d.colModel.formatoptions&&(c=a.extend(c,d.colModel.formatoptions));if(void 0===g||a.fmatter.isEmpty(g))return"";c.editformbutton?b+="<div title='"+
a.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+("id='jEditButton_"+g+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'formedit'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ")+"><span class='ui-icon ui-icon-pencil'></span></div>":c.editbutton&&(b+="<div title='"+a.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+("id='jEditButton_"+g+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'edit'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover') ")+
"><span class='ui-icon ui-icon-pencil'></span></div>");c.delbutton&&(b+="<div title='"+a.jgrid.nav.deltitle+"' style='float:left;margin-left:5px;' class='ui-pg-div ui-inline-del' "+("id='jDeleteButton_"+g+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'del'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ")+"><span class='ui-icon ui-icon-trash'></span></div>");b+="<div title='"+a.jgrid.edit.bSubmit+"' style='float:left;display:none' class='ui-pg-div ui-inline-save' "+
("id='jSaveButton_"+g+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'save'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ")+"><span class='ui-icon ui-icon-disk'></span></div>";b+="<div title='"+a.jgrid.edit.bCancel+"' style='float:left;display:none;margin-left:5px;' class='ui-pg-div ui-inline-cancel' "+("id='jCancelButton_"+g+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'cancel'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ")+
"><span class='ui-icon ui-icon-cancel'></span></div>";return"<div style='margin-left:8px;'>"+b+"</div>"};a.unformat=function(e,d,c,g){var b,h=d.colModel.formatter,f=d.colModel.formatoptions||{},k=/([\.\*\_\'\(\)\{\}\+\?\\])/g,m=d.colModel.unformat||a.fn.fmatter[h]&&a.fn.fmatter[h].unformat;if(void 0!==m&&a.isFunction(m))b=m.call(this,a(e).text(),d,e);else if(void 0!==h&&a.fmatter.isString(h))switch(b=a.jgrid.formatter||{},h){case "integer":f=a.extend({},b.integer,f);d=f.thousandsSeparator.replace(k,
"\\$1");d=RegExp(d,"g");b=a(e).text().replace(d,"");break;case "number":f=a.extend({},b.number,f);d=f.thousandsSeparator.replace(k,"\\$1");d=RegExp(d,"g");b=a(e).text().replace(d,"").replace(f.decimalSeparator,".");break;case "currency":f=a.extend({},b.currency,f);d=f.thousandsSeparator.replace(k,"\\$1");d=RegExp(d,"g");b=a(e).text();f.prefix&&f.prefix.length&&(b=b.substr(f.prefix.length));f.suffix&&f.suffix.length&&(b=b.substr(0,b.length-f.suffix.length));b=b.replace(d,"").replace(f.decimalSeparator,
".");break;case "checkbox":f=d.colModel.editoptions?d.colModel.editoptions.value.split(":"):["Yes","No"];b=a("input",e).is(":checked")?f[0]:f[1];break;case "select":b=a.unformat.select(e,d,c,g);break;case "actions":return"";default:b=a(e).text()}return void 0!==b?b:!0===g?a(e).text():a.jgrid.htmlDecode(a(e).html())};a.unformat.select=function(e,d,c,g){c=[];e=a(e).text();if(!0===g)return e;g=a.extend({},void 0!==d.colModel.formatoptions?d.colModel.formatoptions:d.colModel.editoptions);d=void 0===g.separator?
":":g.separator;var b=void 0===g.delimiter?";":g.delimiter;if(g.value){var h=g.value;g=!0===g.multiple?!0:!1;var f=[];g&&(f=e.split(","),f=a.map(f,function(b){return a.trim(b)}));if(a.fmatter.isString(h)){var k=h.split(b),m=0,n;for(n=0;n<k.length;n++)if(b=k[n].split(d),2<b.length&&(b[1]=a.map(b,function(a,b){if(0<b)return a}).join(d)),g)-1<a.inArray(b[1],f)&&(c[m]=b[0],m++);else if(a.trim(b[1])===a.trim(e)){c[0]=b[0];break}}else if(a.fmatter.isObject(h)||a.isArray(h))g||(f[0]=e),c=a.map(f,function(b){var c;
a.each(h,function(a,d){if(d===b)return c=a,!1});if(void 0!==c)return c});return c.join(", ")}return e||""};a.unformat.date=function(e,d){var c=a.jgrid.formatter.date||{};void 0!==d.formatoptions&&(c=a.extend({},c,d.formatoptions));return a.fmatter.isEmpty(e)?a.fn.fmatter.defaultFormat(e,d):a.jgrid.parseDate(c.newformat,e,c.srcformat,c)}})(jQuery);